// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"encoding/json"
	tfTypes "github.com/airbytehq/terraform-provider-airbyte/internal/provider/types"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/operations"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

func (r *DestinationCustomerIoResourceModel) RefreshFromSharedDestinationResponse(ctx context.Context, resp *shared.DestinationResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		configurationPriorData := r.Configuration
		r.Configuration = &tfTypes.DestinationCustomerIo{}
		if configurationPriorData != nil {
			r.Configuration.AdditionalProperties = configurationPriorData.AdditionalProperties
			r.Configuration.Credentials = configurationPriorData.Credentials
			r.Configuration.ObjectStorageConfig = configurationPriorData.ObjectStorageConfig
		}
		r.CreatedAt = types.Int64Value(resp.CreatedAt)
		r.DefinitionID = types.StringValue(resp.DefinitionID)
		r.DestinationID = types.StringValue(resp.DestinationID)
		r.DestinationType = types.StringValue(resp.DestinationType)
		r.Name = types.StringValue(resp.Name)
		if resp.ResourceAllocation == nil {
			r.ResourceAllocation = nil
		} else {
			r.ResourceAllocation = &tfTypes.ScopedResourceRequirements{}
			if resp.ResourceAllocation.Default == nil {
				r.ResourceAllocation.Default = nil
			} else {
				r.ResourceAllocation.Default = &tfTypes.ResourceRequirements{}
				r.ResourceAllocation.Default.CPULimit = types.StringPointerValue(resp.ResourceAllocation.Default.CPULimit)
				r.ResourceAllocation.Default.CPURequest = types.StringPointerValue(resp.ResourceAllocation.Default.CPURequest)
				r.ResourceAllocation.Default.EphemeralStorageLimit = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageLimit)
				r.ResourceAllocation.Default.EphemeralStorageRequest = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageRequest)
				r.ResourceAllocation.Default.MemoryLimit = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryLimit)
				r.ResourceAllocation.Default.MemoryRequest = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryRequest)
			}
			r.ResourceAllocation.JobSpecific = []tfTypes.JobTypeResourceLimit{}

			for _, jobSpecificItem := range resp.ResourceAllocation.JobSpecific {
				var jobSpecific tfTypes.JobTypeResourceLimit

				jobSpecific.JobType = types.StringValue(string(jobSpecificItem.JobType))
				jobSpecific.ResourceRequirements = &tfTypes.ResourceRequirements{}
				jobSpecific.ResourceRequirements.CPULimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPULimit)
				jobSpecific.ResourceRequirements.CPURequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPURequest)
				jobSpecific.ResourceRequirements.EphemeralStorageLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageLimit)
				jobSpecific.ResourceRequirements.EphemeralStorageRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageRequest)
				jobSpecific.ResourceRequirements.MemoryLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryLimit)
				jobSpecific.ResourceRequirements.MemoryRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryRequest)

				r.ResourceAllocation.JobSpecific = append(r.ResourceAllocation.JobSpecific, jobSpecific)
			}
		}
		r.WorkspaceID = types.StringValue(resp.WorkspaceID)
	}

	return diags
}

func (r *DestinationCustomerIoResourceModel) ToOperationsDeleteDestinationCustomerIoRequest(ctx context.Context) (*operations.DeleteDestinationCustomerIoRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var destinationID string
	destinationID = r.DestinationID.ValueString()

	out := operations.DeleteDestinationCustomerIoRequest{
		DestinationID: destinationID,
	}

	return &out, diags
}

func (r *DestinationCustomerIoResourceModel) ToOperationsGetDestinationCustomerIoRequest(ctx context.Context) (*operations.GetDestinationCustomerIoRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var destinationID string
	destinationID = r.DestinationID.ValueString()

	out := operations.GetDestinationCustomerIoRequest{
		DestinationID: destinationID,
	}

	return &out, diags
}

func (r *DestinationCustomerIoResourceModel) ToOperationsPutDestinationCustomerIoRequest(ctx context.Context) (*operations.PutDestinationCustomerIoRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var destinationID string
	destinationID = r.DestinationID.ValueString()

	destinationCustomerIoPutRequest, destinationCustomerIoPutRequestDiags := r.ToSharedDestinationCustomerIoPutRequest(ctx)
	diags.Append(destinationCustomerIoPutRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.PutDestinationCustomerIoRequest{
		DestinationID:                   destinationID,
		DestinationCustomerIoPutRequest: *destinationCustomerIoPutRequest,
	}

	return &out, diags
}

func (r *DestinationCustomerIoResourceModel) ToSharedDestinationCustomerIoCreateRequest(ctx context.Context) (*shared.DestinationCustomerIoCreateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	definitionID := new(string)
	if !r.DefinitionID.IsUnknown() && !r.DefinitionID.IsNull() {
		*definitionID = r.DefinitionID.ValueString()
	} else {
		definitionID = nil
	}
	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	var apiKey string
	apiKey = r.Configuration.Credentials.APIKey.ValueString()

	var siteID string
	siteID = r.Configuration.Credentials.SiteID.ValueString()

	var additionalProperties map[string]any
	if !r.Configuration.Credentials.AdditionalProperties.IsUnknown() && !r.Configuration.Credentials.AdditionalProperties.IsNull() {
		_ = json.Unmarshal([]byte(r.Configuration.Credentials.AdditionalProperties.ValueString()), &additionalProperties)
	}
	credentials := shared.DestinationCustomerIoCredentials{
		APIKey:               apiKey,
		SiteID:               siteID,
		AdditionalProperties: additionalProperties,
	}
	var objectStorageConfig *shared.ObjectStorageSpec
	if r.Configuration.ObjectStorageConfig != nil {
		var destinationCustomerIoNone *shared.DestinationCustomerIoNone
		if r.Configuration.ObjectStorageConfig.None != nil {
			storageType := new(shared.StorageType)
			if !r.Configuration.ObjectStorageConfig.None.StorageType.IsUnknown() && !r.Configuration.ObjectStorageConfig.None.StorageType.IsNull() {
				*storageType = shared.StorageType(r.Configuration.ObjectStorageConfig.None.StorageType.ValueString())
			} else {
				storageType = nil
			}
			var additionalProperties1 map[string]any
			if !r.Configuration.ObjectStorageConfig.None.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.None.AdditionalProperties.IsNull() {
				_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.None.AdditionalProperties.ValueString()), &additionalProperties1)
			}
			destinationCustomerIoNone = &shared.DestinationCustomerIoNone{
				StorageType:          storageType,
				AdditionalProperties: additionalProperties1,
			}
		}
		if destinationCustomerIoNone != nil {
			objectStorageConfig = &shared.ObjectStorageSpec{
				DestinationCustomerIoNone: destinationCustomerIoNone,
			}
		}
		var s3 *shared.S3
		if r.Configuration.ObjectStorageConfig.S3 != nil {
			accessKeyID := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.AccessKeyID.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.AccessKeyID.IsNull() {
				*accessKeyID = r.Configuration.ObjectStorageConfig.S3.AccessKeyID.ValueString()
			} else {
				accessKeyID = nil
			}
			var bucketPath string
			bucketPath = r.Configuration.ObjectStorageConfig.S3.BucketPath.ValueString()

			var compression *shared.Compression
			if r.Configuration.ObjectStorageConfig.S3.Compression != nil {
				var noCompression *shared.NoCompression
				if r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression != nil {
					compressionType := new(shared.DestinationCustomerIoSchemasCompressionType)
					if !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.IsNull() {
						*compressionType = shared.DestinationCustomerIoSchemasCompressionType(r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.ValueString())
					} else {
						compressionType = nil
					}
					var additionalProperties2 map[string]any
					if !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.IsNull() {
						_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.ValueString()), &additionalProperties2)
					}
					noCompression = &shared.NoCompression{
						CompressionType:      compressionType,
						AdditionalProperties: additionalProperties2,
					}
				}
				if noCompression != nil {
					compression = &shared.Compression{
						NoCompression: noCompression,
					}
				}
				var gzip *shared.Gzip
				if r.Configuration.ObjectStorageConfig.S3.Compression.Gzip != nil {
					compressionType1 := new(shared.DestinationCustomerIoCompressionType)
					if !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.IsNull() {
						*compressionType1 = shared.DestinationCustomerIoCompressionType(r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.ValueString())
					} else {
						compressionType1 = nil
					}
					var additionalProperties3 map[string]any
					if !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.IsNull() {
						_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.ValueString()), &additionalProperties3)
					}
					gzip = &shared.Gzip{
						CompressionType:      compressionType1,
						AdditionalProperties: additionalProperties3,
					}
				}
				if gzip != nil {
					compression = &shared.Compression{
						Gzip: gzip,
					}
				}
			}
			fileNameFormat := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.FileNameFormat.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.FileNameFormat.IsNull() {
				*fileNameFormat = r.Configuration.ObjectStorageConfig.S3.FileNameFormat.ValueString()
			} else {
				fileNameFormat = nil
			}
			var format shared.DestinationCustomerIoOutputFormat
			var destinationCustomerIoCSVCommaSeparatedValues *shared.DestinationCustomerIoCSVCommaSeparatedValues
			if r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues != nil {
				flattening := new(shared.DestinationCustomerIoFlattening)
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.IsNull() {
					*flattening = shared.DestinationCustomerIoFlattening(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.ValueString())
				} else {
					flattening = nil
				}
				formatType := new(shared.DestinationCustomerIoFormatType)
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.IsNull() {
					*formatType = shared.DestinationCustomerIoFormatType(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.ValueString())
				} else {
					formatType = nil
				}
				var additionalProperties4 map[string]any
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.IsNull() {
					_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.ValueString()), &additionalProperties4)
				}
				destinationCustomerIoCSVCommaSeparatedValues = &shared.DestinationCustomerIoCSVCommaSeparatedValues{
					Flattening:           flattening,
					FormatType:           formatType,
					AdditionalProperties: additionalProperties4,
				}
			}
			if destinationCustomerIoCSVCommaSeparatedValues != nil {
				format = shared.DestinationCustomerIoOutputFormat{
					DestinationCustomerIoCSVCommaSeparatedValues: destinationCustomerIoCSVCommaSeparatedValues,
				}
			}
			var destinationCustomerIoJSONLinesNewlineDelimitedJSON *shared.DestinationCustomerIoJSONLinesNewlineDelimitedJSON
			if r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON != nil {
				flattening1 := new(shared.DestinationCustomerIoSchemasFlattening)
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.IsNull() {
					*flattening1 = shared.DestinationCustomerIoSchemasFlattening(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.ValueString())
				} else {
					flattening1 = nil
				}
				formatType1 := new(shared.DestinationCustomerIoSchemasFormatType)
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.IsNull() {
					*formatType1 = shared.DestinationCustomerIoSchemasFormatType(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.ValueString())
				} else {
					formatType1 = nil
				}
				var additionalProperties5 map[string]any
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.IsNull() {
					_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.ValueString()), &additionalProperties5)
				}
				destinationCustomerIoJSONLinesNewlineDelimitedJSON = &shared.DestinationCustomerIoJSONLinesNewlineDelimitedJSON{
					Flattening:           flattening1,
					FormatType:           formatType1,
					AdditionalProperties: additionalProperties5,
				}
			}
			if destinationCustomerIoJSONLinesNewlineDelimitedJSON != nil {
				format = shared.DestinationCustomerIoOutputFormat{
					DestinationCustomerIoJSONLinesNewlineDelimitedJSON: destinationCustomerIoJSONLinesNewlineDelimitedJSON,
				}
			}
			pathFormat := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.PathFormat.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.PathFormat.IsNull() {
				*pathFormat = r.Configuration.ObjectStorageConfig.S3.PathFormat.ValueString()
			} else {
				pathFormat = nil
			}
			roleArn := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.RoleArn.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.RoleArn.IsNull() {
				*roleArn = r.Configuration.ObjectStorageConfig.S3.RoleArn.ValueString()
			} else {
				roleArn = nil
			}
			var s3BucketName string
			s3BucketName = r.Configuration.ObjectStorageConfig.S3.S3BucketName.ValueString()

			s3BucketRegion := new(shared.DestinationCustomerIoS3BucketRegion)
			if !r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.IsNull() {
				*s3BucketRegion = shared.DestinationCustomerIoS3BucketRegion(r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.ValueString())
			} else {
				s3BucketRegion = nil
			}
			s3Endpoint := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.S3Endpoint.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3Endpoint.IsNull() {
				*s3Endpoint = r.Configuration.ObjectStorageConfig.S3.S3Endpoint.ValueString()
			} else {
				s3Endpoint = nil
			}
			secretAccessKey := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.IsNull() {
				*secretAccessKey = r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.ValueString()
			} else {
				secretAccessKey = nil
			}
			storageType1 := new(shared.DestinationCustomerIoStorageType)
			if !r.Configuration.ObjectStorageConfig.S3.StorageType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.StorageType.IsNull() {
				*storageType1 = shared.DestinationCustomerIoStorageType(r.Configuration.ObjectStorageConfig.S3.StorageType.ValueString())
			} else {
				storageType1 = nil
			}
			var additionalProperties6 map[string]any
			if !r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.IsNull() {
				_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.ValueString()), &additionalProperties6)
			}
			s3 = &shared.S3{
				AccessKeyID:          accessKeyID,
				BucketPath:           bucketPath,
				Compression:          compression,
				FileNameFormat:       fileNameFormat,
				Format:               format,
				PathFormat:           pathFormat,
				RoleArn:              roleArn,
				S3BucketName:         s3BucketName,
				S3BucketRegion:       s3BucketRegion,
				S3Endpoint:           s3Endpoint,
				SecretAccessKey:      secretAccessKey,
				StorageType:          storageType1,
				AdditionalProperties: additionalProperties6,
			}
		}
		if s3 != nil {
			objectStorageConfig = &shared.ObjectStorageSpec{
				S3: s3,
			}
		}
	}
	var additionalProperties7 map[string]any
	if !r.Configuration.AdditionalProperties.IsUnknown() && !r.Configuration.AdditionalProperties.IsNull() {
		_ = json.Unmarshal([]byte(r.Configuration.AdditionalProperties.ValueString()), &additionalProperties7)
	}
	configuration := shared.DestinationCustomerIo{
		Credentials:          credentials,
		ObjectStorageConfig:  objectStorageConfig,
		AdditionalProperties: additionalProperties7,
	}
	out := shared.DestinationCustomerIoCreateRequest{
		Name:          name,
		DefinitionID:  definitionID,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
	}

	return &out, diags
}

func (r *DestinationCustomerIoResourceModel) ToSharedDestinationCustomerIoPutRequest(ctx context.Context) (*shared.DestinationCustomerIoPutRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	var credentials *shared.DestinationCustomerIoUpdateCredentials
	apiKey := new(string)
	if !r.Configuration.Credentials.APIKey.IsUnknown() && !r.Configuration.Credentials.APIKey.IsNull() {
		*apiKey = r.Configuration.Credentials.APIKey.ValueString()
	} else {
		apiKey = nil
	}
	siteID := new(string)
	if !r.Configuration.Credentials.SiteID.IsUnknown() && !r.Configuration.Credentials.SiteID.IsNull() {
		*siteID = r.Configuration.Credentials.SiteID.ValueString()
	} else {
		siteID = nil
	}
	var additionalProperties map[string]any
	if !r.Configuration.Credentials.AdditionalProperties.IsUnknown() && !r.Configuration.Credentials.AdditionalProperties.IsNull() {
		_ = json.Unmarshal([]byte(r.Configuration.Credentials.AdditionalProperties.ValueString()), &additionalProperties)
	}
	credentials = &shared.DestinationCustomerIoUpdateCredentials{
		APIKey:               apiKey,
		SiteID:               siteID,
		AdditionalProperties: additionalProperties,
	}
	var objectStorageConfig *shared.DestinationCustomerIoUpdateObjectStorageSpec
	if r.Configuration.ObjectStorageConfig != nil {
		var destinationCustomerIoUpdateNone *shared.DestinationCustomerIoUpdateNone
		if r.Configuration.ObjectStorageConfig.None != nil {
			storageType := new(shared.DestinationCustomerIoUpdateStorageType)
			if !r.Configuration.ObjectStorageConfig.None.StorageType.IsUnknown() && !r.Configuration.ObjectStorageConfig.None.StorageType.IsNull() {
				*storageType = shared.DestinationCustomerIoUpdateStorageType(r.Configuration.ObjectStorageConfig.None.StorageType.ValueString())
			} else {
				storageType = nil
			}
			var additionalProperties1 map[string]any
			if !r.Configuration.ObjectStorageConfig.None.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.None.AdditionalProperties.IsNull() {
				_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.None.AdditionalProperties.ValueString()), &additionalProperties1)
			}
			destinationCustomerIoUpdateNone = &shared.DestinationCustomerIoUpdateNone{
				StorageType:          storageType,
				AdditionalProperties: additionalProperties1,
			}
		}
		if destinationCustomerIoUpdateNone != nil {
			objectStorageConfig = &shared.DestinationCustomerIoUpdateObjectStorageSpec{
				DestinationCustomerIoUpdateNone: destinationCustomerIoUpdateNone,
			}
		}
		var destinationCustomerIoUpdateS3 *shared.DestinationCustomerIoUpdateS3
		if r.Configuration.ObjectStorageConfig.S3 != nil {
			accessKeyID := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.AccessKeyID.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.AccessKeyID.IsNull() {
				*accessKeyID = r.Configuration.ObjectStorageConfig.S3.AccessKeyID.ValueString()
			} else {
				accessKeyID = nil
			}
			bucketPath := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.BucketPath.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.BucketPath.IsNull() {
				*bucketPath = r.Configuration.ObjectStorageConfig.S3.BucketPath.ValueString()
			} else {
				bucketPath = nil
			}
			var compression *shared.DestinationCustomerIoUpdateCompression
			if r.Configuration.ObjectStorageConfig.S3.Compression != nil {
				var destinationCustomerIoUpdateNoCompression *shared.DestinationCustomerIoUpdateNoCompression
				if r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression != nil {
					compressionType := new(shared.DestinationCustomerIoUpdateCompressionType)
					if !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.IsNull() {
						*compressionType = shared.DestinationCustomerIoUpdateCompressionType(r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.ValueString())
					} else {
						compressionType = nil
					}
					var additionalProperties2 map[string]any
					if !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.IsNull() {
						_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.ValueString()), &additionalProperties2)
					}
					destinationCustomerIoUpdateNoCompression = &shared.DestinationCustomerIoUpdateNoCompression{
						CompressionType:      compressionType,
						AdditionalProperties: additionalProperties2,
					}
				}
				if destinationCustomerIoUpdateNoCompression != nil {
					compression = &shared.DestinationCustomerIoUpdateCompression{
						DestinationCustomerIoUpdateNoCompression: destinationCustomerIoUpdateNoCompression,
					}
				}
				var destinationCustomerIoUpdateGZIP *shared.DestinationCustomerIoUpdateGZIP
				if r.Configuration.ObjectStorageConfig.S3.Compression.Gzip != nil {
					compressionType1 := new(shared.DestinationCustomerIoUpdateSchemasCompressionType)
					if !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.IsNull() {
						*compressionType1 = shared.DestinationCustomerIoUpdateSchemasCompressionType(r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.ValueString())
					} else {
						compressionType1 = nil
					}
					var additionalProperties3 map[string]any
					if !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.IsNull() {
						_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.ValueString()), &additionalProperties3)
					}
					destinationCustomerIoUpdateGZIP = &shared.DestinationCustomerIoUpdateGZIP{
						CompressionType:      compressionType1,
						AdditionalProperties: additionalProperties3,
					}
				}
				if destinationCustomerIoUpdateGZIP != nil {
					compression = &shared.DestinationCustomerIoUpdateCompression{
						DestinationCustomerIoUpdateGZIP: destinationCustomerIoUpdateGZIP,
					}
				}
			}
			fileNameFormat := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.FileNameFormat.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.FileNameFormat.IsNull() {
				*fileNameFormat = r.Configuration.ObjectStorageConfig.S3.FileNameFormat.ValueString()
			} else {
				fileNameFormat = nil
			}
			var format *shared.DestinationCustomerIoUpdateOutputFormat
			var destinationCustomerIoUpdateCSVCommaSeparatedValues *shared.DestinationCustomerIoUpdateCSVCommaSeparatedValues
			if r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues != nil {
				flattening := new(shared.DestinationCustomerIoUpdateFlattening)
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.IsNull() {
					*flattening = shared.DestinationCustomerIoUpdateFlattening(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.ValueString())
				} else {
					flattening = nil
				}
				formatType := new(shared.DestinationCustomerIoUpdateFormatType)
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.IsNull() {
					*formatType = shared.DestinationCustomerIoUpdateFormatType(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.ValueString())
				} else {
					formatType = nil
				}
				var additionalProperties4 map[string]any
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.IsNull() {
					_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.ValueString()), &additionalProperties4)
				}
				destinationCustomerIoUpdateCSVCommaSeparatedValues = &shared.DestinationCustomerIoUpdateCSVCommaSeparatedValues{
					Flattening:           flattening,
					FormatType:           formatType,
					AdditionalProperties: additionalProperties4,
				}
			}
			if destinationCustomerIoUpdateCSVCommaSeparatedValues != nil {
				format = &shared.DestinationCustomerIoUpdateOutputFormat{
					DestinationCustomerIoUpdateCSVCommaSeparatedValues: destinationCustomerIoUpdateCSVCommaSeparatedValues,
				}
			}
			var destinationCustomerIoUpdateJSONLinesNewlineDelimitedJSON *shared.DestinationCustomerIoUpdateJSONLinesNewlineDelimitedJSON
			if r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON != nil {
				flattening1 := new(shared.DestinationCustomerIoUpdateSchemasFlattening)
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.IsNull() {
					*flattening1 = shared.DestinationCustomerIoUpdateSchemasFlattening(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.ValueString())
				} else {
					flattening1 = nil
				}
				formatType1 := new(shared.DestinationCustomerIoUpdateSchemasFormatType)
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.IsNull() {
					*formatType1 = shared.DestinationCustomerIoUpdateSchemasFormatType(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.ValueString())
				} else {
					formatType1 = nil
				}
				var additionalProperties5 map[string]any
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.IsNull() {
					_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.ValueString()), &additionalProperties5)
				}
				destinationCustomerIoUpdateJSONLinesNewlineDelimitedJSON = &shared.DestinationCustomerIoUpdateJSONLinesNewlineDelimitedJSON{
					Flattening:           flattening1,
					FormatType:           formatType1,
					AdditionalProperties: additionalProperties5,
				}
			}
			if destinationCustomerIoUpdateJSONLinesNewlineDelimitedJSON != nil {
				format = &shared.DestinationCustomerIoUpdateOutputFormat{
					DestinationCustomerIoUpdateJSONLinesNewlineDelimitedJSON: destinationCustomerIoUpdateJSONLinesNewlineDelimitedJSON,
				}
			}
			pathFormat := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.PathFormat.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.PathFormat.IsNull() {
				*pathFormat = r.Configuration.ObjectStorageConfig.S3.PathFormat.ValueString()
			} else {
				pathFormat = nil
			}
			roleArn := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.RoleArn.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.RoleArn.IsNull() {
				*roleArn = r.Configuration.ObjectStorageConfig.S3.RoleArn.ValueString()
			} else {
				roleArn = nil
			}
			s3BucketName := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.S3BucketName.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3BucketName.IsNull() {
				*s3BucketName = r.Configuration.ObjectStorageConfig.S3.S3BucketName.ValueString()
			} else {
				s3BucketName = nil
			}
			s3BucketRegion := new(shared.DestinationCustomerIoUpdateS3BucketRegion)
			if !r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.IsNull() {
				*s3BucketRegion = shared.DestinationCustomerIoUpdateS3BucketRegion(r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.ValueString())
			} else {
				s3BucketRegion = nil
			}
			s3Endpoint := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.S3Endpoint.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3Endpoint.IsNull() {
				*s3Endpoint = r.Configuration.ObjectStorageConfig.S3.S3Endpoint.ValueString()
			} else {
				s3Endpoint = nil
			}
			secretAccessKey := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.IsNull() {
				*secretAccessKey = r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.ValueString()
			} else {
				secretAccessKey = nil
			}
			storageType1 := new(shared.DestinationCustomerIoUpdateSchemasStorageType)
			if !r.Configuration.ObjectStorageConfig.S3.StorageType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.StorageType.IsNull() {
				*storageType1 = shared.DestinationCustomerIoUpdateSchemasStorageType(r.Configuration.ObjectStorageConfig.S3.StorageType.ValueString())
			} else {
				storageType1 = nil
			}
			var additionalProperties6 map[string]any
			if !r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.IsNull() {
				_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.ValueString()), &additionalProperties6)
			}
			destinationCustomerIoUpdateS3 = &shared.DestinationCustomerIoUpdateS3{
				AccessKeyID:          accessKeyID,
				BucketPath:           bucketPath,
				Compression:          compression,
				FileNameFormat:       fileNameFormat,
				Format:               format,
				PathFormat:           pathFormat,
				RoleArn:              roleArn,
				S3BucketName:         s3BucketName,
				S3BucketRegion:       s3BucketRegion,
				S3Endpoint:           s3Endpoint,
				SecretAccessKey:      secretAccessKey,
				StorageType:          storageType1,
				AdditionalProperties: additionalProperties6,
			}
		}
		if destinationCustomerIoUpdateS3 != nil {
			objectStorageConfig = &shared.DestinationCustomerIoUpdateObjectStorageSpec{
				DestinationCustomerIoUpdateS3: destinationCustomerIoUpdateS3,
			}
		}
	}
	var additionalProperties7 map[string]any
	if !r.Configuration.AdditionalProperties.IsUnknown() && !r.Configuration.AdditionalProperties.IsNull() {
		_ = json.Unmarshal([]byte(r.Configuration.AdditionalProperties.ValueString()), &additionalProperties7)
	}
	configuration := shared.DestinationCustomerIoUpdate{
		Credentials:          credentials,
		ObjectStorageConfig:  objectStorageConfig,
		AdditionalProperties: additionalProperties7,
	}
	out := shared.DestinationCustomerIoPutRequest{
		Name:          name,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
	}

	return &out, diags
}
