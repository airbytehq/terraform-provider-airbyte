// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"encoding/json"
	tfTypes "github.com/airbytehq/terraform-provider-airbyte/internal/provider/types"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/operations"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

func (r *DestinationSalesforceResourceModel) RefreshFromSharedDestinationResponse(ctx context.Context, resp *shared.DestinationResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		configurationPriorData := r.Configuration
		r.Configuration = &tfTypes.DestinationSalesforce{}
		r.Configuration.AdditionalProperties = configurationPriorData.AdditionalProperties
		r.Configuration.ClientID = configurationPriorData.ClientID
		r.Configuration.ClientSecret = configurationPriorData.ClientSecret
		r.Configuration.IsSandbox = configurationPriorData.IsSandbox
		r.Configuration.ObjectStorageConfig = configurationPriorData.ObjectStorageConfig
		r.Configuration.RefreshToken = configurationPriorData.RefreshToken
		r.CreatedAt = types.Int64Value(resp.CreatedAt)
		r.DefinitionID = types.StringValue(resp.DefinitionID)
		r.DestinationID = types.StringValue(resp.DestinationID)
		r.DestinationType = types.StringValue(resp.DestinationType)
		r.Name = types.StringValue(resp.Name)
		if resp.ResourceAllocation == nil {
			r.ResourceAllocation = nil
		} else {
			r.ResourceAllocation = &tfTypes.ScopedResourceRequirements{}
			if resp.ResourceAllocation.Default == nil {
				r.ResourceAllocation.Default = nil
			} else {
				r.ResourceAllocation.Default = &tfTypes.ResourceRequirements{}
				r.ResourceAllocation.Default.CPULimit = types.StringPointerValue(resp.ResourceAllocation.Default.CPULimit)
				r.ResourceAllocation.Default.CPURequest = types.StringPointerValue(resp.ResourceAllocation.Default.CPURequest)
				r.ResourceAllocation.Default.EphemeralStorageLimit = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageLimit)
				r.ResourceAllocation.Default.EphemeralStorageRequest = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageRequest)
				r.ResourceAllocation.Default.MemoryLimit = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryLimit)
				r.ResourceAllocation.Default.MemoryRequest = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryRequest)
			}
			r.ResourceAllocation.JobSpecific = []tfTypes.JobTypeResourceLimit{}

			for _, jobSpecificItem := range resp.ResourceAllocation.JobSpecific {
				var jobSpecific tfTypes.JobTypeResourceLimit

				jobSpecific.JobType = types.StringValue(string(jobSpecificItem.JobType))
				jobSpecific.ResourceRequirements = &tfTypes.ResourceRequirements{}
				jobSpecific.ResourceRequirements.CPULimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPULimit)
				jobSpecific.ResourceRequirements.CPURequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPURequest)
				jobSpecific.ResourceRequirements.EphemeralStorageLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageLimit)
				jobSpecific.ResourceRequirements.EphemeralStorageRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageRequest)
				jobSpecific.ResourceRequirements.MemoryLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryLimit)
				jobSpecific.ResourceRequirements.MemoryRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryRequest)

				r.ResourceAllocation.JobSpecific = append(r.ResourceAllocation.JobSpecific, jobSpecific)
			}
		}
		r.WorkspaceID = types.StringValue(resp.WorkspaceID)
	}

	return diags
}

func (r *DestinationSalesforceResourceModel) ToOperationsDeleteDestinationSalesforceRequest(ctx context.Context) (*operations.DeleteDestinationSalesforceRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var destinationID string
	destinationID = r.DestinationID.ValueString()

	out := operations.DeleteDestinationSalesforceRequest{
		DestinationID: destinationID,
	}

	return &out, diags
}

func (r *DestinationSalesforceResourceModel) ToOperationsGetDestinationSalesforceRequest(ctx context.Context) (*operations.GetDestinationSalesforceRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var destinationID string
	destinationID = r.DestinationID.ValueString()

	out := operations.GetDestinationSalesforceRequest{
		DestinationID: destinationID,
	}

	return &out, diags
}

func (r *DestinationSalesforceResourceModel) ToOperationsPutDestinationSalesforceRequest(ctx context.Context) (*operations.PutDestinationSalesforceRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var destinationID string
	destinationID = r.DestinationID.ValueString()

	destinationSalesforcePutRequest, destinationSalesforcePutRequestDiags := r.ToSharedDestinationSalesforcePutRequest(ctx)
	diags.Append(destinationSalesforcePutRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.PutDestinationSalesforceRequest{
		DestinationID:                   destinationID,
		DestinationSalesforcePutRequest: *destinationSalesforcePutRequest,
	}

	return &out, diags
}

func (r *DestinationSalesforceResourceModel) ToSharedDestinationSalesforceCreateRequest(ctx context.Context) (*shared.DestinationSalesforceCreateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	definitionID := new(string)
	if !r.DefinitionID.IsUnknown() && !r.DefinitionID.IsNull() {
		*definitionID = r.DefinitionID.ValueString()
	} else {
		definitionID = nil
	}
	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	var clientID string
	clientID = r.Configuration.ClientID.ValueString()

	var clientSecret string
	clientSecret = r.Configuration.ClientSecret.ValueString()

	isSandbox := new(bool)
	if !r.Configuration.IsSandbox.IsUnknown() && !r.Configuration.IsSandbox.IsNull() {
		*isSandbox = r.Configuration.IsSandbox.ValueBool()
	} else {
		isSandbox = nil
	}
	var objectStorageConfig *shared.DestinationSalesforceObjectStorageSpec
	if r.Configuration.ObjectStorageConfig != nil {
		var destinationSalesforceNone *shared.DestinationSalesforceNone
		if r.Configuration.ObjectStorageConfig.None != nil {
			storageType := new(shared.DestinationSalesforceStorageType)
			if !r.Configuration.ObjectStorageConfig.None.StorageType.IsUnknown() && !r.Configuration.ObjectStorageConfig.None.StorageType.IsNull() {
				*storageType = shared.DestinationSalesforceStorageType(r.Configuration.ObjectStorageConfig.None.StorageType.ValueString())
			} else {
				storageType = nil
			}
			var additionalProperties map[string]any
			if !r.Configuration.ObjectStorageConfig.None.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.None.AdditionalProperties.IsNull() {
				_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.None.AdditionalProperties.ValueString()), &additionalProperties)
			}
			destinationSalesforceNone = &shared.DestinationSalesforceNone{
				StorageType:          storageType,
				AdditionalProperties: additionalProperties,
			}
		}
		if destinationSalesforceNone != nil {
			objectStorageConfig = &shared.DestinationSalesforceObjectStorageSpec{
				DestinationSalesforceNone: destinationSalesforceNone,
			}
		}
		var destinationSalesforceS3 *shared.DestinationSalesforceS3
		if r.Configuration.ObjectStorageConfig.S3 != nil {
			accessKeyID := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.AccessKeyID.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.AccessKeyID.IsNull() {
				*accessKeyID = r.Configuration.ObjectStorageConfig.S3.AccessKeyID.ValueString()
			} else {
				accessKeyID = nil
			}
			var bucketPath string
			bucketPath = r.Configuration.ObjectStorageConfig.S3.BucketPath.ValueString()

			var compression *shared.DestinationSalesforceCompression
			if r.Configuration.ObjectStorageConfig.S3.Compression != nil {
				var destinationSalesforceNoCompression *shared.DestinationSalesforceNoCompression
				if r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression != nil {
					compressionType := new(shared.DestinationSalesforceCompressionType)
					if !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.IsNull() {
						*compressionType = shared.DestinationSalesforceCompressionType(r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.ValueString())
					} else {
						compressionType = nil
					}
					var additionalProperties1 map[string]any
					if !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.IsNull() {
						_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.ValueString()), &additionalProperties1)
					}
					destinationSalesforceNoCompression = &shared.DestinationSalesforceNoCompression{
						CompressionType:      compressionType,
						AdditionalProperties: additionalProperties1,
					}
				}
				if destinationSalesforceNoCompression != nil {
					compression = &shared.DestinationSalesforceCompression{
						DestinationSalesforceNoCompression: destinationSalesforceNoCompression,
					}
				}
				var destinationSalesforceGZIP *shared.DestinationSalesforceGZIP
				if r.Configuration.ObjectStorageConfig.S3.Compression.Gzip != nil {
					compressionType1 := new(shared.DestinationSalesforceSchemasCompressionType)
					if !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.IsNull() {
						*compressionType1 = shared.DestinationSalesforceSchemasCompressionType(r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.ValueString())
					} else {
						compressionType1 = nil
					}
					var additionalProperties2 map[string]any
					if !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.IsNull() {
						_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.ValueString()), &additionalProperties2)
					}
					destinationSalesforceGZIP = &shared.DestinationSalesforceGZIP{
						CompressionType:      compressionType1,
						AdditionalProperties: additionalProperties2,
					}
				}
				if destinationSalesforceGZIP != nil {
					compression = &shared.DestinationSalesforceCompression{
						DestinationSalesforceGZIP: destinationSalesforceGZIP,
					}
				}
			}
			fileNameFormat := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.FileNameFormat.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.FileNameFormat.IsNull() {
				*fileNameFormat = r.Configuration.ObjectStorageConfig.S3.FileNameFormat.ValueString()
			} else {
				fileNameFormat = nil
			}
			var format shared.DestinationSalesforceOutputFormat
			var destinationSalesforceCSVCommaSeparatedValues *shared.DestinationSalesforceCSVCommaSeparatedValues
			if r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues != nil {
				flattening := new(shared.DestinationSalesforceFlattening)
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.IsNull() {
					*flattening = shared.DestinationSalesforceFlattening(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.ValueString())
				} else {
					flattening = nil
				}
				formatType := new(shared.DestinationSalesforceFormatType)
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.IsNull() {
					*formatType = shared.DestinationSalesforceFormatType(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.ValueString())
				} else {
					formatType = nil
				}
				var additionalProperties3 map[string]any
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.IsNull() {
					_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.ValueString()), &additionalProperties3)
				}
				destinationSalesforceCSVCommaSeparatedValues = &shared.DestinationSalesforceCSVCommaSeparatedValues{
					Flattening:           flattening,
					FormatType:           formatType,
					AdditionalProperties: additionalProperties3,
				}
			}
			if destinationSalesforceCSVCommaSeparatedValues != nil {
				format = shared.DestinationSalesforceOutputFormat{
					DestinationSalesforceCSVCommaSeparatedValues: destinationSalesforceCSVCommaSeparatedValues,
				}
			}
			var destinationSalesforceJSONLinesNewlineDelimitedJSON *shared.DestinationSalesforceJSONLinesNewlineDelimitedJSON
			if r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON != nil {
				flattening1 := new(shared.DestinationSalesforceSchemasFlattening)
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.IsNull() {
					*flattening1 = shared.DestinationSalesforceSchemasFlattening(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.ValueString())
				} else {
					flattening1 = nil
				}
				formatType1 := new(shared.DestinationSalesforceSchemasFormatType)
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.IsNull() {
					*formatType1 = shared.DestinationSalesforceSchemasFormatType(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.ValueString())
				} else {
					formatType1 = nil
				}
				var additionalProperties4 map[string]any
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.IsNull() {
					_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.ValueString()), &additionalProperties4)
				}
				destinationSalesforceJSONLinesNewlineDelimitedJSON = &shared.DestinationSalesforceJSONLinesNewlineDelimitedJSON{
					Flattening:           flattening1,
					FormatType:           formatType1,
					AdditionalProperties: additionalProperties4,
				}
			}
			if destinationSalesforceJSONLinesNewlineDelimitedJSON != nil {
				format = shared.DestinationSalesforceOutputFormat{
					DestinationSalesforceJSONLinesNewlineDelimitedJSON: destinationSalesforceJSONLinesNewlineDelimitedJSON,
				}
			}
			pathFormat := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.PathFormat.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.PathFormat.IsNull() {
				*pathFormat = r.Configuration.ObjectStorageConfig.S3.PathFormat.ValueString()
			} else {
				pathFormat = nil
			}
			roleArn := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.RoleArn.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.RoleArn.IsNull() {
				*roleArn = r.Configuration.ObjectStorageConfig.S3.RoleArn.ValueString()
			} else {
				roleArn = nil
			}
			var s3BucketName string
			s3BucketName = r.Configuration.ObjectStorageConfig.S3.S3BucketName.ValueString()

			s3BucketRegion := new(shared.DestinationSalesforceS3BucketRegion)
			if !r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.IsNull() {
				*s3BucketRegion = shared.DestinationSalesforceS3BucketRegion(r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.ValueString())
			} else {
				s3BucketRegion = nil
			}
			s3Endpoint := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.S3Endpoint.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3Endpoint.IsNull() {
				*s3Endpoint = r.Configuration.ObjectStorageConfig.S3.S3Endpoint.ValueString()
			} else {
				s3Endpoint = nil
			}
			secretAccessKey := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.IsNull() {
				*secretAccessKey = r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.ValueString()
			} else {
				secretAccessKey = nil
			}
			storageType1 := new(shared.DestinationSalesforceSchemasStorageType)
			if !r.Configuration.ObjectStorageConfig.S3.StorageType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.StorageType.IsNull() {
				*storageType1 = shared.DestinationSalesforceSchemasStorageType(r.Configuration.ObjectStorageConfig.S3.StorageType.ValueString())
			} else {
				storageType1 = nil
			}
			var additionalProperties5 map[string]any
			if !r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.IsNull() {
				_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.ValueString()), &additionalProperties5)
			}
			destinationSalesforceS3 = &shared.DestinationSalesforceS3{
				AccessKeyID:          accessKeyID,
				BucketPath:           bucketPath,
				Compression:          compression,
				FileNameFormat:       fileNameFormat,
				Format:               format,
				PathFormat:           pathFormat,
				RoleArn:              roleArn,
				S3BucketName:         s3BucketName,
				S3BucketRegion:       s3BucketRegion,
				S3Endpoint:           s3Endpoint,
				SecretAccessKey:      secretAccessKey,
				StorageType:          storageType1,
				AdditionalProperties: additionalProperties5,
			}
		}
		if destinationSalesforceS3 != nil {
			objectStorageConfig = &shared.DestinationSalesforceObjectStorageSpec{
				DestinationSalesforceS3: destinationSalesforceS3,
			}
		}
	}
	var refreshToken string
	refreshToken = r.Configuration.RefreshToken.ValueString()

	var additionalProperties6 map[string]any
	if !r.Configuration.AdditionalProperties.IsUnknown() && !r.Configuration.AdditionalProperties.IsNull() {
		_ = json.Unmarshal([]byte(r.Configuration.AdditionalProperties.ValueString()), &additionalProperties6)
	}
	configuration := shared.DestinationSalesforce{
		ClientID:             clientID,
		ClientSecret:         clientSecret,
		IsSandbox:            isSandbox,
		ObjectStorageConfig:  objectStorageConfig,
		RefreshToken:         refreshToken,
		AdditionalProperties: additionalProperties6,
	}
	out := shared.DestinationSalesforceCreateRequest{
		Name:          name,
		DefinitionID:  definitionID,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
	}

	return &out, diags
}

func (r *DestinationSalesforceResourceModel) ToSharedDestinationSalesforcePutRequest(ctx context.Context) (*shared.DestinationSalesforcePutRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	clientID := new(string)
	if !r.Configuration.ClientID.IsUnknown() && !r.Configuration.ClientID.IsNull() {
		*clientID = r.Configuration.ClientID.ValueString()
	} else {
		clientID = nil
	}
	clientSecret := new(string)
	if !r.Configuration.ClientSecret.IsUnknown() && !r.Configuration.ClientSecret.IsNull() {
		*clientSecret = r.Configuration.ClientSecret.ValueString()
	} else {
		clientSecret = nil
	}
	isSandbox := new(bool)
	if !r.Configuration.IsSandbox.IsUnknown() && !r.Configuration.IsSandbox.IsNull() {
		*isSandbox = r.Configuration.IsSandbox.ValueBool()
	} else {
		isSandbox = nil
	}
	var objectStorageConfig *shared.DestinationSalesforceUpdateObjectStorageSpec
	if r.Configuration.ObjectStorageConfig != nil {
		var destinationSalesforceUpdateNone *shared.DestinationSalesforceUpdateNone
		if r.Configuration.ObjectStorageConfig.None != nil {
			storageType := new(shared.DestinationSalesforceUpdateStorageType)
			if !r.Configuration.ObjectStorageConfig.None.StorageType.IsUnknown() && !r.Configuration.ObjectStorageConfig.None.StorageType.IsNull() {
				*storageType = shared.DestinationSalesforceUpdateStorageType(r.Configuration.ObjectStorageConfig.None.StorageType.ValueString())
			} else {
				storageType = nil
			}
			var additionalProperties map[string]any
			if !r.Configuration.ObjectStorageConfig.None.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.None.AdditionalProperties.IsNull() {
				_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.None.AdditionalProperties.ValueString()), &additionalProperties)
			}
			destinationSalesforceUpdateNone = &shared.DestinationSalesforceUpdateNone{
				StorageType:          storageType,
				AdditionalProperties: additionalProperties,
			}
		}
		if destinationSalesforceUpdateNone != nil {
			objectStorageConfig = &shared.DestinationSalesforceUpdateObjectStorageSpec{
				DestinationSalesforceUpdateNone: destinationSalesforceUpdateNone,
			}
		}
		var destinationSalesforceUpdateS3 *shared.DestinationSalesforceUpdateS3
		if r.Configuration.ObjectStorageConfig.S3 != nil {
			accessKeyID := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.AccessKeyID.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.AccessKeyID.IsNull() {
				*accessKeyID = r.Configuration.ObjectStorageConfig.S3.AccessKeyID.ValueString()
			} else {
				accessKeyID = nil
			}
			bucketPath := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.BucketPath.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.BucketPath.IsNull() {
				*bucketPath = r.Configuration.ObjectStorageConfig.S3.BucketPath.ValueString()
			} else {
				bucketPath = nil
			}
			var compression *shared.DestinationSalesforceUpdateCompression
			if r.Configuration.ObjectStorageConfig.S3.Compression != nil {
				var destinationSalesforceUpdateNoCompression *shared.DestinationSalesforceUpdateNoCompression
				if r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression != nil {
					compressionType := new(shared.DestinationSalesforceUpdateCompressionType)
					if !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.IsNull() {
						*compressionType = shared.DestinationSalesforceUpdateCompressionType(r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.CompressionType.ValueString())
					} else {
						compressionType = nil
					}
					var additionalProperties1 map[string]any
					if !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.IsNull() {
						_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Compression.NoCompression.AdditionalProperties.ValueString()), &additionalProperties1)
					}
					destinationSalesforceUpdateNoCompression = &shared.DestinationSalesforceUpdateNoCompression{
						CompressionType:      compressionType,
						AdditionalProperties: additionalProperties1,
					}
				}
				if destinationSalesforceUpdateNoCompression != nil {
					compression = &shared.DestinationSalesforceUpdateCompression{
						DestinationSalesforceUpdateNoCompression: destinationSalesforceUpdateNoCompression,
					}
				}
				var destinationSalesforceUpdateGZIP *shared.DestinationSalesforceUpdateGZIP
				if r.Configuration.ObjectStorageConfig.S3.Compression.Gzip != nil {
					compressionType1 := new(shared.DestinationSalesforceUpdateSchemasCompressionType)
					if !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.IsNull() {
						*compressionType1 = shared.DestinationSalesforceUpdateSchemasCompressionType(r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.CompressionType.ValueString())
					} else {
						compressionType1 = nil
					}
					var additionalProperties2 map[string]any
					if !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.IsNull() {
						_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Compression.Gzip.AdditionalProperties.ValueString()), &additionalProperties2)
					}
					destinationSalesforceUpdateGZIP = &shared.DestinationSalesforceUpdateGZIP{
						CompressionType:      compressionType1,
						AdditionalProperties: additionalProperties2,
					}
				}
				if destinationSalesforceUpdateGZIP != nil {
					compression = &shared.DestinationSalesforceUpdateCompression{
						DestinationSalesforceUpdateGZIP: destinationSalesforceUpdateGZIP,
					}
				}
			}
			fileNameFormat := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.FileNameFormat.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.FileNameFormat.IsNull() {
				*fileNameFormat = r.Configuration.ObjectStorageConfig.S3.FileNameFormat.ValueString()
			} else {
				fileNameFormat = nil
			}
			var format *shared.DestinationSalesforceUpdateOutputFormat
			var destinationSalesforceUpdateCSVCommaSeparatedValues *shared.DestinationSalesforceUpdateCSVCommaSeparatedValues
			if r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues != nil {
				flattening := new(shared.DestinationSalesforceUpdateFlattening)
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.IsNull() {
					*flattening = shared.DestinationSalesforceUpdateFlattening(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.Flattening.ValueString())
				} else {
					flattening = nil
				}
				formatType := new(shared.DestinationSalesforceUpdateFormatType)
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.IsNull() {
					*formatType = shared.DestinationSalesforceUpdateFormatType(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.FormatType.ValueString())
				} else {
					formatType = nil
				}
				var additionalProperties3 map[string]any
				if !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.IsNull() {
					_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Format.CSVCommaSeparatedValues.AdditionalProperties.ValueString()), &additionalProperties3)
				}
				destinationSalesforceUpdateCSVCommaSeparatedValues = &shared.DestinationSalesforceUpdateCSVCommaSeparatedValues{
					Flattening:           flattening,
					FormatType:           formatType,
					AdditionalProperties: additionalProperties3,
				}
			}
			if destinationSalesforceUpdateCSVCommaSeparatedValues != nil {
				format = &shared.DestinationSalesforceUpdateOutputFormat{
					DestinationSalesforceUpdateCSVCommaSeparatedValues: destinationSalesforceUpdateCSVCommaSeparatedValues,
				}
			}
			var destinationSalesforceUpdateJSONLinesNewlineDelimitedJSON *shared.DestinationSalesforceUpdateJSONLinesNewlineDelimitedJSON
			if r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON != nil {
				flattening1 := new(shared.DestinationSalesforceUpdateSchemasFlattening)
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.IsNull() {
					*flattening1 = shared.DestinationSalesforceUpdateSchemasFlattening(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.Flattening.ValueString())
				} else {
					flattening1 = nil
				}
				formatType1 := new(shared.DestinationSalesforceUpdateSchemasFormatType)
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.IsNull() {
					*formatType1 = shared.DestinationSalesforceUpdateSchemasFormatType(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.FormatType.ValueString())
				} else {
					formatType1 = nil
				}
				var additionalProperties4 map[string]any
				if !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.IsNull() {
					_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.Format.JSONLinesNewlineDelimitedJSON.AdditionalProperties.ValueString()), &additionalProperties4)
				}
				destinationSalesforceUpdateJSONLinesNewlineDelimitedJSON = &shared.DestinationSalesforceUpdateJSONLinesNewlineDelimitedJSON{
					Flattening:           flattening1,
					FormatType:           formatType1,
					AdditionalProperties: additionalProperties4,
				}
			}
			if destinationSalesforceUpdateJSONLinesNewlineDelimitedJSON != nil {
				format = &shared.DestinationSalesforceUpdateOutputFormat{
					DestinationSalesforceUpdateJSONLinesNewlineDelimitedJSON: destinationSalesforceUpdateJSONLinesNewlineDelimitedJSON,
				}
			}
			pathFormat := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.PathFormat.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.PathFormat.IsNull() {
				*pathFormat = r.Configuration.ObjectStorageConfig.S3.PathFormat.ValueString()
			} else {
				pathFormat = nil
			}
			roleArn := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.RoleArn.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.RoleArn.IsNull() {
				*roleArn = r.Configuration.ObjectStorageConfig.S3.RoleArn.ValueString()
			} else {
				roleArn = nil
			}
			s3BucketName := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.S3BucketName.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3BucketName.IsNull() {
				*s3BucketName = r.Configuration.ObjectStorageConfig.S3.S3BucketName.ValueString()
			} else {
				s3BucketName = nil
			}
			s3BucketRegion := new(shared.DestinationSalesforceUpdateS3BucketRegion)
			if !r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.IsNull() {
				*s3BucketRegion = shared.DestinationSalesforceUpdateS3BucketRegion(r.Configuration.ObjectStorageConfig.S3.S3BucketRegion.ValueString())
			} else {
				s3BucketRegion = nil
			}
			s3Endpoint := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.S3Endpoint.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.S3Endpoint.IsNull() {
				*s3Endpoint = r.Configuration.ObjectStorageConfig.S3.S3Endpoint.ValueString()
			} else {
				s3Endpoint = nil
			}
			secretAccessKey := new(string)
			if !r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.IsNull() {
				*secretAccessKey = r.Configuration.ObjectStorageConfig.S3.SecretAccessKey.ValueString()
			} else {
				secretAccessKey = nil
			}
			storageType1 := new(shared.DestinationSalesforceUpdateSchemasStorageType)
			if !r.Configuration.ObjectStorageConfig.S3.StorageType.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.StorageType.IsNull() {
				*storageType1 = shared.DestinationSalesforceUpdateSchemasStorageType(r.Configuration.ObjectStorageConfig.S3.StorageType.ValueString())
			} else {
				storageType1 = nil
			}
			var additionalProperties5 map[string]any
			if !r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.IsUnknown() && !r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.IsNull() {
				_ = json.Unmarshal([]byte(r.Configuration.ObjectStorageConfig.S3.AdditionalProperties.ValueString()), &additionalProperties5)
			}
			destinationSalesforceUpdateS3 = &shared.DestinationSalesforceUpdateS3{
				AccessKeyID:          accessKeyID,
				BucketPath:           bucketPath,
				Compression:          compression,
				FileNameFormat:       fileNameFormat,
				Format:               format,
				PathFormat:           pathFormat,
				RoleArn:              roleArn,
				S3BucketName:         s3BucketName,
				S3BucketRegion:       s3BucketRegion,
				S3Endpoint:           s3Endpoint,
				SecretAccessKey:      secretAccessKey,
				StorageType:          storageType1,
				AdditionalProperties: additionalProperties5,
			}
		}
		if destinationSalesforceUpdateS3 != nil {
			objectStorageConfig = &shared.DestinationSalesforceUpdateObjectStorageSpec{
				DestinationSalesforceUpdateS3: destinationSalesforceUpdateS3,
			}
		}
	}
	refreshToken := new(string)
	if !r.Configuration.RefreshToken.IsUnknown() && !r.Configuration.RefreshToken.IsNull() {
		*refreshToken = r.Configuration.RefreshToken.ValueString()
	} else {
		refreshToken = nil
	}
	var additionalProperties6 map[string]any
	if !r.Configuration.AdditionalProperties.IsUnknown() && !r.Configuration.AdditionalProperties.IsNull() {
		_ = json.Unmarshal([]byte(r.Configuration.AdditionalProperties.ValueString()), &additionalProperties6)
	}
	configuration := shared.DestinationSalesforceUpdate{
		ClientID:             clientID,
		ClientSecret:         clientSecret,
		IsSandbox:            isSandbox,
		ObjectStorageConfig:  objectStorageConfig,
		RefreshToken:         refreshToken,
		AdditionalProperties: additionalProperties6,
	}
	out := shared.DestinationSalesforcePutRequest{
		Name:          name,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
	}

	return &out, diags
}
