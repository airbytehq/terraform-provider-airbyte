// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	tfTypes "github.com/airbytehq/terraform-provider-airbyte/internal/provider/types"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/operations"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"time"
)

func (r *SourceGcsResourceModel) RefreshFromSharedSourceResponse(ctx context.Context, resp *shared.SourceResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		configurationPriorData := r.Configuration
		r.Configuration = &tfTypes.SourceGcs{}
		if configurationPriorData != nil {
			r.Configuration.Bucket = configurationPriorData.Bucket
			r.Configuration.Credentials = configurationPriorData.Credentials
			r.Configuration.DeliveryMethod = configurationPriorData.DeliveryMethod
			r.Configuration.StartDate = configurationPriorData.StartDate
			r.Configuration.Streams = configurationPriorData.Streams
		}
		r.CreatedAt = types.Int64Value(resp.CreatedAt)
		r.DefinitionID = types.StringValue(resp.DefinitionID)
		r.Name = types.StringValue(resp.Name)
		if resp.ResourceAllocation == nil {
			r.ResourceAllocation = nil
		} else {
			r.ResourceAllocation = &tfTypes.ScopedResourceRequirements{}
			if resp.ResourceAllocation.Default == nil {
				r.ResourceAllocation.Default = nil
			} else {
				r.ResourceAllocation.Default = &tfTypes.ResourceRequirements{}
				r.ResourceAllocation.Default.CPULimit = types.StringPointerValue(resp.ResourceAllocation.Default.CPULimit)
				r.ResourceAllocation.Default.CPURequest = types.StringPointerValue(resp.ResourceAllocation.Default.CPURequest)
				r.ResourceAllocation.Default.EphemeralStorageLimit = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageLimit)
				r.ResourceAllocation.Default.EphemeralStorageRequest = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageRequest)
				r.ResourceAllocation.Default.MemoryLimit = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryLimit)
				r.ResourceAllocation.Default.MemoryRequest = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryRequest)
			}
			r.ResourceAllocation.JobSpecific = []tfTypes.JobTypeResourceLimit{}

			for _, jobSpecificItem := range resp.ResourceAllocation.JobSpecific {
				var jobSpecific tfTypes.JobTypeResourceLimit

				jobSpecific.JobType = types.StringValue(string(jobSpecificItem.JobType))
				jobSpecific.ResourceRequirements = &tfTypes.ResourceRequirements{}
				jobSpecific.ResourceRequirements.CPULimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPULimit)
				jobSpecific.ResourceRequirements.CPURequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPURequest)
				jobSpecific.ResourceRequirements.EphemeralStorageLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageLimit)
				jobSpecific.ResourceRequirements.EphemeralStorageRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageRequest)
				jobSpecific.ResourceRequirements.MemoryLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryLimit)
				jobSpecific.ResourceRequirements.MemoryRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryRequest)

				r.ResourceAllocation.JobSpecific = append(r.ResourceAllocation.JobSpecific, jobSpecific)
			}
		}
		r.SourceID = types.StringValue(resp.SourceID)
		r.SourceType = types.StringValue(resp.SourceType)
		r.WorkspaceID = types.StringValue(resp.WorkspaceID)
	}

	return diags
}

func (r *SourceGcsResourceModel) ToOperationsDeleteSourceGcsRequest(ctx context.Context) (*operations.DeleteSourceGcsRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	out := operations.DeleteSourceGcsRequest{
		SourceID: sourceID,
	}

	return &out, diags
}

func (r *SourceGcsResourceModel) ToOperationsGetSourceGcsRequest(ctx context.Context) (*operations.GetSourceGcsRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	out := operations.GetSourceGcsRequest{
		SourceID: sourceID,
	}

	return &out, diags
}

func (r *SourceGcsResourceModel) ToOperationsPutSourceGcsRequest(ctx context.Context) (*operations.PutSourceGcsRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	sourceGcsPutRequest, sourceGcsPutRequestDiags := r.ToSharedSourceGcsPutRequest(ctx)
	diags.Append(sourceGcsPutRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.PutSourceGcsRequest{
		SourceID:            sourceID,
		SourceGcsPutRequest: *sourceGcsPutRequest,
	}

	return &out, diags
}

func (r *SourceGcsResourceModel) ToSharedSourceGcsCreateRequest(ctx context.Context) (*shared.SourceGcsCreateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	definitionID := new(string)
	if !r.DefinitionID.IsUnknown() && !r.DefinitionID.IsNull() {
		*definitionID = r.DefinitionID.ValueString()
	} else {
		definitionID = nil
	}
	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	var bucket string
	bucket = r.Configuration.Bucket.ValueString()

	var credentials shared.SourceGcsAuthentication
	var authenticateViaGoogleOAuth *shared.AuthenticateViaGoogleOAuth
	if r.Configuration.Credentials.AuthenticateViaGoogleOAuth != nil {
		var accessToken string
		accessToken = r.Configuration.Credentials.AuthenticateViaGoogleOAuth.AccessToken.ValueString()

		var clientID string
		clientID = r.Configuration.Credentials.AuthenticateViaGoogleOAuth.ClientID.ValueString()

		var clientSecret string
		clientSecret = r.Configuration.Credentials.AuthenticateViaGoogleOAuth.ClientSecret.ValueString()

		var refreshToken string
		refreshToken = r.Configuration.Credentials.AuthenticateViaGoogleOAuth.RefreshToken.ValueString()

		authenticateViaGoogleOAuth = &shared.AuthenticateViaGoogleOAuth{
			AccessToken:  accessToken,
			ClientID:     clientID,
			ClientSecret: clientSecret,
			RefreshToken: refreshToken,
		}
	}
	if authenticateViaGoogleOAuth != nil {
		credentials = shared.SourceGcsAuthentication{
			AuthenticateViaGoogleOAuth: authenticateViaGoogleOAuth,
		}
	}
	var serviceAccountAuthentication *shared.ServiceAccountAuthentication
	if r.Configuration.Credentials.ServiceAccountAuthentication != nil {
		var serviceAccount string
		serviceAccount = r.Configuration.Credentials.ServiceAccountAuthentication.ServiceAccount.ValueString()

		serviceAccountAuthentication = &shared.ServiceAccountAuthentication{
			ServiceAccount: serviceAccount,
		}
	}
	if serviceAccountAuthentication != nil {
		credentials = shared.SourceGcsAuthentication{
			ServiceAccountAuthentication: serviceAccountAuthentication,
		}
	}
	var deliveryMethod *shared.SourceGcsDeliveryMethod
	if r.Configuration.DeliveryMethod != nil {
		var sourceGcsReplicateRecords *shared.SourceGcsReplicateRecords
		if r.Configuration.DeliveryMethod.ReplicateRecords != nil {
			sourceGcsReplicateRecords = &shared.SourceGcsReplicateRecords{}
		}
		if sourceGcsReplicateRecords != nil {
			deliveryMethod = &shared.SourceGcsDeliveryMethod{
				SourceGcsReplicateRecords: sourceGcsReplicateRecords,
			}
		}
		var sourceGcsCopyRawFiles *shared.SourceGcsCopyRawFiles
		if r.Configuration.DeliveryMethod.CopyRawFiles != nil {
			preserveDirectoryStructure := new(bool)
			if !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsUnknown() && !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsNull() {
				*preserveDirectoryStructure = r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.ValueBool()
			} else {
				preserveDirectoryStructure = nil
			}
			sourceGcsCopyRawFiles = &shared.SourceGcsCopyRawFiles{
				PreserveDirectoryStructure: preserveDirectoryStructure,
			}
		}
		if sourceGcsCopyRawFiles != nil {
			deliveryMethod = &shared.SourceGcsDeliveryMethod{
				SourceGcsCopyRawFiles: sourceGcsCopyRawFiles,
			}
		}
	}
	startDate := new(time.Time)
	if !r.Configuration.StartDate.IsUnknown() && !r.Configuration.StartDate.IsNull() {
		*startDate, _ = time.Parse(time.RFC3339Nano, r.Configuration.StartDate.ValueString())
	} else {
		startDate = nil
	}
	streams := make([]shared.SourceGcsFileBasedStreamConfig, 0, len(r.Configuration.Streams))
	for streamsIndex := range r.Configuration.Streams {
		daysToSyncIfHistoryIsFull := new(int64)
		if !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsUnknown() && !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsNull() {
			*daysToSyncIfHistoryIsFull = r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.ValueInt64()
		} else {
			daysToSyncIfHistoryIsFull = nil
		}
		var format shared.SourceGcsFormat
		var sourceGcsAvroFormat *shared.SourceGcsAvroFormat
		if r.Configuration.Streams[streamsIndex].Format.AvroFormat != nil {
			doubleAsString := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsNull() {
				*doubleAsString = r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.ValueBool()
			} else {
				doubleAsString = nil
			}
			sourceGcsAvroFormat = &shared.SourceGcsAvroFormat{
				DoubleAsString: doubleAsString,
			}
		}
		if sourceGcsAvroFormat != nil {
			format = shared.SourceGcsFormat{
				SourceGcsAvroFormat: sourceGcsAvroFormat,
			}
		}
		var sourceGcsCSVFormat *shared.SourceGcsCSVFormat
		if r.Configuration.Streams[streamsIndex].Format.CSVFormat != nil {
			delimiter := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsNull() {
				*delimiter = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.ValueString()
			} else {
				delimiter = nil
			}
			doubleQuote := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsNull() {
				*doubleQuote = r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.ValueBool()
			} else {
				doubleQuote = nil
			}
			encoding := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsNull() {
				*encoding = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.ValueString()
			} else {
				encoding = nil
			}
			escapeChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsNull() {
				*escapeChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.ValueString()
			} else {
				escapeChar = nil
			}
			falseValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues))
			for falseValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues {
				falseValues = append(falseValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues[falseValuesIndex].ValueString())
			}
			var headerDefinition *shared.SourceGcsCSVHeaderDefinition
			if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition != nil {
				var sourceGcsFromCSV *shared.SourceGcsFromCSV
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.FromCSV != nil {
					sourceGcsFromCSV = &shared.SourceGcsFromCSV{}
				}
				if sourceGcsFromCSV != nil {
					headerDefinition = &shared.SourceGcsCSVHeaderDefinition{
						SourceGcsFromCSV: sourceGcsFromCSV,
					}
				}
				var sourceGcsAutogenerated *shared.SourceGcsAutogenerated
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.Autogenerated != nil {
					sourceGcsAutogenerated = &shared.SourceGcsAutogenerated{}
				}
				if sourceGcsAutogenerated != nil {
					headerDefinition = &shared.SourceGcsCSVHeaderDefinition{
						SourceGcsAutogenerated: sourceGcsAutogenerated,
					}
				}
				var sourceGcsUserProvided *shared.SourceGcsUserProvided
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided != nil {
					columnNames := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames))
					for columnNamesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames {
						columnNames = append(columnNames, r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames[columnNamesIndex].ValueString())
					}
					sourceGcsUserProvided = &shared.SourceGcsUserProvided{
						ColumnNames: columnNames,
					}
				}
				if sourceGcsUserProvided != nil {
					headerDefinition = &shared.SourceGcsCSVHeaderDefinition{
						SourceGcsUserProvided: sourceGcsUserProvided,
					}
				}
			}
			ignoreErrorsOnFieldsMismatch := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsNull() {
				*ignoreErrorsOnFieldsMismatch = r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.ValueBool()
			} else {
				ignoreErrorsOnFieldsMismatch = nil
			}
			inferenceType := new(shared.SourceGcsInferenceType)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsNull() {
				*inferenceType = shared.SourceGcsInferenceType(r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.ValueString())
			} else {
				inferenceType = nil
			}
			nullValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues))
			for nullValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues {
				nullValues = append(nullValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues[nullValuesIndex].ValueString())
			}
			quoteChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsNull() {
				*quoteChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.ValueString()
			} else {
				quoteChar = nil
			}
			skipRowsAfterHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsNull() {
				*skipRowsAfterHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.ValueInt64()
			} else {
				skipRowsAfterHeader = nil
			}
			skipRowsBeforeHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsNull() {
				*skipRowsBeforeHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.ValueInt64()
			} else {
				skipRowsBeforeHeader = nil
			}
			stringsCanBeNull := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsNull() {
				*stringsCanBeNull = r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.ValueBool()
			} else {
				stringsCanBeNull = nil
			}
			trueValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues))
			for trueValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues {
				trueValues = append(trueValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues[trueValuesIndex].ValueString())
			}
			sourceGcsCSVFormat = &shared.SourceGcsCSVFormat{
				Delimiter:                    delimiter,
				DoubleQuote:                  doubleQuote,
				Encoding:                     encoding,
				EscapeChar:                   escapeChar,
				FalseValues:                  falseValues,
				HeaderDefinition:             headerDefinition,
				IgnoreErrorsOnFieldsMismatch: ignoreErrorsOnFieldsMismatch,
				InferenceType:                inferenceType,
				NullValues:                   nullValues,
				QuoteChar:                    quoteChar,
				SkipRowsAfterHeader:          skipRowsAfterHeader,
				SkipRowsBeforeHeader:         skipRowsBeforeHeader,
				StringsCanBeNull:             stringsCanBeNull,
				TrueValues:                   trueValues,
			}
		}
		if sourceGcsCSVFormat != nil {
			format = shared.SourceGcsFormat{
				SourceGcsCSVFormat: sourceGcsCSVFormat,
			}
		}
		var sourceGcsJsonlFormat *shared.SourceGcsJsonlFormat
		if r.Configuration.Streams[streamsIndex].Format.JsonlFormat != nil {
			sourceGcsJsonlFormat = &shared.SourceGcsJsonlFormat{}
		}
		if sourceGcsJsonlFormat != nil {
			format = shared.SourceGcsFormat{
				SourceGcsJsonlFormat: sourceGcsJsonlFormat,
			}
		}
		var sourceGcsParquetFormat *shared.SourceGcsParquetFormat
		if r.Configuration.Streams[streamsIndex].Format.ParquetFormat != nil {
			decimalAsFloat := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsNull() {
				*decimalAsFloat = r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.ValueBool()
			} else {
				decimalAsFloat = nil
			}
			sourceGcsParquetFormat = &shared.SourceGcsParquetFormat{
				DecimalAsFloat: decimalAsFloat,
			}
		}
		if sourceGcsParquetFormat != nil {
			format = shared.SourceGcsFormat{
				SourceGcsParquetFormat: sourceGcsParquetFormat,
			}
		}
		var sourceGcsUnstructuredDocumentFormat *shared.SourceGcsUnstructuredDocumentFormat
		if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat != nil {
			var processing *shared.SourceGcsProcessing
			if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing != nil {
				var sourceGcsLocal *shared.SourceGcsLocal
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.Local != nil {
					sourceGcsLocal = &shared.SourceGcsLocal{}
				}
				if sourceGcsLocal != nil {
					processing = &shared.SourceGcsProcessing{
						SourceGcsLocal: sourceGcsLocal,
					}
				}
				var viaAPI *shared.ViaAPI
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI != nil {
					apiKey := new(string)
					if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.IsNull() {
						*apiKey = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.ValueString()
					} else {
						apiKey = nil
					}
					apiURL := new(string)
					if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.IsNull() {
						*apiURL = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.ValueString()
					} else {
						apiURL = nil
					}
					parameters := make([]shared.APIParameterConfigModel, 0, len(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters))
					for parametersIndex := range r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters {
						var name1 string
						name1 = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Name.ValueString()

						var value string
						value = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Value.ValueString()

						parameters = append(parameters, shared.APIParameterConfigModel{
							Name:  name1,
							Value: value,
						})
					}
					viaAPI = &shared.ViaAPI{
						APIKey:     apiKey,
						APIURL:     apiURL,
						Parameters: parameters,
					}
				}
				if viaAPI != nil {
					processing = &shared.SourceGcsProcessing{
						ViaAPI: viaAPI,
					}
				}
			}
			skipUnprocessableFiles := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsNull() {
				*skipUnprocessableFiles = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.ValueBool()
			} else {
				skipUnprocessableFiles = nil
			}
			strategy := new(shared.SourceGcsParsingStrategy)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsNull() {
				*strategy = shared.SourceGcsParsingStrategy(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.ValueString())
			} else {
				strategy = nil
			}
			sourceGcsUnstructuredDocumentFormat = &shared.SourceGcsUnstructuredDocumentFormat{
				Processing:             processing,
				SkipUnprocessableFiles: skipUnprocessableFiles,
				Strategy:               strategy,
			}
		}
		if sourceGcsUnstructuredDocumentFormat != nil {
			format = shared.SourceGcsFormat{
				SourceGcsUnstructuredDocumentFormat: sourceGcsUnstructuredDocumentFormat,
			}
		}
		var sourceGcsExcelFormat *shared.SourceGcsExcelFormat
		if r.Configuration.Streams[streamsIndex].Format.ExcelFormat != nil {
			sourceGcsExcelFormat = &shared.SourceGcsExcelFormat{}
		}
		if sourceGcsExcelFormat != nil {
			format = shared.SourceGcsFormat{
				SourceGcsExcelFormat: sourceGcsExcelFormat,
			}
		}
		globs := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Globs))
		for globsIndex := range r.Configuration.Streams[streamsIndex].Globs {
			globs = append(globs, r.Configuration.Streams[streamsIndex].Globs[globsIndex].ValueString())
		}
		inputSchema := new(string)
		if !r.Configuration.Streams[streamsIndex].InputSchema.IsUnknown() && !r.Configuration.Streams[streamsIndex].InputSchema.IsNull() {
			*inputSchema = r.Configuration.Streams[streamsIndex].InputSchema.ValueString()
		} else {
			inputSchema = nil
		}
		legacyPrefix := new(string)
		if !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsUnknown() && !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsNull() {
			*legacyPrefix = r.Configuration.Streams[streamsIndex].LegacyPrefix.ValueString()
		} else {
			legacyPrefix = nil
		}
		var name2 string
		name2 = r.Configuration.Streams[streamsIndex].Name.ValueString()

		primaryKey := new(string)
		if !r.Configuration.Streams[streamsIndex].PrimaryKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].PrimaryKey.IsNull() {
			*primaryKey = r.Configuration.Streams[streamsIndex].PrimaryKey.ValueString()
		} else {
			primaryKey = nil
		}
		recentNFilesToReadForSchemaDiscovery := new(int64)
		if !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsNull() {
			*recentNFilesToReadForSchemaDiscovery = r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.ValueInt64()
		} else {
			recentNFilesToReadForSchemaDiscovery = nil
		}
		schemaless := new(bool)
		if !r.Configuration.Streams[streamsIndex].Schemaless.IsUnknown() && !r.Configuration.Streams[streamsIndex].Schemaless.IsNull() {
			*schemaless = r.Configuration.Streams[streamsIndex].Schemaless.ValueBool()
		} else {
			schemaless = nil
		}
		useFirstFoundFileForSchemaDiscovery := new(bool)
		if !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsNull() {
			*useFirstFoundFileForSchemaDiscovery = r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.ValueBool()
		} else {
			useFirstFoundFileForSchemaDiscovery = nil
		}
		validationPolicy := new(shared.SourceGcsValidationPolicy)
		if !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsUnknown() && !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsNull() {
			*validationPolicy = shared.SourceGcsValidationPolicy(r.Configuration.Streams[streamsIndex].ValidationPolicy.ValueString())
		} else {
			validationPolicy = nil
		}
		streams = append(streams, shared.SourceGcsFileBasedStreamConfig{
			DaysToSyncIfHistoryIsFull:            daysToSyncIfHistoryIsFull,
			Format:                               format,
			Globs:                                globs,
			InputSchema:                          inputSchema,
			LegacyPrefix:                         legacyPrefix,
			Name:                                 name2,
			PrimaryKey:                           primaryKey,
			RecentNFilesToReadForSchemaDiscovery: recentNFilesToReadForSchemaDiscovery,
			Schemaless:                           schemaless,
			UseFirstFoundFileForSchemaDiscovery:  useFirstFoundFileForSchemaDiscovery,
			ValidationPolicy:                     validationPolicy,
		})
	}
	configuration := shared.SourceGcs{
		Bucket:         bucket,
		Credentials:    credentials,
		DeliveryMethod: deliveryMethod,
		StartDate:      startDate,
		Streams:        streams,
	}
	secretID := new(string)
	if !r.SecretID.IsUnknown() && !r.SecretID.IsNull() {
		*secretID = r.SecretID.ValueString()
	} else {
		secretID = nil
	}
	out := shared.SourceGcsCreateRequest{
		Name:          name,
		DefinitionID:  definitionID,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
		SecretID:      secretID,
	}

	return &out, diags
}

func (r *SourceGcsResourceModel) ToSharedSourceGcsPutRequest(ctx context.Context) (*shared.SourceGcsPutRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	bucket := new(string)
	if !r.Configuration.Bucket.IsUnknown() && !r.Configuration.Bucket.IsNull() {
		*bucket = r.Configuration.Bucket.ValueString()
	} else {
		bucket = nil
	}
	var credentials *shared.SourceGcsUpdateAuthentication
	var sourceGcsUpdateAuthenticateViaGoogleOAuth *shared.SourceGcsUpdateAuthenticateViaGoogleOAuth
	if r.Configuration.Credentials.AuthenticateViaGoogleOAuth != nil {
		accessToken := new(string)
		if !r.Configuration.Credentials.AuthenticateViaGoogleOAuth.AccessToken.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaGoogleOAuth.AccessToken.IsNull() {
			*accessToken = r.Configuration.Credentials.AuthenticateViaGoogleOAuth.AccessToken.ValueString()
		} else {
			accessToken = nil
		}
		clientID := new(string)
		if !r.Configuration.Credentials.AuthenticateViaGoogleOAuth.ClientID.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaGoogleOAuth.ClientID.IsNull() {
			*clientID = r.Configuration.Credentials.AuthenticateViaGoogleOAuth.ClientID.ValueString()
		} else {
			clientID = nil
		}
		clientSecret := new(string)
		if !r.Configuration.Credentials.AuthenticateViaGoogleOAuth.ClientSecret.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaGoogleOAuth.ClientSecret.IsNull() {
			*clientSecret = r.Configuration.Credentials.AuthenticateViaGoogleOAuth.ClientSecret.ValueString()
		} else {
			clientSecret = nil
		}
		refreshToken := new(string)
		if !r.Configuration.Credentials.AuthenticateViaGoogleOAuth.RefreshToken.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaGoogleOAuth.RefreshToken.IsNull() {
			*refreshToken = r.Configuration.Credentials.AuthenticateViaGoogleOAuth.RefreshToken.ValueString()
		} else {
			refreshToken = nil
		}
		sourceGcsUpdateAuthenticateViaGoogleOAuth = &shared.SourceGcsUpdateAuthenticateViaGoogleOAuth{
			AccessToken:  accessToken,
			ClientID:     clientID,
			ClientSecret: clientSecret,
			RefreshToken: refreshToken,
		}
	}
	if sourceGcsUpdateAuthenticateViaGoogleOAuth != nil {
		credentials = &shared.SourceGcsUpdateAuthentication{
			SourceGcsUpdateAuthenticateViaGoogleOAuth: sourceGcsUpdateAuthenticateViaGoogleOAuth,
		}
	}
	var sourceGcsUpdateServiceAccountAuthentication *shared.SourceGcsUpdateServiceAccountAuthentication
	if r.Configuration.Credentials.ServiceAccountAuthentication != nil {
		serviceAccount := new(string)
		if !r.Configuration.Credentials.ServiceAccountAuthentication.ServiceAccount.IsUnknown() && !r.Configuration.Credentials.ServiceAccountAuthentication.ServiceAccount.IsNull() {
			*serviceAccount = r.Configuration.Credentials.ServiceAccountAuthentication.ServiceAccount.ValueString()
		} else {
			serviceAccount = nil
		}
		sourceGcsUpdateServiceAccountAuthentication = &shared.SourceGcsUpdateServiceAccountAuthentication{
			ServiceAccount: serviceAccount,
		}
	}
	if sourceGcsUpdateServiceAccountAuthentication != nil {
		credentials = &shared.SourceGcsUpdateAuthentication{
			SourceGcsUpdateServiceAccountAuthentication: sourceGcsUpdateServiceAccountAuthentication,
		}
	}
	var deliveryMethod *shared.SourceGcsUpdateDeliveryMethod
	if r.Configuration.DeliveryMethod != nil {
		var sourceGcsUpdateReplicateRecords *shared.SourceGcsUpdateReplicateRecords
		if r.Configuration.DeliveryMethod.ReplicateRecords != nil {
			sourceGcsUpdateReplicateRecords = &shared.SourceGcsUpdateReplicateRecords{}
		}
		if sourceGcsUpdateReplicateRecords != nil {
			deliveryMethod = &shared.SourceGcsUpdateDeliveryMethod{
				SourceGcsUpdateReplicateRecords: sourceGcsUpdateReplicateRecords,
			}
		}
		var sourceGcsUpdateCopyRawFiles *shared.SourceGcsUpdateCopyRawFiles
		if r.Configuration.DeliveryMethod.CopyRawFiles != nil {
			preserveDirectoryStructure := new(bool)
			if !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsUnknown() && !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsNull() {
				*preserveDirectoryStructure = r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.ValueBool()
			} else {
				preserveDirectoryStructure = nil
			}
			sourceGcsUpdateCopyRawFiles = &shared.SourceGcsUpdateCopyRawFiles{
				PreserveDirectoryStructure: preserveDirectoryStructure,
			}
		}
		if sourceGcsUpdateCopyRawFiles != nil {
			deliveryMethod = &shared.SourceGcsUpdateDeliveryMethod{
				SourceGcsUpdateCopyRawFiles: sourceGcsUpdateCopyRawFiles,
			}
		}
	}
	startDate := new(time.Time)
	if !r.Configuration.StartDate.IsUnknown() && !r.Configuration.StartDate.IsNull() {
		*startDate, _ = time.Parse(time.RFC3339Nano, r.Configuration.StartDate.ValueString())
	} else {
		startDate = nil
	}
	streams := make([]shared.SourceGcsUpdateFileBasedStreamConfig, 0, len(r.Configuration.Streams))
	for streamsIndex := range r.Configuration.Streams {
		daysToSyncIfHistoryIsFull := new(int64)
		if !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsUnknown() && !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsNull() {
			*daysToSyncIfHistoryIsFull = r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.ValueInt64()
		} else {
			daysToSyncIfHistoryIsFull = nil
		}
		var format *shared.SourceGcsUpdateFormat
		var sourceGcsUpdateAvroFormat *shared.SourceGcsUpdateAvroFormat
		if r.Configuration.Streams[streamsIndex].Format.AvroFormat != nil {
			doubleAsString := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsNull() {
				*doubleAsString = r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.ValueBool()
			} else {
				doubleAsString = nil
			}
			sourceGcsUpdateAvroFormat = &shared.SourceGcsUpdateAvroFormat{
				DoubleAsString: doubleAsString,
			}
		}
		if sourceGcsUpdateAvroFormat != nil {
			format = &shared.SourceGcsUpdateFormat{
				SourceGcsUpdateAvroFormat: sourceGcsUpdateAvroFormat,
			}
		}
		var sourceGcsUpdateCSVFormat *shared.SourceGcsUpdateCSVFormat
		if r.Configuration.Streams[streamsIndex].Format.CSVFormat != nil {
			delimiter := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsNull() {
				*delimiter = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.ValueString()
			} else {
				delimiter = nil
			}
			doubleQuote := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsNull() {
				*doubleQuote = r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.ValueBool()
			} else {
				doubleQuote = nil
			}
			encoding := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsNull() {
				*encoding = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.ValueString()
			} else {
				encoding = nil
			}
			escapeChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsNull() {
				*escapeChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.ValueString()
			} else {
				escapeChar = nil
			}
			falseValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues))
			for falseValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues {
				falseValues = append(falseValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues[falseValuesIndex].ValueString())
			}
			var headerDefinition *shared.SourceGcsUpdateCSVHeaderDefinition
			if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition != nil {
				var sourceGcsUpdateFromCSV *shared.SourceGcsUpdateFromCSV
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.FromCSV != nil {
					sourceGcsUpdateFromCSV = &shared.SourceGcsUpdateFromCSV{}
				}
				if sourceGcsUpdateFromCSV != nil {
					headerDefinition = &shared.SourceGcsUpdateCSVHeaderDefinition{
						SourceGcsUpdateFromCSV: sourceGcsUpdateFromCSV,
					}
				}
				var sourceGcsUpdateAutogenerated *shared.SourceGcsUpdateAutogenerated
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.Autogenerated != nil {
					sourceGcsUpdateAutogenerated = &shared.SourceGcsUpdateAutogenerated{}
				}
				if sourceGcsUpdateAutogenerated != nil {
					headerDefinition = &shared.SourceGcsUpdateCSVHeaderDefinition{
						SourceGcsUpdateAutogenerated: sourceGcsUpdateAutogenerated,
					}
				}
				var sourceGcsUpdateUserProvided *shared.SourceGcsUpdateUserProvided
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided != nil {
					columnNames := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames))
					for columnNamesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames {
						columnNames = append(columnNames, r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames[columnNamesIndex].ValueString())
					}
					sourceGcsUpdateUserProvided = &shared.SourceGcsUpdateUserProvided{
						ColumnNames: columnNames,
					}
				}
				if sourceGcsUpdateUserProvided != nil {
					headerDefinition = &shared.SourceGcsUpdateCSVHeaderDefinition{
						SourceGcsUpdateUserProvided: sourceGcsUpdateUserProvided,
					}
				}
			}
			ignoreErrorsOnFieldsMismatch := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsNull() {
				*ignoreErrorsOnFieldsMismatch = r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.ValueBool()
			} else {
				ignoreErrorsOnFieldsMismatch = nil
			}
			inferenceType := new(shared.SourceGcsUpdateInferenceType)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsNull() {
				*inferenceType = shared.SourceGcsUpdateInferenceType(r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.ValueString())
			} else {
				inferenceType = nil
			}
			nullValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues))
			for nullValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues {
				nullValues = append(nullValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues[nullValuesIndex].ValueString())
			}
			quoteChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsNull() {
				*quoteChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.ValueString()
			} else {
				quoteChar = nil
			}
			skipRowsAfterHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsNull() {
				*skipRowsAfterHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.ValueInt64()
			} else {
				skipRowsAfterHeader = nil
			}
			skipRowsBeforeHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsNull() {
				*skipRowsBeforeHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.ValueInt64()
			} else {
				skipRowsBeforeHeader = nil
			}
			stringsCanBeNull := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsNull() {
				*stringsCanBeNull = r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.ValueBool()
			} else {
				stringsCanBeNull = nil
			}
			trueValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues))
			for trueValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues {
				trueValues = append(trueValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues[trueValuesIndex].ValueString())
			}
			sourceGcsUpdateCSVFormat = &shared.SourceGcsUpdateCSVFormat{
				Delimiter:                    delimiter,
				DoubleQuote:                  doubleQuote,
				Encoding:                     encoding,
				EscapeChar:                   escapeChar,
				FalseValues:                  falseValues,
				HeaderDefinition:             headerDefinition,
				IgnoreErrorsOnFieldsMismatch: ignoreErrorsOnFieldsMismatch,
				InferenceType:                inferenceType,
				NullValues:                   nullValues,
				QuoteChar:                    quoteChar,
				SkipRowsAfterHeader:          skipRowsAfterHeader,
				SkipRowsBeforeHeader:         skipRowsBeforeHeader,
				StringsCanBeNull:             stringsCanBeNull,
				TrueValues:                   trueValues,
			}
		}
		if sourceGcsUpdateCSVFormat != nil {
			format = &shared.SourceGcsUpdateFormat{
				SourceGcsUpdateCSVFormat: sourceGcsUpdateCSVFormat,
			}
		}
		var sourceGcsUpdateJsonlFormat *shared.SourceGcsUpdateJsonlFormat
		if r.Configuration.Streams[streamsIndex].Format.JsonlFormat != nil {
			sourceGcsUpdateJsonlFormat = &shared.SourceGcsUpdateJsonlFormat{}
		}
		if sourceGcsUpdateJsonlFormat != nil {
			format = &shared.SourceGcsUpdateFormat{
				SourceGcsUpdateJsonlFormat: sourceGcsUpdateJsonlFormat,
			}
		}
		var sourceGcsUpdateParquetFormat *shared.SourceGcsUpdateParquetFormat
		if r.Configuration.Streams[streamsIndex].Format.ParquetFormat != nil {
			decimalAsFloat := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsNull() {
				*decimalAsFloat = r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.ValueBool()
			} else {
				decimalAsFloat = nil
			}
			sourceGcsUpdateParquetFormat = &shared.SourceGcsUpdateParquetFormat{
				DecimalAsFloat: decimalAsFloat,
			}
		}
		if sourceGcsUpdateParquetFormat != nil {
			format = &shared.SourceGcsUpdateFormat{
				SourceGcsUpdateParquetFormat: sourceGcsUpdateParquetFormat,
			}
		}
		var sourceGcsUpdateUnstructuredDocumentFormat *shared.SourceGcsUpdateUnstructuredDocumentFormat
		if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat != nil {
			var processing *shared.SourceGcsUpdateProcessing
			if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing != nil {
				var sourceGcsUpdateLocal *shared.SourceGcsUpdateLocal
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.Local != nil {
					sourceGcsUpdateLocal = &shared.SourceGcsUpdateLocal{}
				}
				if sourceGcsUpdateLocal != nil {
					processing = &shared.SourceGcsUpdateProcessing{
						SourceGcsUpdateLocal: sourceGcsUpdateLocal,
					}
				}
				var sourceGcsUpdateViaAPI *shared.SourceGcsUpdateViaAPI
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI != nil {
					apiKey := new(string)
					if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.IsNull() {
						*apiKey = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.ValueString()
					} else {
						apiKey = nil
					}
					apiURL := new(string)
					if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.IsNull() {
						*apiURL = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.ValueString()
					} else {
						apiURL = nil
					}
					parameters := make([]shared.SourceGcsUpdateAPIParameterConfigModel, 0, len(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters))
					for parametersIndex := range r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters {
						name1 := new(string)
						if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Name.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Name.IsNull() {
							*name1 = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Name.ValueString()
						} else {
							name1 = nil
						}
						value := new(string)
						if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Value.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Value.IsNull() {
							*value = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Value.ValueString()
						} else {
							value = nil
						}
						parameters = append(parameters, shared.SourceGcsUpdateAPIParameterConfigModel{
							Name:  name1,
							Value: value,
						})
					}
					sourceGcsUpdateViaAPI = &shared.SourceGcsUpdateViaAPI{
						APIKey:     apiKey,
						APIURL:     apiURL,
						Parameters: parameters,
					}
				}
				if sourceGcsUpdateViaAPI != nil {
					processing = &shared.SourceGcsUpdateProcessing{
						SourceGcsUpdateViaAPI: sourceGcsUpdateViaAPI,
					}
				}
			}
			skipUnprocessableFiles := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsNull() {
				*skipUnprocessableFiles = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.ValueBool()
			} else {
				skipUnprocessableFiles = nil
			}
			strategy := new(shared.SourceGcsUpdateParsingStrategy)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsNull() {
				*strategy = shared.SourceGcsUpdateParsingStrategy(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.ValueString())
			} else {
				strategy = nil
			}
			sourceGcsUpdateUnstructuredDocumentFormat = &shared.SourceGcsUpdateUnstructuredDocumentFormat{
				Processing:             processing,
				SkipUnprocessableFiles: skipUnprocessableFiles,
				Strategy:               strategy,
			}
		}
		if sourceGcsUpdateUnstructuredDocumentFormat != nil {
			format = &shared.SourceGcsUpdateFormat{
				SourceGcsUpdateUnstructuredDocumentFormat: sourceGcsUpdateUnstructuredDocumentFormat,
			}
		}
		var sourceGcsUpdateExcelFormat *shared.SourceGcsUpdateExcelFormat
		if r.Configuration.Streams[streamsIndex].Format.ExcelFormat != nil {
			sourceGcsUpdateExcelFormat = &shared.SourceGcsUpdateExcelFormat{}
		}
		if sourceGcsUpdateExcelFormat != nil {
			format = &shared.SourceGcsUpdateFormat{
				SourceGcsUpdateExcelFormat: sourceGcsUpdateExcelFormat,
			}
		}
		globs := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Globs))
		for globsIndex := range r.Configuration.Streams[streamsIndex].Globs {
			globs = append(globs, r.Configuration.Streams[streamsIndex].Globs[globsIndex].ValueString())
		}
		inputSchema := new(string)
		if !r.Configuration.Streams[streamsIndex].InputSchema.IsUnknown() && !r.Configuration.Streams[streamsIndex].InputSchema.IsNull() {
			*inputSchema = r.Configuration.Streams[streamsIndex].InputSchema.ValueString()
		} else {
			inputSchema = nil
		}
		legacyPrefix := new(string)
		if !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsUnknown() && !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsNull() {
			*legacyPrefix = r.Configuration.Streams[streamsIndex].LegacyPrefix.ValueString()
		} else {
			legacyPrefix = nil
		}
		name2 := new(string)
		if !r.Configuration.Streams[streamsIndex].Name.IsUnknown() && !r.Configuration.Streams[streamsIndex].Name.IsNull() {
			*name2 = r.Configuration.Streams[streamsIndex].Name.ValueString()
		} else {
			name2 = nil
		}
		primaryKey := new(string)
		if !r.Configuration.Streams[streamsIndex].PrimaryKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].PrimaryKey.IsNull() {
			*primaryKey = r.Configuration.Streams[streamsIndex].PrimaryKey.ValueString()
		} else {
			primaryKey = nil
		}
		recentNFilesToReadForSchemaDiscovery := new(int64)
		if !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsNull() {
			*recentNFilesToReadForSchemaDiscovery = r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.ValueInt64()
		} else {
			recentNFilesToReadForSchemaDiscovery = nil
		}
		schemaless := new(bool)
		if !r.Configuration.Streams[streamsIndex].Schemaless.IsUnknown() && !r.Configuration.Streams[streamsIndex].Schemaless.IsNull() {
			*schemaless = r.Configuration.Streams[streamsIndex].Schemaless.ValueBool()
		} else {
			schemaless = nil
		}
		useFirstFoundFileForSchemaDiscovery := new(bool)
		if !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsNull() {
			*useFirstFoundFileForSchemaDiscovery = r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.ValueBool()
		} else {
			useFirstFoundFileForSchemaDiscovery = nil
		}
		validationPolicy := new(shared.SourceGcsUpdateValidationPolicy)
		if !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsUnknown() && !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsNull() {
			*validationPolicy = shared.SourceGcsUpdateValidationPolicy(r.Configuration.Streams[streamsIndex].ValidationPolicy.ValueString())
		} else {
			validationPolicy = nil
		}
		streams = append(streams, shared.SourceGcsUpdateFileBasedStreamConfig{
			DaysToSyncIfHistoryIsFull:            daysToSyncIfHistoryIsFull,
			Format:                               format,
			Globs:                                globs,
			InputSchema:                          inputSchema,
			LegacyPrefix:                         legacyPrefix,
			Name:                                 name2,
			PrimaryKey:                           primaryKey,
			RecentNFilesToReadForSchemaDiscovery: recentNFilesToReadForSchemaDiscovery,
			Schemaless:                           schemaless,
			UseFirstFoundFileForSchemaDiscovery:  useFirstFoundFileForSchemaDiscovery,
			ValidationPolicy:                     validationPolicy,
		})
	}
	configuration := shared.SourceGcsUpdate{
		Bucket:         bucket,
		Credentials:    credentials,
		DeliveryMethod: deliveryMethod,
		StartDate:      startDate,
		Streams:        streams,
	}
	out := shared.SourceGcsPutRequest{
		Name:          name,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
	}

	return &out, diags
}
