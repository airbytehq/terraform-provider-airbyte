// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	tfTypes "github.com/airbytehq/terraform-provider-airbyte/internal/provider/types"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/operations"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"time"
)

func (r *SourceAzureBlobStorageResourceModel) RefreshFromSharedSourceResponse(ctx context.Context, resp *shared.SourceResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		configurationPriorData := r.Configuration
		r.Configuration = &tfTypes.SourceAzureBlobStorage{}
		if configurationPriorData != nil {
			r.Configuration.AzureBlobStorageAccountName = configurationPriorData.AzureBlobStorageAccountName
			r.Configuration.AzureBlobStorageContainerName = configurationPriorData.AzureBlobStorageContainerName
			r.Configuration.AzureBlobStorageEndpoint = configurationPriorData.AzureBlobStorageEndpoint
			r.Configuration.Credentials = configurationPriorData.Credentials
			r.Configuration.DeliveryMethod = configurationPriorData.DeliveryMethod
			r.Configuration.StartDate = configurationPriorData.StartDate
			r.Configuration.Streams = configurationPriorData.Streams
		}
		r.CreatedAt = types.Int64Value(resp.CreatedAt)
		r.DefinitionID = types.StringValue(resp.DefinitionID)
		r.Name = types.StringValue(resp.Name)
		if resp.ResourceAllocation == nil {
			r.ResourceAllocation = nil
		} else {
			r.ResourceAllocation = &tfTypes.ScopedResourceRequirements{}
			if resp.ResourceAllocation.Default == nil {
				r.ResourceAllocation.Default = nil
			} else {
				r.ResourceAllocation.Default = &tfTypes.ResourceRequirements{}
				r.ResourceAllocation.Default.CPULimit = types.StringPointerValue(resp.ResourceAllocation.Default.CPULimit)
				r.ResourceAllocation.Default.CPURequest = types.StringPointerValue(resp.ResourceAllocation.Default.CPURequest)
				r.ResourceAllocation.Default.EphemeralStorageLimit = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageLimit)
				r.ResourceAllocation.Default.EphemeralStorageRequest = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageRequest)
				r.ResourceAllocation.Default.MemoryLimit = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryLimit)
				r.ResourceAllocation.Default.MemoryRequest = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryRequest)
			}
			r.ResourceAllocation.JobSpecific = []tfTypes.JobTypeResourceLimit{}

			for _, jobSpecificItem := range resp.ResourceAllocation.JobSpecific {
				var jobSpecific tfTypes.JobTypeResourceLimit

				jobSpecific.JobType = types.StringValue(string(jobSpecificItem.JobType))
				jobSpecific.ResourceRequirements = &tfTypes.ResourceRequirements{}
				jobSpecific.ResourceRequirements.CPULimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPULimit)
				jobSpecific.ResourceRequirements.CPURequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPURequest)
				jobSpecific.ResourceRequirements.EphemeralStorageLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageLimit)
				jobSpecific.ResourceRequirements.EphemeralStorageRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageRequest)
				jobSpecific.ResourceRequirements.MemoryLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryLimit)
				jobSpecific.ResourceRequirements.MemoryRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryRequest)

				r.ResourceAllocation.JobSpecific = append(r.ResourceAllocation.JobSpecific, jobSpecific)
			}
		}
		r.SourceID = types.StringValue(resp.SourceID)
		r.SourceType = types.StringValue(resp.SourceType)
		r.WorkspaceID = types.StringValue(resp.WorkspaceID)
	}

	return diags
}

func (r *SourceAzureBlobStorageResourceModel) ToOperationsDeleteSourceAzureBlobStorageRequest(ctx context.Context) (*operations.DeleteSourceAzureBlobStorageRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	out := operations.DeleteSourceAzureBlobStorageRequest{
		SourceID: sourceID,
	}

	return &out, diags
}

func (r *SourceAzureBlobStorageResourceModel) ToOperationsGetSourceAzureBlobStorageRequest(ctx context.Context) (*operations.GetSourceAzureBlobStorageRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	out := operations.GetSourceAzureBlobStorageRequest{
		SourceID: sourceID,
	}

	return &out, diags
}

func (r *SourceAzureBlobStorageResourceModel) ToOperationsPutSourceAzureBlobStorageRequest(ctx context.Context) (*operations.PutSourceAzureBlobStorageRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	sourceAzureBlobStoragePutRequest, sourceAzureBlobStoragePutRequestDiags := r.ToSharedSourceAzureBlobStoragePutRequest(ctx)
	diags.Append(sourceAzureBlobStoragePutRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.PutSourceAzureBlobStorageRequest{
		SourceID:                         sourceID,
		SourceAzureBlobStoragePutRequest: *sourceAzureBlobStoragePutRequest,
	}

	return &out, diags
}

func (r *SourceAzureBlobStorageResourceModel) ToSharedSourceAzureBlobStorageCreateRequest(ctx context.Context) (*shared.SourceAzureBlobStorageCreateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	definitionID := new(string)
	if !r.DefinitionID.IsUnknown() && !r.DefinitionID.IsNull() {
		*definitionID = r.DefinitionID.ValueString()
	} else {
		definitionID = nil
	}
	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	var azureBlobStorageAccountName string
	azureBlobStorageAccountName = r.Configuration.AzureBlobStorageAccountName.ValueString()

	var azureBlobStorageContainerName string
	azureBlobStorageContainerName = r.Configuration.AzureBlobStorageContainerName.ValueString()

	azureBlobStorageEndpoint := new(string)
	if !r.Configuration.AzureBlobStorageEndpoint.IsUnknown() && !r.Configuration.AzureBlobStorageEndpoint.IsNull() {
		*azureBlobStorageEndpoint = r.Configuration.AzureBlobStorageEndpoint.ValueString()
	} else {
		azureBlobStorageEndpoint = nil
	}
	var credentials shared.SourceAzureBlobStorageAuthentication
	var authenticateViaOauth2 *shared.AuthenticateViaOauth2
	if r.Configuration.Credentials.AuthenticateViaOauth2 != nil {
		var clientID string
		clientID = r.Configuration.Credentials.AuthenticateViaOauth2.ClientID.ValueString()

		var clientSecret string
		clientSecret = r.Configuration.Credentials.AuthenticateViaOauth2.ClientSecret.ValueString()

		var refreshToken string
		refreshToken = r.Configuration.Credentials.AuthenticateViaOauth2.RefreshToken.ValueString()

		var tenantID string
		tenantID = r.Configuration.Credentials.AuthenticateViaOauth2.TenantID.ValueString()

		authenticateViaOauth2 = &shared.AuthenticateViaOauth2{
			ClientID:     clientID,
			ClientSecret: clientSecret,
			RefreshToken: refreshToken,
			TenantID:     tenantID,
		}
	}
	if authenticateViaOauth2 != nil {
		credentials = shared.SourceAzureBlobStorageAuthentication{
			AuthenticateViaOauth2: authenticateViaOauth2,
		}
	}
	var authenticateViaClientCredentials *shared.AuthenticateViaClientCredentials
	if r.Configuration.Credentials.AuthenticateViaClientCredentials != nil {
		var appClientID string
		appClientID = r.Configuration.Credentials.AuthenticateViaClientCredentials.AppClientID.ValueString()

		var appClientSecret string
		appClientSecret = r.Configuration.Credentials.AuthenticateViaClientCredentials.AppClientSecret.ValueString()

		var appTenantID string
		appTenantID = r.Configuration.Credentials.AuthenticateViaClientCredentials.AppTenantID.ValueString()

		authenticateViaClientCredentials = &shared.AuthenticateViaClientCredentials{
			AppClientID:     appClientID,
			AppClientSecret: appClientSecret,
			AppTenantID:     appTenantID,
		}
	}
	if authenticateViaClientCredentials != nil {
		credentials = shared.SourceAzureBlobStorageAuthentication{
			AuthenticateViaClientCredentials: authenticateViaClientCredentials,
		}
	}
	var authenticateViaStorageAccountKey *shared.AuthenticateViaStorageAccountKey
	if r.Configuration.Credentials.AuthenticateViaStorageAccountKey != nil {
		var azureBlobStorageAccountKey string
		azureBlobStorageAccountKey = r.Configuration.Credentials.AuthenticateViaStorageAccountKey.AzureBlobStorageAccountKey.ValueString()

		authenticateViaStorageAccountKey = &shared.AuthenticateViaStorageAccountKey{
			AzureBlobStorageAccountKey: azureBlobStorageAccountKey,
		}
	}
	if authenticateViaStorageAccountKey != nil {
		credentials = shared.SourceAzureBlobStorageAuthentication{
			AuthenticateViaStorageAccountKey: authenticateViaStorageAccountKey,
		}
	}
	var deliveryMethod *shared.DeliveryMethod
	if r.Configuration.DeliveryMethod != nil {
		var replicateRecords *shared.ReplicateRecords
		if r.Configuration.DeliveryMethod.ReplicateRecords != nil {
			replicateRecords = &shared.ReplicateRecords{}
		}
		if replicateRecords != nil {
			deliveryMethod = &shared.DeliveryMethod{
				ReplicateRecords: replicateRecords,
			}
		}
		var copyRawFiles *shared.CopyRawFiles
		if r.Configuration.DeliveryMethod.CopyRawFiles != nil {
			preserveDirectoryStructure := new(bool)
			if !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsUnknown() && !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsNull() {
				*preserveDirectoryStructure = r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.ValueBool()
			} else {
				preserveDirectoryStructure = nil
			}
			copyRawFiles = &shared.CopyRawFiles{
				PreserveDirectoryStructure: preserveDirectoryStructure,
			}
		}
		if copyRawFiles != nil {
			deliveryMethod = &shared.DeliveryMethod{
				CopyRawFiles: copyRawFiles,
			}
		}
	}
	startDate := new(time.Time)
	if !r.Configuration.StartDate.IsUnknown() && !r.Configuration.StartDate.IsNull() {
		*startDate, _ = time.Parse(time.RFC3339Nano, r.Configuration.StartDate.ValueString())
	} else {
		startDate = nil
	}
	streams := make([]shared.FileBasedStreamConfig, 0, len(r.Configuration.Streams))
	for streamsIndex := range r.Configuration.Streams {
		daysToSyncIfHistoryIsFull := new(int64)
		if !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsUnknown() && !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsNull() {
			*daysToSyncIfHistoryIsFull = r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.ValueInt64()
		} else {
			daysToSyncIfHistoryIsFull = nil
		}
		var format shared.Format
		var avroFormat *shared.AvroFormat
		if r.Configuration.Streams[streamsIndex].Format.AvroFormat != nil {
			doubleAsString := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsNull() {
				*doubleAsString = r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.ValueBool()
			} else {
				doubleAsString = nil
			}
			avroFormat = &shared.AvroFormat{
				DoubleAsString: doubleAsString,
			}
		}
		if avroFormat != nil {
			format = shared.Format{
				AvroFormat: avroFormat,
			}
		}
		var csvFormat *shared.CSVFormat
		if r.Configuration.Streams[streamsIndex].Format.CSVFormat != nil {
			delimiter := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsNull() {
				*delimiter = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.ValueString()
			} else {
				delimiter = nil
			}
			doubleQuote := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsNull() {
				*doubleQuote = r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.ValueBool()
			} else {
				doubleQuote = nil
			}
			encoding := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsNull() {
				*encoding = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.ValueString()
			} else {
				encoding = nil
			}
			escapeChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsNull() {
				*escapeChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.ValueString()
			} else {
				escapeChar = nil
			}
			falseValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues))
			for falseValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues {
				falseValues = append(falseValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues[falseValuesIndex].ValueString())
			}
			var headerDefinition *shared.CSVHeaderDefinition
			if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition != nil {
				var fromCSV *shared.FromCSV
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.FromCSV != nil {
					fromCSV = &shared.FromCSV{}
				}
				if fromCSV != nil {
					headerDefinition = &shared.CSVHeaderDefinition{
						FromCSV: fromCSV,
					}
				}
				var autogenerated *shared.Autogenerated
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.Autogenerated != nil {
					autogenerated = &shared.Autogenerated{}
				}
				if autogenerated != nil {
					headerDefinition = &shared.CSVHeaderDefinition{
						Autogenerated: autogenerated,
					}
				}
				var userProvided *shared.UserProvided
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided != nil {
					columnNames := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames))
					for columnNamesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames {
						columnNames = append(columnNames, r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames[columnNamesIndex].ValueString())
					}
					userProvided = &shared.UserProvided{
						ColumnNames: columnNames,
					}
				}
				if userProvided != nil {
					headerDefinition = &shared.CSVHeaderDefinition{
						UserProvided: userProvided,
					}
				}
			}
			ignoreErrorsOnFieldsMismatch := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsNull() {
				*ignoreErrorsOnFieldsMismatch = r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.ValueBool()
			} else {
				ignoreErrorsOnFieldsMismatch = nil
			}
			inferenceType := new(shared.InferenceType)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsNull() {
				*inferenceType = shared.InferenceType(r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.ValueString())
			} else {
				inferenceType = nil
			}
			nullValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues))
			for nullValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues {
				nullValues = append(nullValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues[nullValuesIndex].ValueString())
			}
			quoteChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsNull() {
				*quoteChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.ValueString()
			} else {
				quoteChar = nil
			}
			skipRowsAfterHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsNull() {
				*skipRowsAfterHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.ValueInt64()
			} else {
				skipRowsAfterHeader = nil
			}
			skipRowsBeforeHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsNull() {
				*skipRowsBeforeHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.ValueInt64()
			} else {
				skipRowsBeforeHeader = nil
			}
			stringsCanBeNull := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsNull() {
				*stringsCanBeNull = r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.ValueBool()
			} else {
				stringsCanBeNull = nil
			}
			trueValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues))
			for trueValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues {
				trueValues = append(trueValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues[trueValuesIndex].ValueString())
			}
			csvFormat = &shared.CSVFormat{
				Delimiter:                    delimiter,
				DoubleQuote:                  doubleQuote,
				Encoding:                     encoding,
				EscapeChar:                   escapeChar,
				FalseValues:                  falseValues,
				HeaderDefinition:             headerDefinition,
				IgnoreErrorsOnFieldsMismatch: ignoreErrorsOnFieldsMismatch,
				InferenceType:                inferenceType,
				NullValues:                   nullValues,
				QuoteChar:                    quoteChar,
				SkipRowsAfterHeader:          skipRowsAfterHeader,
				SkipRowsBeforeHeader:         skipRowsBeforeHeader,
				StringsCanBeNull:             stringsCanBeNull,
				TrueValues:                   trueValues,
			}
		}
		if csvFormat != nil {
			format = shared.Format{
				CSVFormat: csvFormat,
			}
		}
		var jsonlFormat *shared.JsonlFormat
		if r.Configuration.Streams[streamsIndex].Format.JsonlFormat != nil {
			jsonlFormat = &shared.JsonlFormat{}
		}
		if jsonlFormat != nil {
			format = shared.Format{
				JsonlFormat: jsonlFormat,
			}
		}
		var parquetFormat *shared.ParquetFormat
		if r.Configuration.Streams[streamsIndex].Format.ParquetFormat != nil {
			decimalAsFloat := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsNull() {
				*decimalAsFloat = r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.ValueBool()
			} else {
				decimalAsFloat = nil
			}
			parquetFormat = &shared.ParquetFormat{
				DecimalAsFloat: decimalAsFloat,
			}
		}
		if parquetFormat != nil {
			format = shared.Format{
				ParquetFormat: parquetFormat,
			}
		}
		var unstructuredDocumentFormat *shared.UnstructuredDocumentFormat
		if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat != nil {
			var processing *shared.Processing
			if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing != nil {
				var local *shared.Local
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.Local != nil {
					local = &shared.Local{}
				}
				if local != nil {
					processing = &shared.Processing{
						Local: local,
					}
				}
			}
			skipUnprocessableFiles := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsNull() {
				*skipUnprocessableFiles = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.ValueBool()
			} else {
				skipUnprocessableFiles = nil
			}
			strategy := new(shared.ParsingStrategy)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsNull() {
				*strategy = shared.ParsingStrategy(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.ValueString())
			} else {
				strategy = nil
			}
			unstructuredDocumentFormat = &shared.UnstructuredDocumentFormat{
				Processing:             processing,
				SkipUnprocessableFiles: skipUnprocessableFiles,
				Strategy:               strategy,
			}
		}
		if unstructuredDocumentFormat != nil {
			format = shared.Format{
				UnstructuredDocumentFormat: unstructuredDocumentFormat,
			}
		}
		var excelFormat *shared.ExcelFormat
		if r.Configuration.Streams[streamsIndex].Format.ExcelFormat != nil {
			excelFormat = &shared.ExcelFormat{}
		}
		if excelFormat != nil {
			format = shared.Format{
				ExcelFormat: excelFormat,
			}
		}
		globs := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Globs))
		for globsIndex := range r.Configuration.Streams[streamsIndex].Globs {
			globs = append(globs, r.Configuration.Streams[streamsIndex].Globs[globsIndex].ValueString())
		}
		inputSchema := new(string)
		if !r.Configuration.Streams[streamsIndex].InputSchema.IsUnknown() && !r.Configuration.Streams[streamsIndex].InputSchema.IsNull() {
			*inputSchema = r.Configuration.Streams[streamsIndex].InputSchema.ValueString()
		} else {
			inputSchema = nil
		}
		legacyPrefix := new(string)
		if !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsUnknown() && !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsNull() {
			*legacyPrefix = r.Configuration.Streams[streamsIndex].LegacyPrefix.ValueString()
		} else {
			legacyPrefix = nil
		}
		var name1 string
		name1 = r.Configuration.Streams[streamsIndex].Name.ValueString()

		primaryKey := new(string)
		if !r.Configuration.Streams[streamsIndex].PrimaryKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].PrimaryKey.IsNull() {
			*primaryKey = r.Configuration.Streams[streamsIndex].PrimaryKey.ValueString()
		} else {
			primaryKey = nil
		}
		recentNFilesToReadForSchemaDiscovery := new(int64)
		if !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsNull() {
			*recentNFilesToReadForSchemaDiscovery = r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.ValueInt64()
		} else {
			recentNFilesToReadForSchemaDiscovery = nil
		}
		schemaless := new(bool)
		if !r.Configuration.Streams[streamsIndex].Schemaless.IsUnknown() && !r.Configuration.Streams[streamsIndex].Schemaless.IsNull() {
			*schemaless = r.Configuration.Streams[streamsIndex].Schemaless.ValueBool()
		} else {
			schemaless = nil
		}
		useFirstFoundFileForSchemaDiscovery := new(bool)
		if !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsNull() {
			*useFirstFoundFileForSchemaDiscovery = r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.ValueBool()
		} else {
			useFirstFoundFileForSchemaDiscovery = nil
		}
		validationPolicy := new(shared.ValidationPolicy)
		if !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsUnknown() && !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsNull() {
			*validationPolicy = shared.ValidationPolicy(r.Configuration.Streams[streamsIndex].ValidationPolicy.ValueString())
		} else {
			validationPolicy = nil
		}
		streams = append(streams, shared.FileBasedStreamConfig{
			DaysToSyncIfHistoryIsFull:            daysToSyncIfHistoryIsFull,
			Format:                               format,
			Globs:                                globs,
			InputSchema:                          inputSchema,
			LegacyPrefix:                         legacyPrefix,
			Name:                                 name1,
			PrimaryKey:                           primaryKey,
			RecentNFilesToReadForSchemaDiscovery: recentNFilesToReadForSchemaDiscovery,
			Schemaless:                           schemaless,
			UseFirstFoundFileForSchemaDiscovery:  useFirstFoundFileForSchemaDiscovery,
			ValidationPolicy:                     validationPolicy,
		})
	}
	configuration := shared.SourceAzureBlobStorage{
		AzureBlobStorageAccountName:   azureBlobStorageAccountName,
		AzureBlobStorageContainerName: azureBlobStorageContainerName,
		AzureBlobStorageEndpoint:      azureBlobStorageEndpoint,
		Credentials:                   credentials,
		DeliveryMethod:                deliveryMethod,
		StartDate:                     startDate,
		Streams:                       streams,
	}
	secretID := new(string)
	if !r.SecretID.IsUnknown() && !r.SecretID.IsNull() {
		*secretID = r.SecretID.ValueString()
	} else {
		secretID = nil
	}
	out := shared.SourceAzureBlobStorageCreateRequest{
		Name:          name,
		DefinitionID:  definitionID,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
		SecretID:      secretID,
	}

	return &out, diags
}

func (r *SourceAzureBlobStorageResourceModel) ToSharedSourceAzureBlobStoragePutRequest(ctx context.Context) (*shared.SourceAzureBlobStoragePutRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	azureBlobStorageAccountName := new(string)
	if !r.Configuration.AzureBlobStorageAccountName.IsUnknown() && !r.Configuration.AzureBlobStorageAccountName.IsNull() {
		*azureBlobStorageAccountName = r.Configuration.AzureBlobStorageAccountName.ValueString()
	} else {
		azureBlobStorageAccountName = nil
	}
	azureBlobStorageContainerName := new(string)
	if !r.Configuration.AzureBlobStorageContainerName.IsUnknown() && !r.Configuration.AzureBlobStorageContainerName.IsNull() {
		*azureBlobStorageContainerName = r.Configuration.AzureBlobStorageContainerName.ValueString()
	} else {
		azureBlobStorageContainerName = nil
	}
	azureBlobStorageEndpoint := new(string)
	if !r.Configuration.AzureBlobStorageEndpoint.IsUnknown() && !r.Configuration.AzureBlobStorageEndpoint.IsNull() {
		*azureBlobStorageEndpoint = r.Configuration.AzureBlobStorageEndpoint.ValueString()
	} else {
		azureBlobStorageEndpoint = nil
	}
	var credentials *shared.SourceAzureBlobStorageUpdateAuthentication
	var sourceAzureBlobStorageUpdateAuthenticateViaOauth2 *shared.SourceAzureBlobStorageUpdateAuthenticateViaOauth2
	if r.Configuration.Credentials.AuthenticateViaOauth2 != nil {
		clientID := new(string)
		if !r.Configuration.Credentials.AuthenticateViaOauth2.ClientID.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaOauth2.ClientID.IsNull() {
			*clientID = r.Configuration.Credentials.AuthenticateViaOauth2.ClientID.ValueString()
		} else {
			clientID = nil
		}
		clientSecret := new(string)
		if !r.Configuration.Credentials.AuthenticateViaOauth2.ClientSecret.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaOauth2.ClientSecret.IsNull() {
			*clientSecret = r.Configuration.Credentials.AuthenticateViaOauth2.ClientSecret.ValueString()
		} else {
			clientSecret = nil
		}
		refreshToken := new(string)
		if !r.Configuration.Credentials.AuthenticateViaOauth2.RefreshToken.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaOauth2.RefreshToken.IsNull() {
			*refreshToken = r.Configuration.Credentials.AuthenticateViaOauth2.RefreshToken.ValueString()
		} else {
			refreshToken = nil
		}
		tenantID := new(string)
		if !r.Configuration.Credentials.AuthenticateViaOauth2.TenantID.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaOauth2.TenantID.IsNull() {
			*tenantID = r.Configuration.Credentials.AuthenticateViaOauth2.TenantID.ValueString()
		} else {
			tenantID = nil
		}
		sourceAzureBlobStorageUpdateAuthenticateViaOauth2 = &shared.SourceAzureBlobStorageUpdateAuthenticateViaOauth2{
			ClientID:     clientID,
			ClientSecret: clientSecret,
			RefreshToken: refreshToken,
			TenantID:     tenantID,
		}
	}
	if sourceAzureBlobStorageUpdateAuthenticateViaOauth2 != nil {
		credentials = &shared.SourceAzureBlobStorageUpdateAuthentication{
			SourceAzureBlobStorageUpdateAuthenticateViaOauth2: sourceAzureBlobStorageUpdateAuthenticateViaOauth2,
		}
	}
	var sourceAzureBlobStorageUpdateAuthenticateViaClientCredentials *shared.SourceAzureBlobStorageUpdateAuthenticateViaClientCredentials
	if r.Configuration.Credentials.AuthenticateViaClientCredentials != nil {
		appClientID := new(string)
		if !r.Configuration.Credentials.AuthenticateViaClientCredentials.AppClientID.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaClientCredentials.AppClientID.IsNull() {
			*appClientID = r.Configuration.Credentials.AuthenticateViaClientCredentials.AppClientID.ValueString()
		} else {
			appClientID = nil
		}
		appClientSecret := new(string)
		if !r.Configuration.Credentials.AuthenticateViaClientCredentials.AppClientSecret.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaClientCredentials.AppClientSecret.IsNull() {
			*appClientSecret = r.Configuration.Credentials.AuthenticateViaClientCredentials.AppClientSecret.ValueString()
		} else {
			appClientSecret = nil
		}
		appTenantID := new(string)
		if !r.Configuration.Credentials.AuthenticateViaClientCredentials.AppTenantID.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaClientCredentials.AppTenantID.IsNull() {
			*appTenantID = r.Configuration.Credentials.AuthenticateViaClientCredentials.AppTenantID.ValueString()
		} else {
			appTenantID = nil
		}
		sourceAzureBlobStorageUpdateAuthenticateViaClientCredentials = &shared.SourceAzureBlobStorageUpdateAuthenticateViaClientCredentials{
			AppClientID:     appClientID,
			AppClientSecret: appClientSecret,
			AppTenantID:     appTenantID,
		}
	}
	if sourceAzureBlobStorageUpdateAuthenticateViaClientCredentials != nil {
		credentials = &shared.SourceAzureBlobStorageUpdateAuthentication{
			SourceAzureBlobStorageUpdateAuthenticateViaClientCredentials: sourceAzureBlobStorageUpdateAuthenticateViaClientCredentials,
		}
	}
	var sourceAzureBlobStorageUpdateAuthenticateViaStorageAccountKey *shared.SourceAzureBlobStorageUpdateAuthenticateViaStorageAccountKey
	if r.Configuration.Credentials.AuthenticateViaStorageAccountKey != nil {
		azureBlobStorageAccountKey := new(string)
		if !r.Configuration.Credentials.AuthenticateViaStorageAccountKey.AzureBlobStorageAccountKey.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaStorageAccountKey.AzureBlobStorageAccountKey.IsNull() {
			*azureBlobStorageAccountKey = r.Configuration.Credentials.AuthenticateViaStorageAccountKey.AzureBlobStorageAccountKey.ValueString()
		} else {
			azureBlobStorageAccountKey = nil
		}
		sourceAzureBlobStorageUpdateAuthenticateViaStorageAccountKey = &shared.SourceAzureBlobStorageUpdateAuthenticateViaStorageAccountKey{
			AzureBlobStorageAccountKey: azureBlobStorageAccountKey,
		}
	}
	if sourceAzureBlobStorageUpdateAuthenticateViaStorageAccountKey != nil {
		credentials = &shared.SourceAzureBlobStorageUpdateAuthentication{
			SourceAzureBlobStorageUpdateAuthenticateViaStorageAccountKey: sourceAzureBlobStorageUpdateAuthenticateViaStorageAccountKey,
		}
	}
	var deliveryMethod *shared.SourceAzureBlobStorageUpdateDeliveryMethod
	if r.Configuration.DeliveryMethod != nil {
		var sourceAzureBlobStorageUpdateReplicateRecords *shared.SourceAzureBlobStorageUpdateReplicateRecords
		if r.Configuration.DeliveryMethod.ReplicateRecords != nil {
			sourceAzureBlobStorageUpdateReplicateRecords = &shared.SourceAzureBlobStorageUpdateReplicateRecords{}
		}
		if sourceAzureBlobStorageUpdateReplicateRecords != nil {
			deliveryMethod = &shared.SourceAzureBlobStorageUpdateDeliveryMethod{
				SourceAzureBlobStorageUpdateReplicateRecords: sourceAzureBlobStorageUpdateReplicateRecords,
			}
		}
		var sourceAzureBlobStorageUpdateCopyRawFiles *shared.SourceAzureBlobStorageUpdateCopyRawFiles
		if r.Configuration.DeliveryMethod.CopyRawFiles != nil {
			preserveDirectoryStructure := new(bool)
			if !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsUnknown() && !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsNull() {
				*preserveDirectoryStructure = r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.ValueBool()
			} else {
				preserveDirectoryStructure = nil
			}
			sourceAzureBlobStorageUpdateCopyRawFiles = &shared.SourceAzureBlobStorageUpdateCopyRawFiles{
				PreserveDirectoryStructure: preserveDirectoryStructure,
			}
		}
		if sourceAzureBlobStorageUpdateCopyRawFiles != nil {
			deliveryMethod = &shared.SourceAzureBlobStorageUpdateDeliveryMethod{
				SourceAzureBlobStorageUpdateCopyRawFiles: sourceAzureBlobStorageUpdateCopyRawFiles,
			}
		}
	}
	startDate := new(time.Time)
	if !r.Configuration.StartDate.IsUnknown() && !r.Configuration.StartDate.IsNull() {
		*startDate, _ = time.Parse(time.RFC3339Nano, r.Configuration.StartDate.ValueString())
	} else {
		startDate = nil
	}
	streams := make([]shared.SourceAzureBlobStorageUpdateFileBasedStreamConfig, 0, len(r.Configuration.Streams))
	for streamsIndex := range r.Configuration.Streams {
		daysToSyncIfHistoryIsFull := new(int64)
		if !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsUnknown() && !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsNull() {
			*daysToSyncIfHistoryIsFull = r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.ValueInt64()
		} else {
			daysToSyncIfHistoryIsFull = nil
		}
		var format *shared.SourceAzureBlobStorageUpdateFormat
		var sourceAzureBlobStorageUpdateAvroFormat *shared.SourceAzureBlobStorageUpdateAvroFormat
		if r.Configuration.Streams[streamsIndex].Format.AvroFormat != nil {
			doubleAsString := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsNull() {
				*doubleAsString = r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.ValueBool()
			} else {
				doubleAsString = nil
			}
			sourceAzureBlobStorageUpdateAvroFormat = &shared.SourceAzureBlobStorageUpdateAvroFormat{
				DoubleAsString: doubleAsString,
			}
		}
		if sourceAzureBlobStorageUpdateAvroFormat != nil {
			format = &shared.SourceAzureBlobStorageUpdateFormat{
				SourceAzureBlobStorageUpdateAvroFormat: sourceAzureBlobStorageUpdateAvroFormat,
			}
		}
		var sourceAzureBlobStorageUpdateCSVFormat *shared.SourceAzureBlobStorageUpdateCSVFormat
		if r.Configuration.Streams[streamsIndex].Format.CSVFormat != nil {
			delimiter := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsNull() {
				*delimiter = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.ValueString()
			} else {
				delimiter = nil
			}
			doubleQuote := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsNull() {
				*doubleQuote = r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.ValueBool()
			} else {
				doubleQuote = nil
			}
			encoding := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsNull() {
				*encoding = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.ValueString()
			} else {
				encoding = nil
			}
			escapeChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsNull() {
				*escapeChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.ValueString()
			} else {
				escapeChar = nil
			}
			falseValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues))
			for falseValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues {
				falseValues = append(falseValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues[falseValuesIndex].ValueString())
			}
			var headerDefinition *shared.SourceAzureBlobStorageUpdateCSVHeaderDefinition
			if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition != nil {
				var sourceAzureBlobStorageUpdateFromCSV *shared.SourceAzureBlobStorageUpdateFromCSV
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.FromCSV != nil {
					sourceAzureBlobStorageUpdateFromCSV = &shared.SourceAzureBlobStorageUpdateFromCSV{}
				}
				if sourceAzureBlobStorageUpdateFromCSV != nil {
					headerDefinition = &shared.SourceAzureBlobStorageUpdateCSVHeaderDefinition{
						SourceAzureBlobStorageUpdateFromCSV: sourceAzureBlobStorageUpdateFromCSV,
					}
				}
				var sourceAzureBlobStorageUpdateAutogenerated *shared.SourceAzureBlobStorageUpdateAutogenerated
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.Autogenerated != nil {
					sourceAzureBlobStorageUpdateAutogenerated = &shared.SourceAzureBlobStorageUpdateAutogenerated{}
				}
				if sourceAzureBlobStorageUpdateAutogenerated != nil {
					headerDefinition = &shared.SourceAzureBlobStorageUpdateCSVHeaderDefinition{
						SourceAzureBlobStorageUpdateAutogenerated: sourceAzureBlobStorageUpdateAutogenerated,
					}
				}
				var sourceAzureBlobStorageUpdateUserProvided *shared.SourceAzureBlobStorageUpdateUserProvided
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided != nil {
					columnNames := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames))
					for columnNamesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames {
						columnNames = append(columnNames, r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames[columnNamesIndex].ValueString())
					}
					sourceAzureBlobStorageUpdateUserProvided = &shared.SourceAzureBlobStorageUpdateUserProvided{
						ColumnNames: columnNames,
					}
				}
				if sourceAzureBlobStorageUpdateUserProvided != nil {
					headerDefinition = &shared.SourceAzureBlobStorageUpdateCSVHeaderDefinition{
						SourceAzureBlobStorageUpdateUserProvided: sourceAzureBlobStorageUpdateUserProvided,
					}
				}
			}
			ignoreErrorsOnFieldsMismatch := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsNull() {
				*ignoreErrorsOnFieldsMismatch = r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.ValueBool()
			} else {
				ignoreErrorsOnFieldsMismatch = nil
			}
			inferenceType := new(shared.SourceAzureBlobStorageUpdateInferenceType)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsNull() {
				*inferenceType = shared.SourceAzureBlobStorageUpdateInferenceType(r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.ValueString())
			} else {
				inferenceType = nil
			}
			nullValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues))
			for nullValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues {
				nullValues = append(nullValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues[nullValuesIndex].ValueString())
			}
			quoteChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsNull() {
				*quoteChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.ValueString()
			} else {
				quoteChar = nil
			}
			skipRowsAfterHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsNull() {
				*skipRowsAfterHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.ValueInt64()
			} else {
				skipRowsAfterHeader = nil
			}
			skipRowsBeforeHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsNull() {
				*skipRowsBeforeHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.ValueInt64()
			} else {
				skipRowsBeforeHeader = nil
			}
			stringsCanBeNull := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsNull() {
				*stringsCanBeNull = r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.ValueBool()
			} else {
				stringsCanBeNull = nil
			}
			trueValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues))
			for trueValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues {
				trueValues = append(trueValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues[trueValuesIndex].ValueString())
			}
			sourceAzureBlobStorageUpdateCSVFormat = &shared.SourceAzureBlobStorageUpdateCSVFormat{
				Delimiter:                    delimiter,
				DoubleQuote:                  doubleQuote,
				Encoding:                     encoding,
				EscapeChar:                   escapeChar,
				FalseValues:                  falseValues,
				HeaderDefinition:             headerDefinition,
				IgnoreErrorsOnFieldsMismatch: ignoreErrorsOnFieldsMismatch,
				InferenceType:                inferenceType,
				NullValues:                   nullValues,
				QuoteChar:                    quoteChar,
				SkipRowsAfterHeader:          skipRowsAfterHeader,
				SkipRowsBeforeHeader:         skipRowsBeforeHeader,
				StringsCanBeNull:             stringsCanBeNull,
				TrueValues:                   trueValues,
			}
		}
		if sourceAzureBlobStorageUpdateCSVFormat != nil {
			format = &shared.SourceAzureBlobStorageUpdateFormat{
				SourceAzureBlobStorageUpdateCSVFormat: sourceAzureBlobStorageUpdateCSVFormat,
			}
		}
		var sourceAzureBlobStorageUpdateJsonlFormat *shared.SourceAzureBlobStorageUpdateJsonlFormat
		if r.Configuration.Streams[streamsIndex].Format.JsonlFormat != nil {
			sourceAzureBlobStorageUpdateJsonlFormat = &shared.SourceAzureBlobStorageUpdateJsonlFormat{}
		}
		if sourceAzureBlobStorageUpdateJsonlFormat != nil {
			format = &shared.SourceAzureBlobStorageUpdateFormat{
				SourceAzureBlobStorageUpdateJsonlFormat: sourceAzureBlobStorageUpdateJsonlFormat,
			}
		}
		var sourceAzureBlobStorageUpdateParquetFormat *shared.SourceAzureBlobStorageUpdateParquetFormat
		if r.Configuration.Streams[streamsIndex].Format.ParquetFormat != nil {
			decimalAsFloat := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsNull() {
				*decimalAsFloat = r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.ValueBool()
			} else {
				decimalAsFloat = nil
			}
			sourceAzureBlobStorageUpdateParquetFormat = &shared.SourceAzureBlobStorageUpdateParquetFormat{
				DecimalAsFloat: decimalAsFloat,
			}
		}
		if sourceAzureBlobStorageUpdateParquetFormat != nil {
			format = &shared.SourceAzureBlobStorageUpdateFormat{
				SourceAzureBlobStorageUpdateParquetFormat: sourceAzureBlobStorageUpdateParquetFormat,
			}
		}
		var sourceAzureBlobStorageUpdateUnstructuredDocumentFormat *shared.SourceAzureBlobStorageUpdateUnstructuredDocumentFormat
		if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat != nil {
			var processing *shared.SourceAzureBlobStorageUpdateProcessing
			if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing != nil {
				var sourceAzureBlobStorageUpdateLocal *shared.SourceAzureBlobStorageUpdateLocal
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.Local != nil {
					sourceAzureBlobStorageUpdateLocal = &shared.SourceAzureBlobStorageUpdateLocal{}
				}
				if sourceAzureBlobStorageUpdateLocal != nil {
					processing = &shared.SourceAzureBlobStorageUpdateProcessing{
						SourceAzureBlobStorageUpdateLocal: sourceAzureBlobStorageUpdateLocal,
					}
				}
			}
			skipUnprocessableFiles := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsNull() {
				*skipUnprocessableFiles = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.ValueBool()
			} else {
				skipUnprocessableFiles = nil
			}
			strategy := new(shared.SourceAzureBlobStorageUpdateParsingStrategy)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsNull() {
				*strategy = shared.SourceAzureBlobStorageUpdateParsingStrategy(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.ValueString())
			} else {
				strategy = nil
			}
			sourceAzureBlobStorageUpdateUnstructuredDocumentFormat = &shared.SourceAzureBlobStorageUpdateUnstructuredDocumentFormat{
				Processing:             processing,
				SkipUnprocessableFiles: skipUnprocessableFiles,
				Strategy:               strategy,
			}
		}
		if sourceAzureBlobStorageUpdateUnstructuredDocumentFormat != nil {
			format = &shared.SourceAzureBlobStorageUpdateFormat{
				SourceAzureBlobStorageUpdateUnstructuredDocumentFormat: sourceAzureBlobStorageUpdateUnstructuredDocumentFormat,
			}
		}
		var sourceAzureBlobStorageUpdateExcelFormat *shared.SourceAzureBlobStorageUpdateExcelFormat
		if r.Configuration.Streams[streamsIndex].Format.ExcelFormat != nil {
			sourceAzureBlobStorageUpdateExcelFormat = &shared.SourceAzureBlobStorageUpdateExcelFormat{}
		}
		if sourceAzureBlobStorageUpdateExcelFormat != nil {
			format = &shared.SourceAzureBlobStorageUpdateFormat{
				SourceAzureBlobStorageUpdateExcelFormat: sourceAzureBlobStorageUpdateExcelFormat,
			}
		}
		globs := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Globs))
		for globsIndex := range r.Configuration.Streams[streamsIndex].Globs {
			globs = append(globs, r.Configuration.Streams[streamsIndex].Globs[globsIndex].ValueString())
		}
		inputSchema := new(string)
		if !r.Configuration.Streams[streamsIndex].InputSchema.IsUnknown() && !r.Configuration.Streams[streamsIndex].InputSchema.IsNull() {
			*inputSchema = r.Configuration.Streams[streamsIndex].InputSchema.ValueString()
		} else {
			inputSchema = nil
		}
		legacyPrefix := new(string)
		if !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsUnknown() && !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsNull() {
			*legacyPrefix = r.Configuration.Streams[streamsIndex].LegacyPrefix.ValueString()
		} else {
			legacyPrefix = nil
		}
		name1 := new(string)
		if !r.Configuration.Streams[streamsIndex].Name.IsUnknown() && !r.Configuration.Streams[streamsIndex].Name.IsNull() {
			*name1 = r.Configuration.Streams[streamsIndex].Name.ValueString()
		} else {
			name1 = nil
		}
		primaryKey := new(string)
		if !r.Configuration.Streams[streamsIndex].PrimaryKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].PrimaryKey.IsNull() {
			*primaryKey = r.Configuration.Streams[streamsIndex].PrimaryKey.ValueString()
		} else {
			primaryKey = nil
		}
		recentNFilesToReadForSchemaDiscovery := new(int64)
		if !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsNull() {
			*recentNFilesToReadForSchemaDiscovery = r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.ValueInt64()
		} else {
			recentNFilesToReadForSchemaDiscovery = nil
		}
		schemaless := new(bool)
		if !r.Configuration.Streams[streamsIndex].Schemaless.IsUnknown() && !r.Configuration.Streams[streamsIndex].Schemaless.IsNull() {
			*schemaless = r.Configuration.Streams[streamsIndex].Schemaless.ValueBool()
		} else {
			schemaless = nil
		}
		useFirstFoundFileForSchemaDiscovery := new(bool)
		if !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsNull() {
			*useFirstFoundFileForSchemaDiscovery = r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.ValueBool()
		} else {
			useFirstFoundFileForSchemaDiscovery = nil
		}
		validationPolicy := new(shared.SourceAzureBlobStorageUpdateValidationPolicy)
		if !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsUnknown() && !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsNull() {
			*validationPolicy = shared.SourceAzureBlobStorageUpdateValidationPolicy(r.Configuration.Streams[streamsIndex].ValidationPolicy.ValueString())
		} else {
			validationPolicy = nil
		}
		streams = append(streams, shared.SourceAzureBlobStorageUpdateFileBasedStreamConfig{
			DaysToSyncIfHistoryIsFull:            daysToSyncIfHistoryIsFull,
			Format:                               format,
			Globs:                                globs,
			InputSchema:                          inputSchema,
			LegacyPrefix:                         legacyPrefix,
			Name:                                 name1,
			PrimaryKey:                           primaryKey,
			RecentNFilesToReadForSchemaDiscovery: recentNFilesToReadForSchemaDiscovery,
			Schemaless:                           schemaless,
			UseFirstFoundFileForSchemaDiscovery:  useFirstFoundFileForSchemaDiscovery,
			ValidationPolicy:                     validationPolicy,
		})
	}
	configuration := shared.SourceAzureBlobStorageUpdate{
		AzureBlobStorageAccountName:   azureBlobStorageAccountName,
		AzureBlobStorageContainerName: azureBlobStorageContainerName,
		AzureBlobStorageEndpoint:      azureBlobStorageEndpoint,
		Credentials:                   credentials,
		DeliveryMethod:                deliveryMethod,
		StartDate:                     startDate,
		Streams:                       streams,
	}
	out := shared.SourceAzureBlobStoragePutRequest{
		Name:          name,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
	}

	return &out, diags
}
