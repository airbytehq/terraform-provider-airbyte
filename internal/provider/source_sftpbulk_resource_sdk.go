// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	tfTypes "github.com/airbytehq/terraform-provider-airbyte/internal/provider/types"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/operations"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"time"
)

func (r *SourceSftpBulkResourceModel) RefreshFromSharedSourceResponse(ctx context.Context, resp *shared.SourceResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		configurationPriorData := r.Configuration
		r.Configuration = &tfTypes.SourceSftpBulk{}
		r.Configuration.Credentials = configurationPriorData.Credentials
		r.Configuration.DeliveryMethod = configurationPriorData.DeliveryMethod
		r.Configuration.FolderPath = configurationPriorData.FolderPath
		r.Configuration.Host = configurationPriorData.Host
		r.Configuration.Port = configurationPriorData.Port
		r.Configuration.StartDate = configurationPriorData.StartDate
		r.Configuration.Streams = configurationPriorData.Streams
		r.Configuration.Username = configurationPriorData.Username
		r.CreatedAt = types.Int64Value(resp.CreatedAt)
		r.DefinitionID = types.StringValue(resp.DefinitionID)
		r.Name = types.StringValue(resp.Name)
		if resp.ResourceAllocation == nil {
			r.ResourceAllocation = nil
		} else {
			r.ResourceAllocation = &tfTypes.ScopedResourceRequirements{}
			if resp.ResourceAllocation.Default == nil {
				r.ResourceAllocation.Default = nil
			} else {
				r.ResourceAllocation.Default = &tfTypes.ResourceRequirements{}
				r.ResourceAllocation.Default.CPULimit = types.StringPointerValue(resp.ResourceAllocation.Default.CPULimit)
				r.ResourceAllocation.Default.CPURequest = types.StringPointerValue(resp.ResourceAllocation.Default.CPURequest)
				r.ResourceAllocation.Default.EphemeralStorageLimit = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageLimit)
				r.ResourceAllocation.Default.EphemeralStorageRequest = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageRequest)
				r.ResourceAllocation.Default.MemoryLimit = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryLimit)
				r.ResourceAllocation.Default.MemoryRequest = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryRequest)
			}
			r.ResourceAllocation.JobSpecific = []tfTypes.JobTypeResourceLimit{}

			for _, jobSpecificItem := range resp.ResourceAllocation.JobSpecific {
				var jobSpecific tfTypes.JobTypeResourceLimit

				jobSpecific.JobType = types.StringValue(string(jobSpecificItem.JobType))
				jobSpecific.ResourceRequirements = &tfTypes.ResourceRequirements{}
				jobSpecific.ResourceRequirements.CPULimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPULimit)
				jobSpecific.ResourceRequirements.CPURequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPURequest)
				jobSpecific.ResourceRequirements.EphemeralStorageLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageLimit)
				jobSpecific.ResourceRequirements.EphemeralStorageRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageRequest)
				jobSpecific.ResourceRequirements.MemoryLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryLimit)
				jobSpecific.ResourceRequirements.MemoryRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryRequest)

				r.ResourceAllocation.JobSpecific = append(r.ResourceAllocation.JobSpecific, jobSpecific)
			}
		}
		r.SourceID = types.StringValue(resp.SourceID)
		r.SourceType = types.StringValue(resp.SourceType)
		r.WorkspaceID = types.StringValue(resp.WorkspaceID)
	}

	return diags
}

func (r *SourceSftpBulkResourceModel) ToOperationsDeleteSourceSftpBulkRequest(ctx context.Context) (*operations.DeleteSourceSftpBulkRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	out := operations.DeleteSourceSftpBulkRequest{
		SourceID: sourceID,
	}

	return &out, diags
}

func (r *SourceSftpBulkResourceModel) ToOperationsGetSourceSftpBulkRequest(ctx context.Context) (*operations.GetSourceSftpBulkRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	out := operations.GetSourceSftpBulkRequest{
		SourceID: sourceID,
	}

	return &out, diags
}

func (r *SourceSftpBulkResourceModel) ToOperationsPutSourceSftpBulkRequest(ctx context.Context) (*operations.PutSourceSftpBulkRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	sourceSftpBulkPutRequest, sourceSftpBulkPutRequestDiags := r.ToSharedSourceSftpBulkPutRequest(ctx)
	diags.Append(sourceSftpBulkPutRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.PutSourceSftpBulkRequest{
		SourceID:                 sourceID,
		SourceSftpBulkPutRequest: *sourceSftpBulkPutRequest,
	}

	return &out, diags
}

func (r *SourceSftpBulkResourceModel) ToSharedSourceSftpBulkCreateRequest(ctx context.Context) (*shared.SourceSftpBulkCreateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	definitionID := new(string)
	if !r.DefinitionID.IsUnknown() && !r.DefinitionID.IsNull() {
		*definitionID = r.DefinitionID.ValueString()
	} else {
		definitionID = nil
	}
	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	var credentials shared.SourceSftpBulkAuthentication
	var authenticateViaPassword *shared.AuthenticateViaPassword
	if r.Configuration.Credentials.AuthenticateViaPassword != nil {
		var password string
		password = r.Configuration.Credentials.AuthenticateViaPassword.Password.ValueString()

		authenticateViaPassword = &shared.AuthenticateViaPassword{
			Password: password,
		}
	}
	if authenticateViaPassword != nil {
		credentials = shared.SourceSftpBulkAuthentication{
			AuthenticateViaPassword: authenticateViaPassword,
		}
	}
	var authenticateViaPrivateKey *shared.AuthenticateViaPrivateKey
	if r.Configuration.Credentials.AuthenticateViaPrivateKey != nil {
		var privateKey string
		privateKey = r.Configuration.Credentials.AuthenticateViaPrivateKey.PrivateKey.ValueString()

		authenticateViaPrivateKey = &shared.AuthenticateViaPrivateKey{
			PrivateKey: privateKey,
		}
	}
	if authenticateViaPrivateKey != nil {
		credentials = shared.SourceSftpBulkAuthentication{
			AuthenticateViaPrivateKey: authenticateViaPrivateKey,
		}
	}
	var deliveryMethod *shared.SourceSftpBulkDeliveryMethod
	if r.Configuration.DeliveryMethod != nil {
		var sourceSftpBulkReplicateRecords *shared.SourceSftpBulkReplicateRecords
		if r.Configuration.DeliveryMethod.ReplicateRecords != nil {
			sourceSftpBulkReplicateRecords = &shared.SourceSftpBulkReplicateRecords{}
		}
		if sourceSftpBulkReplicateRecords != nil {
			deliveryMethod = &shared.SourceSftpBulkDeliveryMethod{
				SourceSftpBulkReplicateRecords: sourceSftpBulkReplicateRecords,
			}
		}
		var sourceSftpBulkCopyRawFiles *shared.SourceSftpBulkCopyRawFiles
		if r.Configuration.DeliveryMethod.CopyRawFiles != nil {
			preserveDirectoryStructure := new(bool)
			if !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsUnknown() && !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsNull() {
				*preserveDirectoryStructure = r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.ValueBool()
			} else {
				preserveDirectoryStructure = nil
			}
			sourceSftpBulkCopyRawFiles = &shared.SourceSftpBulkCopyRawFiles{
				PreserveDirectoryStructure: preserveDirectoryStructure,
			}
		}
		if sourceSftpBulkCopyRawFiles != nil {
			deliveryMethod = &shared.SourceSftpBulkDeliveryMethod{
				SourceSftpBulkCopyRawFiles: sourceSftpBulkCopyRawFiles,
			}
		}
	}
	folderPath := new(string)
	if !r.Configuration.FolderPath.IsUnknown() && !r.Configuration.FolderPath.IsNull() {
		*folderPath = r.Configuration.FolderPath.ValueString()
	} else {
		folderPath = nil
	}
	var host string
	host = r.Configuration.Host.ValueString()

	port := new(int64)
	if !r.Configuration.Port.IsUnknown() && !r.Configuration.Port.IsNull() {
		*port = r.Configuration.Port.ValueInt64()
	} else {
		port = nil
	}
	startDate := new(time.Time)
	if !r.Configuration.StartDate.IsUnknown() && !r.Configuration.StartDate.IsNull() {
		*startDate, _ = time.Parse(time.RFC3339Nano, r.Configuration.StartDate.ValueString())
	} else {
		startDate = nil
	}
	streams := make([]shared.SourceSftpBulkFileBasedStreamConfig, 0, len(r.Configuration.Streams))
	for streamsIndex := range r.Configuration.Streams {
		daysToSyncIfHistoryIsFull := new(int64)
		if !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsUnknown() && !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsNull() {
			*daysToSyncIfHistoryIsFull = r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.ValueInt64()
		} else {
			daysToSyncIfHistoryIsFull = nil
		}
		var format shared.SourceSftpBulkFormat
		var sourceSftpBulkAvroFormat *shared.SourceSftpBulkAvroFormat
		if r.Configuration.Streams[streamsIndex].Format.AvroFormat != nil {
			doubleAsString := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsNull() {
				*doubleAsString = r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.ValueBool()
			} else {
				doubleAsString = nil
			}
			sourceSftpBulkAvroFormat = &shared.SourceSftpBulkAvroFormat{
				DoubleAsString: doubleAsString,
			}
		}
		if sourceSftpBulkAvroFormat != nil {
			format = shared.SourceSftpBulkFormat{
				SourceSftpBulkAvroFormat: sourceSftpBulkAvroFormat,
			}
		}
		var sourceSftpBulkCSVFormat *shared.SourceSftpBulkCSVFormat
		if r.Configuration.Streams[streamsIndex].Format.CSVFormat != nil {
			delimiter := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsNull() {
				*delimiter = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.ValueString()
			} else {
				delimiter = nil
			}
			doubleQuote := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsNull() {
				*doubleQuote = r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.ValueBool()
			} else {
				doubleQuote = nil
			}
			encoding := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsNull() {
				*encoding = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.ValueString()
			} else {
				encoding = nil
			}
			escapeChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsNull() {
				*escapeChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.ValueString()
			} else {
				escapeChar = nil
			}
			falseValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues))
			for falseValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues {
				falseValues = append(falseValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues[falseValuesIndex].ValueString())
			}
			var headerDefinition *shared.SourceSftpBulkCSVHeaderDefinition
			if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition != nil {
				var sourceSftpBulkFromCSV *shared.SourceSftpBulkFromCSV
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.FromCSV != nil {
					sourceSftpBulkFromCSV = &shared.SourceSftpBulkFromCSV{}
				}
				if sourceSftpBulkFromCSV != nil {
					headerDefinition = &shared.SourceSftpBulkCSVHeaderDefinition{
						SourceSftpBulkFromCSV: sourceSftpBulkFromCSV,
					}
				}
				var sourceSftpBulkAutogenerated *shared.SourceSftpBulkAutogenerated
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.Autogenerated != nil {
					sourceSftpBulkAutogenerated = &shared.SourceSftpBulkAutogenerated{}
				}
				if sourceSftpBulkAutogenerated != nil {
					headerDefinition = &shared.SourceSftpBulkCSVHeaderDefinition{
						SourceSftpBulkAutogenerated: sourceSftpBulkAutogenerated,
					}
				}
				var sourceSftpBulkUserProvided *shared.SourceSftpBulkUserProvided
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided != nil {
					columnNames := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames))
					for columnNamesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames {
						columnNames = append(columnNames, r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames[columnNamesIndex].ValueString())
					}
					sourceSftpBulkUserProvided = &shared.SourceSftpBulkUserProvided{
						ColumnNames: columnNames,
					}
				}
				if sourceSftpBulkUserProvided != nil {
					headerDefinition = &shared.SourceSftpBulkCSVHeaderDefinition{
						SourceSftpBulkUserProvided: sourceSftpBulkUserProvided,
					}
				}
			}
			ignoreErrorsOnFieldsMismatch := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsNull() {
				*ignoreErrorsOnFieldsMismatch = r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.ValueBool()
			} else {
				ignoreErrorsOnFieldsMismatch = nil
			}
			inferenceType := new(shared.SourceSftpBulkInferenceType)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsNull() {
				*inferenceType = shared.SourceSftpBulkInferenceType(r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.ValueString())
			} else {
				inferenceType = nil
			}
			nullValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues))
			for nullValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues {
				nullValues = append(nullValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues[nullValuesIndex].ValueString())
			}
			quoteChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsNull() {
				*quoteChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.ValueString()
			} else {
				quoteChar = nil
			}
			skipRowsAfterHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsNull() {
				*skipRowsAfterHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.ValueInt64()
			} else {
				skipRowsAfterHeader = nil
			}
			skipRowsBeforeHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsNull() {
				*skipRowsBeforeHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.ValueInt64()
			} else {
				skipRowsBeforeHeader = nil
			}
			stringsCanBeNull := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsNull() {
				*stringsCanBeNull = r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.ValueBool()
			} else {
				stringsCanBeNull = nil
			}
			trueValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues))
			for trueValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues {
				trueValues = append(trueValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues[trueValuesIndex].ValueString())
			}
			sourceSftpBulkCSVFormat = &shared.SourceSftpBulkCSVFormat{
				Delimiter:                    delimiter,
				DoubleQuote:                  doubleQuote,
				Encoding:                     encoding,
				EscapeChar:                   escapeChar,
				FalseValues:                  falseValues,
				HeaderDefinition:             headerDefinition,
				IgnoreErrorsOnFieldsMismatch: ignoreErrorsOnFieldsMismatch,
				InferenceType:                inferenceType,
				NullValues:                   nullValues,
				QuoteChar:                    quoteChar,
				SkipRowsAfterHeader:          skipRowsAfterHeader,
				SkipRowsBeforeHeader:         skipRowsBeforeHeader,
				StringsCanBeNull:             stringsCanBeNull,
				TrueValues:                   trueValues,
			}
		}
		if sourceSftpBulkCSVFormat != nil {
			format = shared.SourceSftpBulkFormat{
				SourceSftpBulkCSVFormat: sourceSftpBulkCSVFormat,
			}
		}
		var sourceSftpBulkJsonlFormat *shared.SourceSftpBulkJsonlFormat
		if r.Configuration.Streams[streamsIndex].Format.JsonlFormat != nil {
			sourceSftpBulkJsonlFormat = &shared.SourceSftpBulkJsonlFormat{}
		}
		if sourceSftpBulkJsonlFormat != nil {
			format = shared.SourceSftpBulkFormat{
				SourceSftpBulkJsonlFormat: sourceSftpBulkJsonlFormat,
			}
		}
		var sourceSftpBulkParquetFormat *shared.SourceSftpBulkParquetFormat
		if r.Configuration.Streams[streamsIndex].Format.ParquetFormat != nil {
			decimalAsFloat := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsNull() {
				*decimalAsFloat = r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.ValueBool()
			} else {
				decimalAsFloat = nil
			}
			sourceSftpBulkParquetFormat = &shared.SourceSftpBulkParquetFormat{
				DecimalAsFloat: decimalAsFloat,
			}
		}
		if sourceSftpBulkParquetFormat != nil {
			format = shared.SourceSftpBulkFormat{
				SourceSftpBulkParquetFormat: sourceSftpBulkParquetFormat,
			}
		}
		var sourceSftpBulkUnstructuredDocumentFormat *shared.SourceSftpBulkUnstructuredDocumentFormat
		if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat != nil {
			var processing *shared.SourceSftpBulkProcessing
			if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing != nil {
				var sourceSftpBulkLocal *shared.SourceSftpBulkLocal
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.Local != nil {
					sourceSftpBulkLocal = &shared.SourceSftpBulkLocal{}
				}
				if sourceSftpBulkLocal != nil {
					processing = &shared.SourceSftpBulkProcessing{
						SourceSftpBulkLocal: sourceSftpBulkLocal,
					}
				}
				var sourceSftpBulkViaAPI *shared.SourceSftpBulkViaAPI
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI != nil {
					apiKey := new(string)
					if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.IsNull() {
						*apiKey = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.ValueString()
					} else {
						apiKey = nil
					}
					apiURL := new(string)
					if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.IsNull() {
						*apiURL = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.ValueString()
					} else {
						apiURL = nil
					}
					parameters := make([]shared.SourceSftpBulkAPIParameterConfigModel, 0, len(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters))
					for parametersIndex := range r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters {
						var name1 string
						name1 = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Name.ValueString()

						var value string
						value = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Value.ValueString()

						parameters = append(parameters, shared.SourceSftpBulkAPIParameterConfigModel{
							Name:  name1,
							Value: value,
						})
					}
					sourceSftpBulkViaAPI = &shared.SourceSftpBulkViaAPI{
						APIKey:     apiKey,
						APIURL:     apiURL,
						Parameters: parameters,
					}
				}
				if sourceSftpBulkViaAPI != nil {
					processing = &shared.SourceSftpBulkProcessing{
						SourceSftpBulkViaAPI: sourceSftpBulkViaAPI,
					}
				}
			}
			skipUnprocessableFiles := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsNull() {
				*skipUnprocessableFiles = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.ValueBool()
			} else {
				skipUnprocessableFiles = nil
			}
			strategy := new(shared.SourceSftpBulkParsingStrategy)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsNull() {
				*strategy = shared.SourceSftpBulkParsingStrategy(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.ValueString())
			} else {
				strategy = nil
			}
			sourceSftpBulkUnstructuredDocumentFormat = &shared.SourceSftpBulkUnstructuredDocumentFormat{
				Processing:             processing,
				SkipUnprocessableFiles: skipUnprocessableFiles,
				Strategy:               strategy,
			}
		}
		if sourceSftpBulkUnstructuredDocumentFormat != nil {
			format = shared.SourceSftpBulkFormat{
				SourceSftpBulkUnstructuredDocumentFormat: sourceSftpBulkUnstructuredDocumentFormat,
			}
		}
		var sourceSftpBulkExcelFormat *shared.SourceSftpBulkExcelFormat
		if r.Configuration.Streams[streamsIndex].Format.ExcelFormat != nil {
			sourceSftpBulkExcelFormat = &shared.SourceSftpBulkExcelFormat{}
		}
		if sourceSftpBulkExcelFormat != nil {
			format = shared.SourceSftpBulkFormat{
				SourceSftpBulkExcelFormat: sourceSftpBulkExcelFormat,
			}
		}
		globs := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Globs))
		for globsIndex := range r.Configuration.Streams[streamsIndex].Globs {
			globs = append(globs, r.Configuration.Streams[streamsIndex].Globs[globsIndex].ValueString())
		}
		inputSchema := new(string)
		if !r.Configuration.Streams[streamsIndex].InputSchema.IsUnknown() && !r.Configuration.Streams[streamsIndex].InputSchema.IsNull() {
			*inputSchema = r.Configuration.Streams[streamsIndex].InputSchema.ValueString()
		} else {
			inputSchema = nil
		}
		legacyPrefix := new(string)
		if !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsUnknown() && !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsNull() {
			*legacyPrefix = r.Configuration.Streams[streamsIndex].LegacyPrefix.ValueString()
		} else {
			legacyPrefix = nil
		}
		var name2 string
		name2 = r.Configuration.Streams[streamsIndex].Name.ValueString()

		primaryKey := new(string)
		if !r.Configuration.Streams[streamsIndex].PrimaryKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].PrimaryKey.IsNull() {
			*primaryKey = r.Configuration.Streams[streamsIndex].PrimaryKey.ValueString()
		} else {
			primaryKey = nil
		}
		recentNFilesToReadForSchemaDiscovery := new(int64)
		if !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsNull() {
			*recentNFilesToReadForSchemaDiscovery = r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.ValueInt64()
		} else {
			recentNFilesToReadForSchemaDiscovery = nil
		}
		schemaless := new(bool)
		if !r.Configuration.Streams[streamsIndex].Schemaless.IsUnknown() && !r.Configuration.Streams[streamsIndex].Schemaless.IsNull() {
			*schemaless = r.Configuration.Streams[streamsIndex].Schemaless.ValueBool()
		} else {
			schemaless = nil
		}
		useFirstFoundFileForSchemaDiscovery := new(bool)
		if !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsNull() {
			*useFirstFoundFileForSchemaDiscovery = r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.ValueBool()
		} else {
			useFirstFoundFileForSchemaDiscovery = nil
		}
		validationPolicy := new(shared.SourceSftpBulkValidationPolicy)
		if !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsUnknown() && !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsNull() {
			*validationPolicy = shared.SourceSftpBulkValidationPolicy(r.Configuration.Streams[streamsIndex].ValidationPolicy.ValueString())
		} else {
			validationPolicy = nil
		}
		streams = append(streams, shared.SourceSftpBulkFileBasedStreamConfig{
			DaysToSyncIfHistoryIsFull:            daysToSyncIfHistoryIsFull,
			Format:                               format,
			Globs:                                globs,
			InputSchema:                          inputSchema,
			LegacyPrefix:                         legacyPrefix,
			Name:                                 name2,
			PrimaryKey:                           primaryKey,
			RecentNFilesToReadForSchemaDiscovery: recentNFilesToReadForSchemaDiscovery,
			Schemaless:                           schemaless,
			UseFirstFoundFileForSchemaDiscovery:  useFirstFoundFileForSchemaDiscovery,
			ValidationPolicy:                     validationPolicy,
		})
	}
	var username string
	username = r.Configuration.Username.ValueString()

	configuration := shared.SourceSftpBulk{
		Credentials:    credentials,
		DeliveryMethod: deliveryMethod,
		FolderPath:     folderPath,
		Host:           host,
		Port:           port,
		StartDate:      startDate,
		Streams:        streams,
		Username:       username,
	}
	secretID := new(string)
	if !r.SecretID.IsUnknown() && !r.SecretID.IsNull() {
		*secretID = r.SecretID.ValueString()
	} else {
		secretID = nil
	}
	out := shared.SourceSftpBulkCreateRequest{
		Name:          name,
		DefinitionID:  definitionID,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
		SecretID:      secretID,
	}

	return &out, diags
}

func (r *SourceSftpBulkResourceModel) ToSharedSourceSftpBulkPutRequest(ctx context.Context) (*shared.SourceSftpBulkPutRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	var credentials *shared.SourceSftpBulkUpdateAuthentication
	var sourceSftpBulkUpdateAuthenticateViaPassword *shared.SourceSftpBulkUpdateAuthenticateViaPassword
	if r.Configuration.Credentials.AuthenticateViaPassword != nil {
		password := new(string)
		if !r.Configuration.Credentials.AuthenticateViaPassword.Password.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaPassword.Password.IsNull() {
			*password = r.Configuration.Credentials.AuthenticateViaPassword.Password.ValueString()
		} else {
			password = nil
		}
		sourceSftpBulkUpdateAuthenticateViaPassword = &shared.SourceSftpBulkUpdateAuthenticateViaPassword{
			Password: password,
		}
	}
	if sourceSftpBulkUpdateAuthenticateViaPassword != nil {
		credentials = &shared.SourceSftpBulkUpdateAuthentication{
			SourceSftpBulkUpdateAuthenticateViaPassword: sourceSftpBulkUpdateAuthenticateViaPassword,
		}
	}
	var sourceSftpBulkUpdateAuthenticateViaPrivateKey *shared.SourceSftpBulkUpdateAuthenticateViaPrivateKey
	if r.Configuration.Credentials.AuthenticateViaPrivateKey != nil {
		privateKey := new(string)
		if !r.Configuration.Credentials.AuthenticateViaPrivateKey.PrivateKey.IsUnknown() && !r.Configuration.Credentials.AuthenticateViaPrivateKey.PrivateKey.IsNull() {
			*privateKey = r.Configuration.Credentials.AuthenticateViaPrivateKey.PrivateKey.ValueString()
		} else {
			privateKey = nil
		}
		sourceSftpBulkUpdateAuthenticateViaPrivateKey = &shared.SourceSftpBulkUpdateAuthenticateViaPrivateKey{
			PrivateKey: privateKey,
		}
	}
	if sourceSftpBulkUpdateAuthenticateViaPrivateKey != nil {
		credentials = &shared.SourceSftpBulkUpdateAuthentication{
			SourceSftpBulkUpdateAuthenticateViaPrivateKey: sourceSftpBulkUpdateAuthenticateViaPrivateKey,
		}
	}
	var deliveryMethod *shared.SourceSftpBulkUpdateDeliveryMethod
	if r.Configuration.DeliveryMethod != nil {
		var sourceSftpBulkUpdateReplicateRecords *shared.SourceSftpBulkUpdateReplicateRecords
		if r.Configuration.DeliveryMethod.ReplicateRecords != nil {
			sourceSftpBulkUpdateReplicateRecords = &shared.SourceSftpBulkUpdateReplicateRecords{}
		}
		if sourceSftpBulkUpdateReplicateRecords != nil {
			deliveryMethod = &shared.SourceSftpBulkUpdateDeliveryMethod{
				SourceSftpBulkUpdateReplicateRecords: sourceSftpBulkUpdateReplicateRecords,
			}
		}
		var sourceSftpBulkUpdateCopyRawFiles *shared.SourceSftpBulkUpdateCopyRawFiles
		if r.Configuration.DeliveryMethod.CopyRawFiles != nil {
			preserveDirectoryStructure := new(bool)
			if !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsUnknown() && !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsNull() {
				*preserveDirectoryStructure = r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.ValueBool()
			} else {
				preserveDirectoryStructure = nil
			}
			sourceSftpBulkUpdateCopyRawFiles = &shared.SourceSftpBulkUpdateCopyRawFiles{
				PreserveDirectoryStructure: preserveDirectoryStructure,
			}
		}
		if sourceSftpBulkUpdateCopyRawFiles != nil {
			deliveryMethod = &shared.SourceSftpBulkUpdateDeliveryMethod{
				SourceSftpBulkUpdateCopyRawFiles: sourceSftpBulkUpdateCopyRawFiles,
			}
		}
	}
	folderPath := new(string)
	if !r.Configuration.FolderPath.IsUnknown() && !r.Configuration.FolderPath.IsNull() {
		*folderPath = r.Configuration.FolderPath.ValueString()
	} else {
		folderPath = nil
	}
	host := new(string)
	if !r.Configuration.Host.IsUnknown() && !r.Configuration.Host.IsNull() {
		*host = r.Configuration.Host.ValueString()
	} else {
		host = nil
	}
	port := new(int64)
	if !r.Configuration.Port.IsUnknown() && !r.Configuration.Port.IsNull() {
		*port = r.Configuration.Port.ValueInt64()
	} else {
		port = nil
	}
	startDate := new(time.Time)
	if !r.Configuration.StartDate.IsUnknown() && !r.Configuration.StartDate.IsNull() {
		*startDate, _ = time.Parse(time.RFC3339Nano, r.Configuration.StartDate.ValueString())
	} else {
		startDate = nil
	}
	streams := make([]shared.SourceSftpBulkUpdateFileBasedStreamConfig, 0, len(r.Configuration.Streams))
	for streamsIndex := range r.Configuration.Streams {
		daysToSyncIfHistoryIsFull := new(int64)
		if !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsUnknown() && !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsNull() {
			*daysToSyncIfHistoryIsFull = r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.ValueInt64()
		} else {
			daysToSyncIfHistoryIsFull = nil
		}
		var format *shared.SourceSftpBulkUpdateFormat
		var sourceSftpBulkUpdateAvroFormat *shared.SourceSftpBulkUpdateAvroFormat
		if r.Configuration.Streams[streamsIndex].Format.AvroFormat != nil {
			doubleAsString := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsNull() {
				*doubleAsString = r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.ValueBool()
			} else {
				doubleAsString = nil
			}
			sourceSftpBulkUpdateAvroFormat = &shared.SourceSftpBulkUpdateAvroFormat{
				DoubleAsString: doubleAsString,
			}
		}
		if sourceSftpBulkUpdateAvroFormat != nil {
			format = &shared.SourceSftpBulkUpdateFormat{
				SourceSftpBulkUpdateAvroFormat: sourceSftpBulkUpdateAvroFormat,
			}
		}
		var sourceSftpBulkUpdateCSVFormat *shared.SourceSftpBulkUpdateCSVFormat
		if r.Configuration.Streams[streamsIndex].Format.CSVFormat != nil {
			delimiter := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsNull() {
				*delimiter = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.ValueString()
			} else {
				delimiter = nil
			}
			doubleQuote := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsNull() {
				*doubleQuote = r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.ValueBool()
			} else {
				doubleQuote = nil
			}
			encoding := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsNull() {
				*encoding = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.ValueString()
			} else {
				encoding = nil
			}
			escapeChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsNull() {
				*escapeChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.ValueString()
			} else {
				escapeChar = nil
			}
			falseValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues))
			for falseValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues {
				falseValues = append(falseValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues[falseValuesIndex].ValueString())
			}
			var headerDefinition *shared.SourceSftpBulkUpdateCSVHeaderDefinition
			if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition != nil {
				var sourceSftpBulkUpdateFromCSV *shared.SourceSftpBulkUpdateFromCSV
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.FromCSV != nil {
					sourceSftpBulkUpdateFromCSV = &shared.SourceSftpBulkUpdateFromCSV{}
				}
				if sourceSftpBulkUpdateFromCSV != nil {
					headerDefinition = &shared.SourceSftpBulkUpdateCSVHeaderDefinition{
						SourceSftpBulkUpdateFromCSV: sourceSftpBulkUpdateFromCSV,
					}
				}
				var sourceSftpBulkUpdateAutogenerated *shared.SourceSftpBulkUpdateAutogenerated
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.Autogenerated != nil {
					sourceSftpBulkUpdateAutogenerated = &shared.SourceSftpBulkUpdateAutogenerated{}
				}
				if sourceSftpBulkUpdateAutogenerated != nil {
					headerDefinition = &shared.SourceSftpBulkUpdateCSVHeaderDefinition{
						SourceSftpBulkUpdateAutogenerated: sourceSftpBulkUpdateAutogenerated,
					}
				}
				var sourceSftpBulkUpdateUserProvided *shared.SourceSftpBulkUpdateUserProvided
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided != nil {
					columnNames := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames))
					for columnNamesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames {
						columnNames = append(columnNames, r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames[columnNamesIndex].ValueString())
					}
					sourceSftpBulkUpdateUserProvided = &shared.SourceSftpBulkUpdateUserProvided{
						ColumnNames: columnNames,
					}
				}
				if sourceSftpBulkUpdateUserProvided != nil {
					headerDefinition = &shared.SourceSftpBulkUpdateCSVHeaderDefinition{
						SourceSftpBulkUpdateUserProvided: sourceSftpBulkUpdateUserProvided,
					}
				}
			}
			ignoreErrorsOnFieldsMismatch := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsNull() {
				*ignoreErrorsOnFieldsMismatch = r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.ValueBool()
			} else {
				ignoreErrorsOnFieldsMismatch = nil
			}
			inferenceType := new(shared.SourceSftpBulkUpdateInferenceType)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsNull() {
				*inferenceType = shared.SourceSftpBulkUpdateInferenceType(r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.ValueString())
			} else {
				inferenceType = nil
			}
			nullValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues))
			for nullValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues {
				nullValues = append(nullValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues[nullValuesIndex].ValueString())
			}
			quoteChar := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsNull() {
				*quoteChar = r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.ValueString()
			} else {
				quoteChar = nil
			}
			skipRowsAfterHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsNull() {
				*skipRowsAfterHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.ValueInt64()
			} else {
				skipRowsAfterHeader = nil
			}
			skipRowsBeforeHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsNull() {
				*skipRowsBeforeHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.ValueInt64()
			} else {
				skipRowsBeforeHeader = nil
			}
			stringsCanBeNull := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsNull() {
				*stringsCanBeNull = r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.ValueBool()
			} else {
				stringsCanBeNull = nil
			}
			trueValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues))
			for trueValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues {
				trueValues = append(trueValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues[trueValuesIndex].ValueString())
			}
			sourceSftpBulkUpdateCSVFormat = &shared.SourceSftpBulkUpdateCSVFormat{
				Delimiter:                    delimiter,
				DoubleQuote:                  doubleQuote,
				Encoding:                     encoding,
				EscapeChar:                   escapeChar,
				FalseValues:                  falseValues,
				HeaderDefinition:             headerDefinition,
				IgnoreErrorsOnFieldsMismatch: ignoreErrorsOnFieldsMismatch,
				InferenceType:                inferenceType,
				NullValues:                   nullValues,
				QuoteChar:                    quoteChar,
				SkipRowsAfterHeader:          skipRowsAfterHeader,
				SkipRowsBeforeHeader:         skipRowsBeforeHeader,
				StringsCanBeNull:             stringsCanBeNull,
				TrueValues:                   trueValues,
			}
		}
		if sourceSftpBulkUpdateCSVFormat != nil {
			format = &shared.SourceSftpBulkUpdateFormat{
				SourceSftpBulkUpdateCSVFormat: sourceSftpBulkUpdateCSVFormat,
			}
		}
		var sourceSftpBulkUpdateJsonlFormat *shared.SourceSftpBulkUpdateJsonlFormat
		if r.Configuration.Streams[streamsIndex].Format.JsonlFormat != nil {
			sourceSftpBulkUpdateJsonlFormat = &shared.SourceSftpBulkUpdateJsonlFormat{}
		}
		if sourceSftpBulkUpdateJsonlFormat != nil {
			format = &shared.SourceSftpBulkUpdateFormat{
				SourceSftpBulkUpdateJsonlFormat: sourceSftpBulkUpdateJsonlFormat,
			}
		}
		var sourceSftpBulkUpdateParquetFormat *shared.SourceSftpBulkUpdateParquetFormat
		if r.Configuration.Streams[streamsIndex].Format.ParquetFormat != nil {
			decimalAsFloat := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsNull() {
				*decimalAsFloat = r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.ValueBool()
			} else {
				decimalAsFloat = nil
			}
			sourceSftpBulkUpdateParquetFormat = &shared.SourceSftpBulkUpdateParquetFormat{
				DecimalAsFloat: decimalAsFloat,
			}
		}
		if sourceSftpBulkUpdateParquetFormat != nil {
			format = &shared.SourceSftpBulkUpdateFormat{
				SourceSftpBulkUpdateParquetFormat: sourceSftpBulkUpdateParquetFormat,
			}
		}
		var sourceSftpBulkUpdateUnstructuredDocumentFormat *shared.SourceSftpBulkUpdateUnstructuredDocumentFormat
		if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat != nil {
			var processing *shared.SourceSftpBulkUpdateProcessing
			if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing != nil {
				var sourceSftpBulkUpdateLocal *shared.SourceSftpBulkUpdateLocal
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.Local != nil {
					sourceSftpBulkUpdateLocal = &shared.SourceSftpBulkUpdateLocal{}
				}
				if sourceSftpBulkUpdateLocal != nil {
					processing = &shared.SourceSftpBulkUpdateProcessing{
						SourceSftpBulkUpdateLocal: sourceSftpBulkUpdateLocal,
					}
				}
				var sourceSftpBulkUpdateViaAPI *shared.SourceSftpBulkUpdateViaAPI
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI != nil {
					apiKey := new(string)
					if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.IsNull() {
						*apiKey = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIKey.ValueString()
					} else {
						apiKey = nil
					}
					apiURL := new(string)
					if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.IsNull() {
						*apiURL = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.APIURL.ValueString()
					} else {
						apiURL = nil
					}
					parameters := make([]shared.SourceSftpBulkUpdateAPIParameterConfigModel, 0, len(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters))
					for parametersIndex := range r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters {
						name1 := new(string)
						if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Name.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Name.IsNull() {
							*name1 = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Name.ValueString()
						} else {
							name1 = nil
						}
						value := new(string)
						if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Value.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Value.IsNull() {
							*value = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.ViaAPI.Parameters[parametersIndex].Value.ValueString()
						} else {
							value = nil
						}
						parameters = append(parameters, shared.SourceSftpBulkUpdateAPIParameterConfigModel{
							Name:  name1,
							Value: value,
						})
					}
					sourceSftpBulkUpdateViaAPI = &shared.SourceSftpBulkUpdateViaAPI{
						APIKey:     apiKey,
						APIURL:     apiURL,
						Parameters: parameters,
					}
				}
				if sourceSftpBulkUpdateViaAPI != nil {
					processing = &shared.SourceSftpBulkUpdateProcessing{
						SourceSftpBulkUpdateViaAPI: sourceSftpBulkUpdateViaAPI,
					}
				}
			}
			skipUnprocessableFiles := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsNull() {
				*skipUnprocessableFiles = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.ValueBool()
			} else {
				skipUnprocessableFiles = nil
			}
			strategy := new(shared.SourceSftpBulkUpdateParsingStrategy)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsNull() {
				*strategy = shared.SourceSftpBulkUpdateParsingStrategy(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.ValueString())
			} else {
				strategy = nil
			}
			sourceSftpBulkUpdateUnstructuredDocumentFormat = &shared.SourceSftpBulkUpdateUnstructuredDocumentFormat{
				Processing:             processing,
				SkipUnprocessableFiles: skipUnprocessableFiles,
				Strategy:               strategy,
			}
		}
		if sourceSftpBulkUpdateUnstructuredDocumentFormat != nil {
			format = &shared.SourceSftpBulkUpdateFormat{
				SourceSftpBulkUpdateUnstructuredDocumentFormat: sourceSftpBulkUpdateUnstructuredDocumentFormat,
			}
		}
		var sourceSftpBulkUpdateExcelFormat *shared.SourceSftpBulkUpdateExcelFormat
		if r.Configuration.Streams[streamsIndex].Format.ExcelFormat != nil {
			sourceSftpBulkUpdateExcelFormat = &shared.SourceSftpBulkUpdateExcelFormat{}
		}
		if sourceSftpBulkUpdateExcelFormat != nil {
			format = &shared.SourceSftpBulkUpdateFormat{
				SourceSftpBulkUpdateExcelFormat: sourceSftpBulkUpdateExcelFormat,
			}
		}
		globs := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Globs))
		for globsIndex := range r.Configuration.Streams[streamsIndex].Globs {
			globs = append(globs, r.Configuration.Streams[streamsIndex].Globs[globsIndex].ValueString())
		}
		inputSchema := new(string)
		if !r.Configuration.Streams[streamsIndex].InputSchema.IsUnknown() && !r.Configuration.Streams[streamsIndex].InputSchema.IsNull() {
			*inputSchema = r.Configuration.Streams[streamsIndex].InputSchema.ValueString()
		} else {
			inputSchema = nil
		}
		legacyPrefix := new(string)
		if !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsUnknown() && !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsNull() {
			*legacyPrefix = r.Configuration.Streams[streamsIndex].LegacyPrefix.ValueString()
		} else {
			legacyPrefix = nil
		}
		name2 := new(string)
		if !r.Configuration.Streams[streamsIndex].Name.IsUnknown() && !r.Configuration.Streams[streamsIndex].Name.IsNull() {
			*name2 = r.Configuration.Streams[streamsIndex].Name.ValueString()
		} else {
			name2 = nil
		}
		primaryKey := new(string)
		if !r.Configuration.Streams[streamsIndex].PrimaryKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].PrimaryKey.IsNull() {
			*primaryKey = r.Configuration.Streams[streamsIndex].PrimaryKey.ValueString()
		} else {
			primaryKey = nil
		}
		recentNFilesToReadForSchemaDiscovery := new(int64)
		if !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsNull() {
			*recentNFilesToReadForSchemaDiscovery = r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.ValueInt64()
		} else {
			recentNFilesToReadForSchemaDiscovery = nil
		}
		schemaless := new(bool)
		if !r.Configuration.Streams[streamsIndex].Schemaless.IsUnknown() && !r.Configuration.Streams[streamsIndex].Schemaless.IsNull() {
			*schemaless = r.Configuration.Streams[streamsIndex].Schemaless.ValueBool()
		} else {
			schemaless = nil
		}
		useFirstFoundFileForSchemaDiscovery := new(bool)
		if !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.IsNull() {
			*useFirstFoundFileForSchemaDiscovery = r.Configuration.Streams[streamsIndex].UseFirstFoundFileForSchemaDiscovery.ValueBool()
		} else {
			useFirstFoundFileForSchemaDiscovery = nil
		}
		validationPolicy := new(shared.SourceSftpBulkUpdateValidationPolicy)
		if !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsUnknown() && !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsNull() {
			*validationPolicy = shared.SourceSftpBulkUpdateValidationPolicy(r.Configuration.Streams[streamsIndex].ValidationPolicy.ValueString())
		} else {
			validationPolicy = nil
		}
		streams = append(streams, shared.SourceSftpBulkUpdateFileBasedStreamConfig{
			DaysToSyncIfHistoryIsFull:            daysToSyncIfHistoryIsFull,
			Format:                               format,
			Globs:                                globs,
			InputSchema:                          inputSchema,
			LegacyPrefix:                         legacyPrefix,
			Name:                                 name2,
			PrimaryKey:                           primaryKey,
			RecentNFilesToReadForSchemaDiscovery: recentNFilesToReadForSchemaDiscovery,
			Schemaless:                           schemaless,
			UseFirstFoundFileForSchemaDiscovery:  useFirstFoundFileForSchemaDiscovery,
			ValidationPolicy:                     validationPolicy,
		})
	}
	username := new(string)
	if !r.Configuration.Username.IsUnknown() && !r.Configuration.Username.IsNull() {
		*username = r.Configuration.Username.ValueString()
	} else {
		username = nil
	}
	configuration := shared.SourceSftpBulkUpdate{
		Credentials:    credentials,
		DeliveryMethod: deliveryMethod,
		FolderPath:     folderPath,
		Host:           host,
		Port:           port,
		StartDate:      startDate,
		Streams:        streams,
		Username:       username,
	}
	out := shared.SourceSftpBulkPutRequest{
		Name:          name,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
	}

	return &out, diags
}
