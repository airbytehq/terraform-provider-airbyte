// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	tfTypes "github.com/airbytehq/terraform-provider-airbyte/internal/provider/types"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/operations"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"time"
)

func (r *SourceS3ResourceModel) RefreshFromSharedSourceResponse(ctx context.Context, resp *shared.SourceResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		configurationPriorData := r.Configuration
		r.Configuration = &tfTypes.SourceS3{}
		if configurationPriorData != nil {
			r.Configuration.AwsAccessKeyID = configurationPriorData.AwsAccessKeyID
			r.Configuration.AwsSecretAccessKey = configurationPriorData.AwsSecretAccessKey
			r.Configuration.Bucket = configurationPriorData.Bucket
			r.Configuration.Dataset = configurationPriorData.Dataset
			r.Configuration.DeliveryMethod = configurationPriorData.DeliveryMethod
			r.Configuration.Endpoint = configurationPriorData.Endpoint
			r.Configuration.Format = configurationPriorData.Format
			r.Configuration.PathPattern = configurationPriorData.PathPattern
			r.Configuration.Provider = configurationPriorData.Provider
			r.Configuration.RegionName = configurationPriorData.RegionName
			r.Configuration.RoleArn = configurationPriorData.RoleArn
			r.Configuration.Schema = configurationPriorData.Schema
			r.Configuration.StartDate = configurationPriorData.StartDate
			r.Configuration.Streams = configurationPriorData.Streams
		}
		r.CreatedAt = types.Int64Value(resp.CreatedAt)
		r.DefinitionID = types.StringValue(resp.DefinitionID)
		r.Name = types.StringValue(resp.Name)
		if resp.ResourceAllocation == nil {
			r.ResourceAllocation = nil
		} else {
			r.ResourceAllocation = &tfTypes.ScopedResourceRequirements{}
			if resp.ResourceAllocation.Default == nil {
				r.ResourceAllocation.Default = nil
			} else {
				r.ResourceAllocation.Default = &tfTypes.ResourceRequirements{}
				r.ResourceAllocation.Default.CPULimit = types.StringPointerValue(resp.ResourceAllocation.Default.CPULimit)
				r.ResourceAllocation.Default.CPURequest = types.StringPointerValue(resp.ResourceAllocation.Default.CPURequest)
				r.ResourceAllocation.Default.EphemeralStorageLimit = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageLimit)
				r.ResourceAllocation.Default.EphemeralStorageRequest = types.StringPointerValue(resp.ResourceAllocation.Default.EphemeralStorageRequest)
				r.ResourceAllocation.Default.MemoryLimit = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryLimit)
				r.ResourceAllocation.Default.MemoryRequest = types.StringPointerValue(resp.ResourceAllocation.Default.MemoryRequest)
			}
			r.ResourceAllocation.JobSpecific = []tfTypes.JobTypeResourceLimit{}

			for _, jobSpecificItem := range resp.ResourceAllocation.JobSpecific {
				var jobSpecific tfTypes.JobTypeResourceLimit

				jobSpecific.JobType = types.StringValue(string(jobSpecificItem.JobType))
				jobSpecific.ResourceRequirements = &tfTypes.ResourceRequirements{}
				jobSpecific.ResourceRequirements.CPULimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPULimit)
				jobSpecific.ResourceRequirements.CPURequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.CPURequest)
				jobSpecific.ResourceRequirements.EphemeralStorageLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageLimit)
				jobSpecific.ResourceRequirements.EphemeralStorageRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.EphemeralStorageRequest)
				jobSpecific.ResourceRequirements.MemoryLimit = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryLimit)
				jobSpecific.ResourceRequirements.MemoryRequest = types.StringPointerValue(jobSpecificItem.ResourceRequirements.MemoryRequest)

				r.ResourceAllocation.JobSpecific = append(r.ResourceAllocation.JobSpecific, jobSpecific)
			}
		}
		r.SourceID = types.StringValue(resp.SourceID)
		r.SourceType = types.StringValue(resp.SourceType)
		r.WorkspaceID = types.StringValue(resp.WorkspaceID)
	}

	return diags
}

func (r *SourceS3ResourceModel) ToOperationsDeleteSourceS3Request(ctx context.Context) (*operations.DeleteSourceS3Request, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	out := operations.DeleteSourceS3Request{
		SourceID: sourceID,
	}

	return &out, diags
}

func (r *SourceS3ResourceModel) ToOperationsGetSourceS3Request(ctx context.Context) (*operations.GetSourceS3Request, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	out := operations.GetSourceS3Request{
		SourceID: sourceID,
	}

	return &out, diags
}

func (r *SourceS3ResourceModel) ToOperationsPutSourceS3Request(ctx context.Context) (*operations.PutSourceS3Request, diag.Diagnostics) {
	var diags diag.Diagnostics

	var sourceID string
	sourceID = r.SourceID.ValueString()

	sourceS3PutRequest, sourceS3PutRequestDiags := r.ToSharedSourceS3PutRequest(ctx)
	diags.Append(sourceS3PutRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.PutSourceS3Request{
		SourceID:           sourceID,
		SourceS3PutRequest: *sourceS3PutRequest,
	}

	return &out, diags
}

func (r *SourceS3ResourceModel) ToSharedSourceS3CreateRequest(ctx context.Context) (*shared.SourceS3CreateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	definitionID := new(string)
	if !r.DefinitionID.IsUnknown() && !r.DefinitionID.IsNull() {
		*definitionID = r.DefinitionID.ValueString()
	} else {
		definitionID = nil
	}
	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	awsAccessKeyID := new(string)
	if !r.Configuration.AwsAccessKeyID.IsUnknown() && !r.Configuration.AwsAccessKeyID.IsNull() {
		*awsAccessKeyID = r.Configuration.AwsAccessKeyID.ValueString()
	} else {
		awsAccessKeyID = nil
	}
	awsSecretAccessKey := new(string)
	if !r.Configuration.AwsSecretAccessKey.IsUnknown() && !r.Configuration.AwsSecretAccessKey.IsNull() {
		*awsSecretAccessKey = r.Configuration.AwsSecretAccessKey.ValueString()
	} else {
		awsSecretAccessKey = nil
	}
	var bucket string
	bucket = r.Configuration.Bucket.ValueString()

	dataset := new(string)
	if !r.Configuration.Dataset.IsUnknown() && !r.Configuration.Dataset.IsNull() {
		*dataset = r.Configuration.Dataset.ValueString()
	} else {
		dataset = nil
	}
	var deliveryMethod *shared.SourceS3DeliveryMethod
	if r.Configuration.DeliveryMethod != nil {
		var sourceS3ReplicateRecords *shared.SourceS3ReplicateRecords
		if r.Configuration.DeliveryMethod.ReplicateRecords != nil {
			sourceS3ReplicateRecords = &shared.SourceS3ReplicateRecords{}
		}
		if sourceS3ReplicateRecords != nil {
			deliveryMethod = &shared.SourceS3DeliveryMethod{
				SourceS3ReplicateRecords: sourceS3ReplicateRecords,
			}
		}
		var sourceS3CopyRawFiles *shared.SourceS3CopyRawFiles
		if r.Configuration.DeliveryMethod.CopyRawFiles != nil {
			preserveDirectoryStructure := new(bool)
			if !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsUnknown() && !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsNull() {
				*preserveDirectoryStructure = r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.ValueBool()
			} else {
				preserveDirectoryStructure = nil
			}
			sourceS3CopyRawFiles = &shared.SourceS3CopyRawFiles{
				PreserveDirectoryStructure: preserveDirectoryStructure,
			}
		}
		if sourceS3CopyRawFiles != nil {
			deliveryMethod = &shared.SourceS3DeliveryMethod{
				SourceS3CopyRawFiles: sourceS3CopyRawFiles,
			}
		}
	}
	endpoint := new(string)
	if !r.Configuration.Endpoint.IsUnknown() && !r.Configuration.Endpoint.IsNull() {
		*endpoint = r.Configuration.Endpoint.ValueString()
	} else {
		endpoint = nil
	}
	var format *shared.SourceS3FileFormat
	if r.Configuration.Format != nil {
		var csv *shared.Csv
		if r.Configuration.Format.Csv != nil {
			additionalReaderOptions := new(string)
			if !r.Configuration.Format.Csv.AdditionalReaderOptions.IsUnknown() && !r.Configuration.Format.Csv.AdditionalReaderOptions.IsNull() {
				*additionalReaderOptions = r.Configuration.Format.Csv.AdditionalReaderOptions.ValueString()
			} else {
				additionalReaderOptions = nil
			}
			advancedOptions := new(string)
			if !r.Configuration.Format.Csv.AdvancedOptions.IsUnknown() && !r.Configuration.Format.Csv.AdvancedOptions.IsNull() {
				*advancedOptions = r.Configuration.Format.Csv.AdvancedOptions.ValueString()
			} else {
				advancedOptions = nil
			}
			blockSize := new(int64)
			if !r.Configuration.Format.Csv.BlockSize.IsUnknown() && !r.Configuration.Format.Csv.BlockSize.IsNull() {
				*blockSize = r.Configuration.Format.Csv.BlockSize.ValueInt64()
			} else {
				blockSize = nil
			}
			delimiter := new(string)
			if !r.Configuration.Format.Csv.Delimiter.IsUnknown() && !r.Configuration.Format.Csv.Delimiter.IsNull() {
				*delimiter = r.Configuration.Format.Csv.Delimiter.ValueString()
			} else {
				delimiter = nil
			}
			doubleQuote := new(bool)
			if !r.Configuration.Format.Csv.DoubleQuote.IsUnknown() && !r.Configuration.Format.Csv.DoubleQuote.IsNull() {
				*doubleQuote = r.Configuration.Format.Csv.DoubleQuote.ValueBool()
			} else {
				doubleQuote = nil
			}
			encoding := new(string)
			if !r.Configuration.Format.Csv.Encoding.IsUnknown() && !r.Configuration.Format.Csv.Encoding.IsNull() {
				*encoding = r.Configuration.Format.Csv.Encoding.ValueString()
			} else {
				encoding = nil
			}
			escapeChar := new(string)
			if !r.Configuration.Format.Csv.EscapeChar.IsUnknown() && !r.Configuration.Format.Csv.EscapeChar.IsNull() {
				*escapeChar = r.Configuration.Format.Csv.EscapeChar.ValueString()
			} else {
				escapeChar = nil
			}
			inferDatatypes := new(bool)
			if !r.Configuration.Format.Csv.InferDatatypes.IsUnknown() && !r.Configuration.Format.Csv.InferDatatypes.IsNull() {
				*inferDatatypes = r.Configuration.Format.Csv.InferDatatypes.ValueBool()
			} else {
				inferDatatypes = nil
			}
			newlinesInValues := new(bool)
			if !r.Configuration.Format.Csv.NewlinesInValues.IsUnknown() && !r.Configuration.Format.Csv.NewlinesInValues.IsNull() {
				*newlinesInValues = r.Configuration.Format.Csv.NewlinesInValues.ValueBool()
			} else {
				newlinesInValues = nil
			}
			quoteChar := new(string)
			if !r.Configuration.Format.Csv.QuoteChar.IsUnknown() && !r.Configuration.Format.Csv.QuoteChar.IsNull() {
				*quoteChar = r.Configuration.Format.Csv.QuoteChar.ValueString()
			} else {
				quoteChar = nil
			}
			csv = &shared.Csv{
				AdditionalReaderOptions: additionalReaderOptions,
				AdvancedOptions:         advancedOptions,
				BlockSize:               blockSize,
				Delimiter:               delimiter,
				DoubleQuote:             doubleQuote,
				Encoding:                encoding,
				EscapeChar:              escapeChar,
				InferDatatypes:          inferDatatypes,
				NewlinesInValues:        newlinesInValues,
				QuoteChar:               quoteChar,
			}
		}
		if csv != nil {
			format = &shared.SourceS3FileFormat{
				Csv: csv,
			}
		}
		var parquet *shared.Parquet
		if r.Configuration.Format.Parquet != nil {
			batchSize := new(int64)
			if !r.Configuration.Format.Parquet.BatchSize.IsUnknown() && !r.Configuration.Format.Parquet.BatchSize.IsNull() {
				*batchSize = r.Configuration.Format.Parquet.BatchSize.ValueInt64()
			} else {
				batchSize = nil
			}
			bufferSize := new(int64)
			if !r.Configuration.Format.Parquet.BufferSize.IsUnknown() && !r.Configuration.Format.Parquet.BufferSize.IsNull() {
				*bufferSize = r.Configuration.Format.Parquet.BufferSize.ValueInt64()
			} else {
				bufferSize = nil
			}
			columns := make([]string, 0, len(r.Configuration.Format.Parquet.Columns))
			for columnsIndex := range r.Configuration.Format.Parquet.Columns {
				columns = append(columns, r.Configuration.Format.Parquet.Columns[columnsIndex].ValueString())
			}
			parquet = &shared.Parquet{
				BatchSize:  batchSize,
				BufferSize: bufferSize,
				Columns:    columns,
			}
		}
		if parquet != nil {
			format = &shared.SourceS3FileFormat{
				Parquet: parquet,
			}
		}
		var sourceS3Avro *shared.SourceS3Avro
		if r.Configuration.Format.Avro != nil {
			sourceS3Avro = &shared.SourceS3Avro{}
		}
		if sourceS3Avro != nil {
			format = &shared.SourceS3FileFormat{
				SourceS3Avro: sourceS3Avro,
			}
		}
		var jsonl *shared.Jsonl
		if r.Configuration.Format.Jsonl != nil {
			blockSize1 := new(int64)
			if !r.Configuration.Format.Jsonl.BlockSize.IsUnknown() && !r.Configuration.Format.Jsonl.BlockSize.IsNull() {
				*blockSize1 = r.Configuration.Format.Jsonl.BlockSize.ValueInt64()
			} else {
				blockSize1 = nil
			}
			newlinesInValues1 := new(bool)
			if !r.Configuration.Format.Jsonl.NewlinesInValues.IsUnknown() && !r.Configuration.Format.Jsonl.NewlinesInValues.IsNull() {
				*newlinesInValues1 = r.Configuration.Format.Jsonl.NewlinesInValues.ValueBool()
			} else {
				newlinesInValues1 = nil
			}
			unexpectedFieldBehavior := new(shared.UnexpectedFieldBehavior)
			if !r.Configuration.Format.Jsonl.UnexpectedFieldBehavior.IsUnknown() && !r.Configuration.Format.Jsonl.UnexpectedFieldBehavior.IsNull() {
				*unexpectedFieldBehavior = shared.UnexpectedFieldBehavior(r.Configuration.Format.Jsonl.UnexpectedFieldBehavior.ValueString())
			} else {
				unexpectedFieldBehavior = nil
			}
			jsonl = &shared.Jsonl{
				BlockSize:               blockSize1,
				NewlinesInValues:        newlinesInValues1,
				UnexpectedFieldBehavior: unexpectedFieldBehavior,
			}
		}
		if jsonl != nil {
			format = &shared.SourceS3FileFormat{
				Jsonl: jsonl,
			}
		}
	}
	pathPattern := new(string)
	if !r.Configuration.PathPattern.IsUnknown() && !r.Configuration.PathPattern.IsNull() {
		*pathPattern = r.Configuration.PathPattern.ValueString()
	} else {
		pathPattern = nil
	}
	var provider *shared.S3AmazonWebServices
	if r.Configuration.Provider != nil {
		awsAccessKeyId1 := new(string)
		if !r.Configuration.Provider.AwsAccessKeyID.IsUnknown() && !r.Configuration.Provider.AwsAccessKeyID.IsNull() {
			*awsAccessKeyId1 = r.Configuration.Provider.AwsAccessKeyID.ValueString()
		} else {
			awsAccessKeyId1 = nil
		}
		awsSecretAccessKey1 := new(string)
		if !r.Configuration.Provider.AwsSecretAccessKey.IsUnknown() && !r.Configuration.Provider.AwsSecretAccessKey.IsNull() {
			*awsSecretAccessKey1 = r.Configuration.Provider.AwsSecretAccessKey.ValueString()
		} else {
			awsSecretAccessKey1 = nil
		}
		bucket1 := new(string)
		if !r.Configuration.Provider.Bucket.IsUnknown() && !r.Configuration.Provider.Bucket.IsNull() {
			*bucket1 = r.Configuration.Provider.Bucket.ValueString()
		} else {
			bucket1 = nil
		}
		endpoint1 := new(string)
		if !r.Configuration.Provider.Endpoint.IsUnknown() && !r.Configuration.Provider.Endpoint.IsNull() {
			*endpoint1 = r.Configuration.Provider.Endpoint.ValueString()
		} else {
			endpoint1 = nil
		}
		pathPrefix := new(string)
		if !r.Configuration.Provider.PathPrefix.IsUnknown() && !r.Configuration.Provider.PathPrefix.IsNull() {
			*pathPrefix = r.Configuration.Provider.PathPrefix.ValueString()
		} else {
			pathPrefix = nil
		}
		regionName := new(string)
		if !r.Configuration.Provider.RegionName.IsUnknown() && !r.Configuration.Provider.RegionName.IsNull() {
			*regionName = r.Configuration.Provider.RegionName.ValueString()
		} else {
			regionName = nil
		}
		roleArn := new(string)
		if !r.Configuration.Provider.RoleArn.IsUnknown() && !r.Configuration.Provider.RoleArn.IsNull() {
			*roleArn = r.Configuration.Provider.RoleArn.ValueString()
		} else {
			roleArn = nil
		}
		startDate := new(time.Time)
		if !r.Configuration.Provider.StartDate.IsUnknown() && !r.Configuration.Provider.StartDate.IsNull() {
			*startDate, _ = time.Parse(time.RFC3339Nano, r.Configuration.Provider.StartDate.ValueString())
		} else {
			startDate = nil
		}
		provider = &shared.S3AmazonWebServices{
			AwsAccessKeyID:     awsAccessKeyId1,
			AwsSecretAccessKey: awsSecretAccessKey1,
			Bucket:             bucket1,
			Endpoint:           endpoint1,
			PathPrefix:         pathPrefix,
			RegionName:         regionName,
			RoleArn:            roleArn,
			StartDate:          startDate,
		}
	}
	regionName1 := new(string)
	if !r.Configuration.RegionName.IsUnknown() && !r.Configuration.RegionName.IsNull() {
		*regionName1 = r.Configuration.RegionName.ValueString()
	} else {
		regionName1 = nil
	}
	roleArn1 := new(string)
	if !r.Configuration.RoleArn.IsUnknown() && !r.Configuration.RoleArn.IsNull() {
		*roleArn1 = r.Configuration.RoleArn.ValueString()
	} else {
		roleArn1 = nil
	}
	schema := new(string)
	if !r.Configuration.Schema.IsUnknown() && !r.Configuration.Schema.IsNull() {
		*schema = r.Configuration.Schema.ValueString()
	} else {
		schema = nil
	}
	startDate1 := new(time.Time)
	if !r.Configuration.StartDate.IsUnknown() && !r.Configuration.StartDate.IsNull() {
		*startDate1, _ = time.Parse(time.RFC3339Nano, r.Configuration.StartDate.ValueString())
	} else {
		startDate1 = nil
	}
	streams := make([]shared.SourceS3FileBasedStreamConfig, 0, len(r.Configuration.Streams))
	for streamsIndex := range r.Configuration.Streams {
		daysToSyncIfHistoryIsFull := new(int64)
		if !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsUnknown() && !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsNull() {
			*daysToSyncIfHistoryIsFull = r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.ValueInt64()
		} else {
			daysToSyncIfHistoryIsFull = nil
		}
		var format1 shared.SourceS3Format
		var sourceS3AvroFormat *shared.SourceS3AvroFormat
		if r.Configuration.Streams[streamsIndex].Format.AvroFormat != nil {
			doubleAsString := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsNull() {
				*doubleAsString = r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.ValueBool()
			} else {
				doubleAsString = nil
			}
			sourceS3AvroFormat = &shared.SourceS3AvroFormat{
				DoubleAsString: doubleAsString,
			}
		}
		if sourceS3AvroFormat != nil {
			format1 = shared.SourceS3Format{
				SourceS3AvroFormat: sourceS3AvroFormat,
			}
		}
		var sourceS3CSVFormat *shared.SourceS3CSVFormat
		if r.Configuration.Streams[streamsIndex].Format.CSVFormat != nil {
			delimiter1 := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsNull() {
				*delimiter1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.ValueString()
			} else {
				delimiter1 = nil
			}
			doubleQuote1 := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsNull() {
				*doubleQuote1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.ValueBool()
			} else {
				doubleQuote1 = nil
			}
			encoding1 := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsNull() {
				*encoding1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.ValueString()
			} else {
				encoding1 = nil
			}
			escapeChar1 := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsNull() {
				*escapeChar1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.ValueString()
			} else {
				escapeChar1 = nil
			}
			falseValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues))
			for falseValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues {
				falseValues = append(falseValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues[falseValuesIndex].ValueString())
			}
			var headerDefinition *shared.SourceS3CSVHeaderDefinition
			if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition != nil {
				var sourceS3FromCSV *shared.SourceS3FromCSV
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.FromCSV != nil {
					sourceS3FromCSV = &shared.SourceS3FromCSV{}
				}
				if sourceS3FromCSV != nil {
					headerDefinition = &shared.SourceS3CSVHeaderDefinition{
						SourceS3FromCSV: sourceS3FromCSV,
					}
				}
				var sourceS3Autogenerated *shared.SourceS3Autogenerated
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.Autogenerated != nil {
					sourceS3Autogenerated = &shared.SourceS3Autogenerated{}
				}
				if sourceS3Autogenerated != nil {
					headerDefinition = &shared.SourceS3CSVHeaderDefinition{
						SourceS3Autogenerated: sourceS3Autogenerated,
					}
				}
				var sourceS3UserProvided *shared.SourceS3UserProvided
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided != nil {
					columnNames := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames))
					for columnNamesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames {
						columnNames = append(columnNames, r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames[columnNamesIndex].ValueString())
					}
					sourceS3UserProvided = &shared.SourceS3UserProvided{
						ColumnNames: columnNames,
					}
				}
				if sourceS3UserProvided != nil {
					headerDefinition = &shared.SourceS3CSVHeaderDefinition{
						SourceS3UserProvided: sourceS3UserProvided,
					}
				}
			}
			ignoreErrorsOnFieldsMismatch := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsNull() {
				*ignoreErrorsOnFieldsMismatch = r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.ValueBool()
			} else {
				ignoreErrorsOnFieldsMismatch = nil
			}
			inferenceType := new(shared.SourceS3InferenceType)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsNull() {
				*inferenceType = shared.SourceS3InferenceType(r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.ValueString())
			} else {
				inferenceType = nil
			}
			nullValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues))
			for nullValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues {
				nullValues = append(nullValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues[nullValuesIndex].ValueString())
			}
			quoteChar1 := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsNull() {
				*quoteChar1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.ValueString()
			} else {
				quoteChar1 = nil
			}
			skipRowsAfterHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsNull() {
				*skipRowsAfterHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.ValueInt64()
			} else {
				skipRowsAfterHeader = nil
			}
			skipRowsBeforeHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsNull() {
				*skipRowsBeforeHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.ValueInt64()
			} else {
				skipRowsBeforeHeader = nil
			}
			stringsCanBeNull := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsNull() {
				*stringsCanBeNull = r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.ValueBool()
			} else {
				stringsCanBeNull = nil
			}
			trueValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues))
			for trueValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues {
				trueValues = append(trueValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues[trueValuesIndex].ValueString())
			}
			sourceS3CSVFormat = &shared.SourceS3CSVFormat{
				Delimiter:                    delimiter1,
				DoubleQuote:                  doubleQuote1,
				Encoding:                     encoding1,
				EscapeChar:                   escapeChar1,
				FalseValues:                  falseValues,
				HeaderDefinition:             headerDefinition,
				IgnoreErrorsOnFieldsMismatch: ignoreErrorsOnFieldsMismatch,
				InferenceType:                inferenceType,
				NullValues:                   nullValues,
				QuoteChar:                    quoteChar1,
				SkipRowsAfterHeader:          skipRowsAfterHeader,
				SkipRowsBeforeHeader:         skipRowsBeforeHeader,
				StringsCanBeNull:             stringsCanBeNull,
				TrueValues:                   trueValues,
			}
		}
		if sourceS3CSVFormat != nil {
			format1 = shared.SourceS3Format{
				SourceS3CSVFormat: sourceS3CSVFormat,
			}
		}
		var sourceS3JsonlFormat *shared.SourceS3JsonlFormat
		if r.Configuration.Streams[streamsIndex].Format.JsonlFormat != nil {
			sourceS3JsonlFormat = &shared.SourceS3JsonlFormat{}
		}
		if sourceS3JsonlFormat != nil {
			format1 = shared.SourceS3Format{
				SourceS3JsonlFormat: sourceS3JsonlFormat,
			}
		}
		var sourceS3ParquetFormat *shared.SourceS3ParquetFormat
		if r.Configuration.Streams[streamsIndex].Format.ParquetFormat != nil {
			decimalAsFloat := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsNull() {
				*decimalAsFloat = r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.ValueBool()
			} else {
				decimalAsFloat = nil
			}
			sourceS3ParquetFormat = &shared.SourceS3ParquetFormat{
				DecimalAsFloat: decimalAsFloat,
			}
		}
		if sourceS3ParquetFormat != nil {
			format1 = shared.SourceS3Format{
				SourceS3ParquetFormat: sourceS3ParquetFormat,
			}
		}
		var sourceS3UnstructuredDocumentFormat *shared.SourceS3UnstructuredDocumentFormat
		if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat != nil {
			var processing *shared.SourceS3Processing
			if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing != nil {
				var sourceS3Local *shared.SourceS3Local
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.Local != nil {
					sourceS3Local = &shared.SourceS3Local{}
				}
				if sourceS3Local != nil {
					processing = &shared.SourceS3Processing{
						SourceS3Local: sourceS3Local,
					}
				}
			}
			skipUnprocessableFiles := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsNull() {
				*skipUnprocessableFiles = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.ValueBool()
			} else {
				skipUnprocessableFiles = nil
			}
			strategy := new(shared.SourceS3ParsingStrategy)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsNull() {
				*strategy = shared.SourceS3ParsingStrategy(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.ValueString())
			} else {
				strategy = nil
			}
			sourceS3UnstructuredDocumentFormat = &shared.SourceS3UnstructuredDocumentFormat{
				Processing:             processing,
				SkipUnprocessableFiles: skipUnprocessableFiles,
				Strategy:               strategy,
			}
		}
		if sourceS3UnstructuredDocumentFormat != nil {
			format1 = shared.SourceS3Format{
				SourceS3UnstructuredDocumentFormat: sourceS3UnstructuredDocumentFormat,
			}
		}
		var sourceS3ExcelFormat *shared.SourceS3ExcelFormat
		if r.Configuration.Streams[streamsIndex].Format.ExcelFormat != nil {
			sourceS3ExcelFormat = &shared.SourceS3ExcelFormat{}
		}
		if sourceS3ExcelFormat != nil {
			format1 = shared.SourceS3Format{
				SourceS3ExcelFormat: sourceS3ExcelFormat,
			}
		}
		globs := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Globs))
		for globsIndex := range r.Configuration.Streams[streamsIndex].Globs {
			globs = append(globs, r.Configuration.Streams[streamsIndex].Globs[globsIndex].ValueString())
		}
		inputSchema := new(string)
		if !r.Configuration.Streams[streamsIndex].InputSchema.IsUnknown() && !r.Configuration.Streams[streamsIndex].InputSchema.IsNull() {
			*inputSchema = r.Configuration.Streams[streamsIndex].InputSchema.ValueString()
		} else {
			inputSchema = nil
		}
		legacyPrefix := new(string)
		if !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsUnknown() && !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsNull() {
			*legacyPrefix = r.Configuration.Streams[streamsIndex].LegacyPrefix.ValueString()
		} else {
			legacyPrefix = nil
		}
		var name1 string
		name1 = r.Configuration.Streams[streamsIndex].Name.ValueString()

		primaryKey := new(string)
		if !r.Configuration.Streams[streamsIndex].PrimaryKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].PrimaryKey.IsNull() {
			*primaryKey = r.Configuration.Streams[streamsIndex].PrimaryKey.ValueString()
		} else {
			primaryKey = nil
		}
		recentNFilesToReadForSchemaDiscovery := new(int64)
		if !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsNull() {
			*recentNFilesToReadForSchemaDiscovery = r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.ValueInt64()
		} else {
			recentNFilesToReadForSchemaDiscovery = nil
		}
		schemaless := new(bool)
		if !r.Configuration.Streams[streamsIndex].Schemaless.IsUnknown() && !r.Configuration.Streams[streamsIndex].Schemaless.IsNull() {
			*schemaless = r.Configuration.Streams[streamsIndex].Schemaless.ValueBool()
		} else {
			schemaless = nil
		}
		validationPolicy := new(shared.SourceS3ValidationPolicy)
		if !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsUnknown() && !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsNull() {
			*validationPolicy = shared.SourceS3ValidationPolicy(r.Configuration.Streams[streamsIndex].ValidationPolicy.ValueString())
		} else {
			validationPolicy = nil
		}
		streams = append(streams, shared.SourceS3FileBasedStreamConfig{
			DaysToSyncIfHistoryIsFull:            daysToSyncIfHistoryIsFull,
			Format:                               format1,
			Globs:                                globs,
			InputSchema:                          inputSchema,
			LegacyPrefix:                         legacyPrefix,
			Name:                                 name1,
			PrimaryKey:                           primaryKey,
			RecentNFilesToReadForSchemaDiscovery: recentNFilesToReadForSchemaDiscovery,
			Schemaless:                           schemaless,
			ValidationPolicy:                     validationPolicy,
		})
	}
	configuration := shared.SourceS3{
		AwsAccessKeyID:     awsAccessKeyID,
		AwsSecretAccessKey: awsSecretAccessKey,
		Bucket:             bucket,
		Dataset:            dataset,
		DeliveryMethod:     deliveryMethod,
		Endpoint:           endpoint,
		Format:             format,
		PathPattern:        pathPattern,
		Provider:           provider,
		RegionName:         regionName1,
		RoleArn:            roleArn1,
		Schema:             schema,
		StartDate:          startDate1,
		Streams:            streams,
	}
	secretID := new(string)
	if !r.SecretID.IsUnknown() && !r.SecretID.IsNull() {
		*secretID = r.SecretID.ValueString()
	} else {
		secretID = nil
	}
	out := shared.SourceS3CreateRequest{
		Name:          name,
		DefinitionID:  definitionID,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
		SecretID:      secretID,
	}

	return &out, diags
}

func (r *SourceS3ResourceModel) ToSharedSourceS3PutRequest(ctx context.Context) (*shared.SourceS3PutRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	var workspaceID string
	workspaceID = r.WorkspaceID.ValueString()

	awsAccessKeyID := new(string)
	if !r.Configuration.AwsAccessKeyID.IsUnknown() && !r.Configuration.AwsAccessKeyID.IsNull() {
		*awsAccessKeyID = r.Configuration.AwsAccessKeyID.ValueString()
	} else {
		awsAccessKeyID = nil
	}
	awsSecretAccessKey := new(string)
	if !r.Configuration.AwsSecretAccessKey.IsUnknown() && !r.Configuration.AwsSecretAccessKey.IsNull() {
		*awsSecretAccessKey = r.Configuration.AwsSecretAccessKey.ValueString()
	} else {
		awsSecretAccessKey = nil
	}
	bucket := new(string)
	if !r.Configuration.Bucket.IsUnknown() && !r.Configuration.Bucket.IsNull() {
		*bucket = r.Configuration.Bucket.ValueString()
	} else {
		bucket = nil
	}
	dataset := new(string)
	if !r.Configuration.Dataset.IsUnknown() && !r.Configuration.Dataset.IsNull() {
		*dataset = r.Configuration.Dataset.ValueString()
	} else {
		dataset = nil
	}
	var deliveryMethod *shared.SourceS3UpdateDeliveryMethod
	if r.Configuration.DeliveryMethod != nil {
		var sourceS3UpdateReplicateRecords *shared.SourceS3UpdateReplicateRecords
		if r.Configuration.DeliveryMethod.ReplicateRecords != nil {
			sourceS3UpdateReplicateRecords = &shared.SourceS3UpdateReplicateRecords{}
		}
		if sourceS3UpdateReplicateRecords != nil {
			deliveryMethod = &shared.SourceS3UpdateDeliveryMethod{
				SourceS3UpdateReplicateRecords: sourceS3UpdateReplicateRecords,
			}
		}
		var sourceS3UpdateCopyRawFiles *shared.SourceS3UpdateCopyRawFiles
		if r.Configuration.DeliveryMethod.CopyRawFiles != nil {
			preserveDirectoryStructure := new(bool)
			if !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsUnknown() && !r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.IsNull() {
				*preserveDirectoryStructure = r.Configuration.DeliveryMethod.CopyRawFiles.PreserveDirectoryStructure.ValueBool()
			} else {
				preserveDirectoryStructure = nil
			}
			sourceS3UpdateCopyRawFiles = &shared.SourceS3UpdateCopyRawFiles{
				PreserveDirectoryStructure: preserveDirectoryStructure,
			}
		}
		if sourceS3UpdateCopyRawFiles != nil {
			deliveryMethod = &shared.SourceS3UpdateDeliveryMethod{
				SourceS3UpdateCopyRawFiles: sourceS3UpdateCopyRawFiles,
			}
		}
	}
	endpoint := new(string)
	if !r.Configuration.Endpoint.IsUnknown() && !r.Configuration.Endpoint.IsNull() {
		*endpoint = r.Configuration.Endpoint.ValueString()
	} else {
		endpoint = nil
	}
	var format *shared.SourceS3UpdateFileFormat
	if r.Configuration.Format != nil {
		var sourceS3UpdateCSV *shared.SourceS3UpdateCSV
		if r.Configuration.Format.Csv != nil {
			additionalReaderOptions := new(string)
			if !r.Configuration.Format.Csv.AdditionalReaderOptions.IsUnknown() && !r.Configuration.Format.Csv.AdditionalReaderOptions.IsNull() {
				*additionalReaderOptions = r.Configuration.Format.Csv.AdditionalReaderOptions.ValueString()
			} else {
				additionalReaderOptions = nil
			}
			advancedOptions := new(string)
			if !r.Configuration.Format.Csv.AdvancedOptions.IsUnknown() && !r.Configuration.Format.Csv.AdvancedOptions.IsNull() {
				*advancedOptions = r.Configuration.Format.Csv.AdvancedOptions.ValueString()
			} else {
				advancedOptions = nil
			}
			blockSize := new(int64)
			if !r.Configuration.Format.Csv.BlockSize.IsUnknown() && !r.Configuration.Format.Csv.BlockSize.IsNull() {
				*blockSize = r.Configuration.Format.Csv.BlockSize.ValueInt64()
			} else {
				blockSize = nil
			}
			delimiter := new(string)
			if !r.Configuration.Format.Csv.Delimiter.IsUnknown() && !r.Configuration.Format.Csv.Delimiter.IsNull() {
				*delimiter = r.Configuration.Format.Csv.Delimiter.ValueString()
			} else {
				delimiter = nil
			}
			doubleQuote := new(bool)
			if !r.Configuration.Format.Csv.DoubleQuote.IsUnknown() && !r.Configuration.Format.Csv.DoubleQuote.IsNull() {
				*doubleQuote = r.Configuration.Format.Csv.DoubleQuote.ValueBool()
			} else {
				doubleQuote = nil
			}
			encoding := new(string)
			if !r.Configuration.Format.Csv.Encoding.IsUnknown() && !r.Configuration.Format.Csv.Encoding.IsNull() {
				*encoding = r.Configuration.Format.Csv.Encoding.ValueString()
			} else {
				encoding = nil
			}
			escapeChar := new(string)
			if !r.Configuration.Format.Csv.EscapeChar.IsUnknown() && !r.Configuration.Format.Csv.EscapeChar.IsNull() {
				*escapeChar = r.Configuration.Format.Csv.EscapeChar.ValueString()
			} else {
				escapeChar = nil
			}
			inferDatatypes := new(bool)
			if !r.Configuration.Format.Csv.InferDatatypes.IsUnknown() && !r.Configuration.Format.Csv.InferDatatypes.IsNull() {
				*inferDatatypes = r.Configuration.Format.Csv.InferDatatypes.ValueBool()
			} else {
				inferDatatypes = nil
			}
			newlinesInValues := new(bool)
			if !r.Configuration.Format.Csv.NewlinesInValues.IsUnknown() && !r.Configuration.Format.Csv.NewlinesInValues.IsNull() {
				*newlinesInValues = r.Configuration.Format.Csv.NewlinesInValues.ValueBool()
			} else {
				newlinesInValues = nil
			}
			quoteChar := new(string)
			if !r.Configuration.Format.Csv.QuoteChar.IsUnknown() && !r.Configuration.Format.Csv.QuoteChar.IsNull() {
				*quoteChar = r.Configuration.Format.Csv.QuoteChar.ValueString()
			} else {
				quoteChar = nil
			}
			sourceS3UpdateCSV = &shared.SourceS3UpdateCSV{
				AdditionalReaderOptions: additionalReaderOptions,
				AdvancedOptions:         advancedOptions,
				BlockSize:               blockSize,
				Delimiter:               delimiter,
				DoubleQuote:             doubleQuote,
				Encoding:                encoding,
				EscapeChar:              escapeChar,
				InferDatatypes:          inferDatatypes,
				NewlinesInValues:        newlinesInValues,
				QuoteChar:               quoteChar,
			}
		}
		if sourceS3UpdateCSV != nil {
			format = &shared.SourceS3UpdateFileFormat{
				SourceS3UpdateCSV: sourceS3UpdateCSV,
			}
		}
		var sourceS3UpdateParquet *shared.SourceS3UpdateParquet
		if r.Configuration.Format.Parquet != nil {
			batchSize := new(int64)
			if !r.Configuration.Format.Parquet.BatchSize.IsUnknown() && !r.Configuration.Format.Parquet.BatchSize.IsNull() {
				*batchSize = r.Configuration.Format.Parquet.BatchSize.ValueInt64()
			} else {
				batchSize = nil
			}
			bufferSize := new(int64)
			if !r.Configuration.Format.Parquet.BufferSize.IsUnknown() && !r.Configuration.Format.Parquet.BufferSize.IsNull() {
				*bufferSize = r.Configuration.Format.Parquet.BufferSize.ValueInt64()
			} else {
				bufferSize = nil
			}
			columns := make([]string, 0, len(r.Configuration.Format.Parquet.Columns))
			for columnsIndex := range r.Configuration.Format.Parquet.Columns {
				columns = append(columns, r.Configuration.Format.Parquet.Columns[columnsIndex].ValueString())
			}
			sourceS3UpdateParquet = &shared.SourceS3UpdateParquet{
				BatchSize:  batchSize,
				BufferSize: bufferSize,
				Columns:    columns,
			}
		}
		if sourceS3UpdateParquet != nil {
			format = &shared.SourceS3UpdateFileFormat{
				SourceS3UpdateParquet: sourceS3UpdateParquet,
			}
		}
		var sourceS3UpdateAvro *shared.SourceS3UpdateAvro
		if r.Configuration.Format.Avro != nil {
			sourceS3UpdateAvro = &shared.SourceS3UpdateAvro{}
		}
		if sourceS3UpdateAvro != nil {
			format = &shared.SourceS3UpdateFileFormat{
				SourceS3UpdateAvro: sourceS3UpdateAvro,
			}
		}
		var sourceS3UpdateJsonl *shared.SourceS3UpdateJsonl
		if r.Configuration.Format.Jsonl != nil {
			blockSize1 := new(int64)
			if !r.Configuration.Format.Jsonl.BlockSize.IsUnknown() && !r.Configuration.Format.Jsonl.BlockSize.IsNull() {
				*blockSize1 = r.Configuration.Format.Jsonl.BlockSize.ValueInt64()
			} else {
				blockSize1 = nil
			}
			newlinesInValues1 := new(bool)
			if !r.Configuration.Format.Jsonl.NewlinesInValues.IsUnknown() && !r.Configuration.Format.Jsonl.NewlinesInValues.IsNull() {
				*newlinesInValues1 = r.Configuration.Format.Jsonl.NewlinesInValues.ValueBool()
			} else {
				newlinesInValues1 = nil
			}
			unexpectedFieldBehavior := new(shared.SourceS3UpdateUnexpectedFieldBehavior)
			if !r.Configuration.Format.Jsonl.UnexpectedFieldBehavior.IsUnknown() && !r.Configuration.Format.Jsonl.UnexpectedFieldBehavior.IsNull() {
				*unexpectedFieldBehavior = shared.SourceS3UpdateUnexpectedFieldBehavior(r.Configuration.Format.Jsonl.UnexpectedFieldBehavior.ValueString())
			} else {
				unexpectedFieldBehavior = nil
			}
			sourceS3UpdateJsonl = &shared.SourceS3UpdateJsonl{
				BlockSize:               blockSize1,
				NewlinesInValues:        newlinesInValues1,
				UnexpectedFieldBehavior: unexpectedFieldBehavior,
			}
		}
		if sourceS3UpdateJsonl != nil {
			format = &shared.SourceS3UpdateFileFormat{
				SourceS3UpdateJsonl: sourceS3UpdateJsonl,
			}
		}
	}
	pathPattern := new(string)
	if !r.Configuration.PathPattern.IsUnknown() && !r.Configuration.PathPattern.IsNull() {
		*pathPattern = r.Configuration.PathPattern.ValueString()
	} else {
		pathPattern = nil
	}
	var provider *shared.SourceS3UpdateS3AmazonWebServices
	if r.Configuration.Provider != nil {
		awsAccessKeyId1 := new(string)
		if !r.Configuration.Provider.AwsAccessKeyID.IsUnknown() && !r.Configuration.Provider.AwsAccessKeyID.IsNull() {
			*awsAccessKeyId1 = r.Configuration.Provider.AwsAccessKeyID.ValueString()
		} else {
			awsAccessKeyId1 = nil
		}
		awsSecretAccessKey1 := new(string)
		if !r.Configuration.Provider.AwsSecretAccessKey.IsUnknown() && !r.Configuration.Provider.AwsSecretAccessKey.IsNull() {
			*awsSecretAccessKey1 = r.Configuration.Provider.AwsSecretAccessKey.ValueString()
		} else {
			awsSecretAccessKey1 = nil
		}
		bucket1 := new(string)
		if !r.Configuration.Provider.Bucket.IsUnknown() && !r.Configuration.Provider.Bucket.IsNull() {
			*bucket1 = r.Configuration.Provider.Bucket.ValueString()
		} else {
			bucket1 = nil
		}
		endpoint1 := new(string)
		if !r.Configuration.Provider.Endpoint.IsUnknown() && !r.Configuration.Provider.Endpoint.IsNull() {
			*endpoint1 = r.Configuration.Provider.Endpoint.ValueString()
		} else {
			endpoint1 = nil
		}
		pathPrefix := new(string)
		if !r.Configuration.Provider.PathPrefix.IsUnknown() && !r.Configuration.Provider.PathPrefix.IsNull() {
			*pathPrefix = r.Configuration.Provider.PathPrefix.ValueString()
		} else {
			pathPrefix = nil
		}
		regionName := new(string)
		if !r.Configuration.Provider.RegionName.IsUnknown() && !r.Configuration.Provider.RegionName.IsNull() {
			*regionName = r.Configuration.Provider.RegionName.ValueString()
		} else {
			regionName = nil
		}
		roleArn := new(string)
		if !r.Configuration.Provider.RoleArn.IsUnknown() && !r.Configuration.Provider.RoleArn.IsNull() {
			*roleArn = r.Configuration.Provider.RoleArn.ValueString()
		} else {
			roleArn = nil
		}
		startDate := new(time.Time)
		if !r.Configuration.Provider.StartDate.IsUnknown() && !r.Configuration.Provider.StartDate.IsNull() {
			*startDate, _ = time.Parse(time.RFC3339Nano, r.Configuration.Provider.StartDate.ValueString())
		} else {
			startDate = nil
		}
		provider = &shared.SourceS3UpdateS3AmazonWebServices{
			AwsAccessKeyID:     awsAccessKeyId1,
			AwsSecretAccessKey: awsSecretAccessKey1,
			Bucket:             bucket1,
			Endpoint:           endpoint1,
			PathPrefix:         pathPrefix,
			RegionName:         regionName,
			RoleArn:            roleArn,
			StartDate:          startDate,
		}
	}
	regionName1 := new(string)
	if !r.Configuration.RegionName.IsUnknown() && !r.Configuration.RegionName.IsNull() {
		*regionName1 = r.Configuration.RegionName.ValueString()
	} else {
		regionName1 = nil
	}
	roleArn1 := new(string)
	if !r.Configuration.RoleArn.IsUnknown() && !r.Configuration.RoleArn.IsNull() {
		*roleArn1 = r.Configuration.RoleArn.ValueString()
	} else {
		roleArn1 = nil
	}
	schema := new(string)
	if !r.Configuration.Schema.IsUnknown() && !r.Configuration.Schema.IsNull() {
		*schema = r.Configuration.Schema.ValueString()
	} else {
		schema = nil
	}
	startDate1 := new(time.Time)
	if !r.Configuration.StartDate.IsUnknown() && !r.Configuration.StartDate.IsNull() {
		*startDate1, _ = time.Parse(time.RFC3339Nano, r.Configuration.StartDate.ValueString())
	} else {
		startDate1 = nil
	}
	streams := make([]shared.SourceS3UpdateFileBasedStreamConfig, 0, len(r.Configuration.Streams))
	for streamsIndex := range r.Configuration.Streams {
		daysToSyncIfHistoryIsFull := new(int64)
		if !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsUnknown() && !r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.IsNull() {
			*daysToSyncIfHistoryIsFull = r.Configuration.Streams[streamsIndex].DaysToSyncIfHistoryIsFull.ValueInt64()
		} else {
			daysToSyncIfHistoryIsFull = nil
		}
		var format1 *shared.SourceS3UpdateFormat
		var sourceS3UpdateAvroFormat *shared.SourceS3UpdateAvroFormat
		if r.Configuration.Streams[streamsIndex].Format.AvroFormat != nil {
			doubleAsString := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.IsNull() {
				*doubleAsString = r.Configuration.Streams[streamsIndex].Format.AvroFormat.DoubleAsString.ValueBool()
			} else {
				doubleAsString = nil
			}
			sourceS3UpdateAvroFormat = &shared.SourceS3UpdateAvroFormat{
				DoubleAsString: doubleAsString,
			}
		}
		if sourceS3UpdateAvroFormat != nil {
			format1 = &shared.SourceS3UpdateFormat{
				SourceS3UpdateAvroFormat: sourceS3UpdateAvroFormat,
			}
		}
		var sourceS3UpdateCSVFormat *shared.SourceS3UpdateCSVFormat
		if r.Configuration.Streams[streamsIndex].Format.CSVFormat != nil {
			delimiter1 := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.IsNull() {
				*delimiter1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Delimiter.ValueString()
			} else {
				delimiter1 = nil
			}
			doubleQuote1 := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.IsNull() {
				*doubleQuote1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.DoubleQuote.ValueBool()
			} else {
				doubleQuote1 = nil
			}
			encoding1 := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.IsNull() {
				*encoding1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.Encoding.ValueString()
			} else {
				encoding1 = nil
			}
			escapeChar1 := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.IsNull() {
				*escapeChar1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.EscapeChar.ValueString()
			} else {
				escapeChar1 = nil
			}
			falseValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues))
			for falseValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues {
				falseValues = append(falseValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.FalseValues[falseValuesIndex].ValueString())
			}
			var headerDefinition *shared.SourceS3UpdateCSVHeaderDefinition
			if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition != nil {
				var sourceS3UpdateFromCSV *shared.SourceS3UpdateFromCSV
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.FromCSV != nil {
					sourceS3UpdateFromCSV = &shared.SourceS3UpdateFromCSV{}
				}
				if sourceS3UpdateFromCSV != nil {
					headerDefinition = &shared.SourceS3UpdateCSVHeaderDefinition{
						SourceS3UpdateFromCSV: sourceS3UpdateFromCSV,
					}
				}
				var sourceS3UpdateAutogenerated *shared.SourceS3UpdateAutogenerated
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.Autogenerated != nil {
					sourceS3UpdateAutogenerated = &shared.SourceS3UpdateAutogenerated{}
				}
				if sourceS3UpdateAutogenerated != nil {
					headerDefinition = &shared.SourceS3UpdateCSVHeaderDefinition{
						SourceS3UpdateAutogenerated: sourceS3UpdateAutogenerated,
					}
				}
				var sourceS3UpdateUserProvided *shared.SourceS3UpdateUserProvided
				if r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided != nil {
					columnNames := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames))
					for columnNamesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames {
						columnNames = append(columnNames, r.Configuration.Streams[streamsIndex].Format.CSVFormat.HeaderDefinition.UserProvided.ColumnNames[columnNamesIndex].ValueString())
					}
					sourceS3UpdateUserProvided = &shared.SourceS3UpdateUserProvided{
						ColumnNames: columnNames,
					}
				}
				if sourceS3UpdateUserProvided != nil {
					headerDefinition = &shared.SourceS3UpdateCSVHeaderDefinition{
						SourceS3UpdateUserProvided: sourceS3UpdateUserProvided,
					}
				}
			}
			ignoreErrorsOnFieldsMismatch := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.IsNull() {
				*ignoreErrorsOnFieldsMismatch = r.Configuration.Streams[streamsIndex].Format.CSVFormat.IgnoreErrorsOnFieldsMismatch.ValueBool()
			} else {
				ignoreErrorsOnFieldsMismatch = nil
			}
			inferenceType := new(shared.SourceS3UpdateInferenceType)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.IsNull() {
				*inferenceType = shared.SourceS3UpdateInferenceType(r.Configuration.Streams[streamsIndex].Format.CSVFormat.InferenceType.ValueString())
			} else {
				inferenceType = nil
			}
			nullValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues))
			for nullValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues {
				nullValues = append(nullValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.NullValues[nullValuesIndex].ValueString())
			}
			quoteChar1 := new(string)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.IsNull() {
				*quoteChar1 = r.Configuration.Streams[streamsIndex].Format.CSVFormat.QuoteChar.ValueString()
			} else {
				quoteChar1 = nil
			}
			skipRowsAfterHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.IsNull() {
				*skipRowsAfterHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsAfterHeader.ValueInt64()
			} else {
				skipRowsAfterHeader = nil
			}
			skipRowsBeforeHeader := new(int64)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.IsNull() {
				*skipRowsBeforeHeader = r.Configuration.Streams[streamsIndex].Format.CSVFormat.SkipRowsBeforeHeader.ValueInt64()
			} else {
				skipRowsBeforeHeader = nil
			}
			stringsCanBeNull := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.IsNull() {
				*stringsCanBeNull = r.Configuration.Streams[streamsIndex].Format.CSVFormat.StringsCanBeNull.ValueBool()
			} else {
				stringsCanBeNull = nil
			}
			trueValues := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues))
			for trueValuesIndex := range r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues {
				trueValues = append(trueValues, r.Configuration.Streams[streamsIndex].Format.CSVFormat.TrueValues[trueValuesIndex].ValueString())
			}
			sourceS3UpdateCSVFormat = &shared.SourceS3UpdateCSVFormat{
				Delimiter:                    delimiter1,
				DoubleQuote:                  doubleQuote1,
				Encoding:                     encoding1,
				EscapeChar:                   escapeChar1,
				FalseValues:                  falseValues,
				HeaderDefinition:             headerDefinition,
				IgnoreErrorsOnFieldsMismatch: ignoreErrorsOnFieldsMismatch,
				InferenceType:                inferenceType,
				NullValues:                   nullValues,
				QuoteChar:                    quoteChar1,
				SkipRowsAfterHeader:          skipRowsAfterHeader,
				SkipRowsBeforeHeader:         skipRowsBeforeHeader,
				StringsCanBeNull:             stringsCanBeNull,
				TrueValues:                   trueValues,
			}
		}
		if sourceS3UpdateCSVFormat != nil {
			format1 = &shared.SourceS3UpdateFormat{
				SourceS3UpdateCSVFormat: sourceS3UpdateCSVFormat,
			}
		}
		var sourceS3UpdateJsonlFormat *shared.SourceS3UpdateJsonlFormat
		if r.Configuration.Streams[streamsIndex].Format.JsonlFormat != nil {
			sourceS3UpdateJsonlFormat = &shared.SourceS3UpdateJsonlFormat{}
		}
		if sourceS3UpdateJsonlFormat != nil {
			format1 = &shared.SourceS3UpdateFormat{
				SourceS3UpdateJsonlFormat: sourceS3UpdateJsonlFormat,
			}
		}
		var sourceS3UpdateParquetFormat *shared.SourceS3UpdateParquetFormat
		if r.Configuration.Streams[streamsIndex].Format.ParquetFormat != nil {
			decimalAsFloat := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.IsNull() {
				*decimalAsFloat = r.Configuration.Streams[streamsIndex].Format.ParquetFormat.DecimalAsFloat.ValueBool()
			} else {
				decimalAsFloat = nil
			}
			sourceS3UpdateParquetFormat = &shared.SourceS3UpdateParquetFormat{
				DecimalAsFloat: decimalAsFloat,
			}
		}
		if sourceS3UpdateParquetFormat != nil {
			format1 = &shared.SourceS3UpdateFormat{
				SourceS3UpdateParquetFormat: sourceS3UpdateParquetFormat,
			}
		}
		var sourceS3UpdateUnstructuredDocumentFormat *shared.SourceS3UpdateUnstructuredDocumentFormat
		if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat != nil {
			var processing *shared.SourceS3UpdateProcessing
			if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing != nil {
				var sourceS3UpdateLocal *shared.SourceS3UpdateLocal
				if r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Processing.Local != nil {
					sourceS3UpdateLocal = &shared.SourceS3UpdateLocal{}
				}
				if sourceS3UpdateLocal != nil {
					processing = &shared.SourceS3UpdateProcessing{
						SourceS3UpdateLocal: sourceS3UpdateLocal,
					}
				}
			}
			skipUnprocessableFiles := new(bool)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.IsNull() {
				*skipUnprocessableFiles = r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.SkipUnprocessableFiles.ValueBool()
			} else {
				skipUnprocessableFiles = nil
			}
			strategy := new(shared.SourceS3UpdateParsingStrategy)
			if !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsUnknown() && !r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.IsNull() {
				*strategy = shared.SourceS3UpdateParsingStrategy(r.Configuration.Streams[streamsIndex].Format.UnstructuredDocumentFormat.Strategy.ValueString())
			} else {
				strategy = nil
			}
			sourceS3UpdateUnstructuredDocumentFormat = &shared.SourceS3UpdateUnstructuredDocumentFormat{
				Processing:             processing,
				SkipUnprocessableFiles: skipUnprocessableFiles,
				Strategy:               strategy,
			}
		}
		if sourceS3UpdateUnstructuredDocumentFormat != nil {
			format1 = &shared.SourceS3UpdateFormat{
				SourceS3UpdateUnstructuredDocumentFormat: sourceS3UpdateUnstructuredDocumentFormat,
			}
		}
		var sourceS3UpdateExcelFormat *shared.SourceS3UpdateExcelFormat
		if r.Configuration.Streams[streamsIndex].Format.ExcelFormat != nil {
			sourceS3UpdateExcelFormat = &shared.SourceS3UpdateExcelFormat{}
		}
		if sourceS3UpdateExcelFormat != nil {
			format1 = &shared.SourceS3UpdateFormat{
				SourceS3UpdateExcelFormat: sourceS3UpdateExcelFormat,
			}
		}
		globs := make([]string, 0, len(r.Configuration.Streams[streamsIndex].Globs))
		for globsIndex := range r.Configuration.Streams[streamsIndex].Globs {
			globs = append(globs, r.Configuration.Streams[streamsIndex].Globs[globsIndex].ValueString())
		}
		inputSchema := new(string)
		if !r.Configuration.Streams[streamsIndex].InputSchema.IsUnknown() && !r.Configuration.Streams[streamsIndex].InputSchema.IsNull() {
			*inputSchema = r.Configuration.Streams[streamsIndex].InputSchema.ValueString()
		} else {
			inputSchema = nil
		}
		legacyPrefix := new(string)
		if !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsUnknown() && !r.Configuration.Streams[streamsIndex].LegacyPrefix.IsNull() {
			*legacyPrefix = r.Configuration.Streams[streamsIndex].LegacyPrefix.ValueString()
		} else {
			legacyPrefix = nil
		}
		name1 := new(string)
		if !r.Configuration.Streams[streamsIndex].Name.IsUnknown() && !r.Configuration.Streams[streamsIndex].Name.IsNull() {
			*name1 = r.Configuration.Streams[streamsIndex].Name.ValueString()
		} else {
			name1 = nil
		}
		primaryKey := new(string)
		if !r.Configuration.Streams[streamsIndex].PrimaryKey.IsUnknown() && !r.Configuration.Streams[streamsIndex].PrimaryKey.IsNull() {
			*primaryKey = r.Configuration.Streams[streamsIndex].PrimaryKey.ValueString()
		} else {
			primaryKey = nil
		}
		recentNFilesToReadForSchemaDiscovery := new(int64)
		if !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsUnknown() && !r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.IsNull() {
			*recentNFilesToReadForSchemaDiscovery = r.Configuration.Streams[streamsIndex].RecentNFilesToReadForSchemaDiscovery.ValueInt64()
		} else {
			recentNFilesToReadForSchemaDiscovery = nil
		}
		schemaless := new(bool)
		if !r.Configuration.Streams[streamsIndex].Schemaless.IsUnknown() && !r.Configuration.Streams[streamsIndex].Schemaless.IsNull() {
			*schemaless = r.Configuration.Streams[streamsIndex].Schemaless.ValueBool()
		} else {
			schemaless = nil
		}
		validationPolicy := new(shared.SourceS3UpdateValidationPolicy)
		if !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsUnknown() && !r.Configuration.Streams[streamsIndex].ValidationPolicy.IsNull() {
			*validationPolicy = shared.SourceS3UpdateValidationPolicy(r.Configuration.Streams[streamsIndex].ValidationPolicy.ValueString())
		} else {
			validationPolicy = nil
		}
		streams = append(streams, shared.SourceS3UpdateFileBasedStreamConfig{
			DaysToSyncIfHistoryIsFull:            daysToSyncIfHistoryIsFull,
			Format:                               format1,
			Globs:                                globs,
			InputSchema:                          inputSchema,
			LegacyPrefix:                         legacyPrefix,
			Name:                                 name1,
			PrimaryKey:                           primaryKey,
			RecentNFilesToReadForSchemaDiscovery: recentNFilesToReadForSchemaDiscovery,
			Schemaless:                           schemaless,
			ValidationPolicy:                     validationPolicy,
		})
	}
	configuration := shared.SourceS3Update{
		AwsAccessKeyID:     awsAccessKeyID,
		AwsSecretAccessKey: awsSecretAccessKey,
		Bucket:             bucket,
		Dataset:            dataset,
		DeliveryMethod:     deliveryMethod,
		Endpoint:           endpoint,
		Format:             format,
		PathPattern:        pathPattern,
		Provider:           provider,
		RegionName:         regionName1,
		RoleArn:            roleArn1,
		Schema:             schema,
		StartDate:          startDate1,
		Streams:            streams,
	}
	out := shared.SourceS3PutRequest{
		Name:          name,
		WorkspaceID:   workspaceID,
		Configuration: configuration,
	}

	return &out, diags
}
