// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/types"
)

type SourceAsanaUpdateAuthenticateWithPersonalAccessToken struct {
	// PAT Credentials
	optionTitle *string `const:"PAT Credentials" json:"option_title,omitempty"`
	// Asana Personal Access Token (generate yours <a href="https://app.asana.com/0/developer-console">here</a>).
	PersonalAccessToken *string `json:"personal_access_token,omitempty"`
}

func (s SourceAsanaUpdateAuthenticateWithPersonalAccessToken) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceAsanaUpdateAuthenticateWithPersonalAccessToken) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceAsanaUpdateAuthenticateWithPersonalAccessToken) GetOptionTitle() *string {
	return types.Pointer("PAT Credentials")
}

func (s *SourceAsanaUpdateAuthenticateWithPersonalAccessToken) GetPersonalAccessToken() *string {
	if s == nil {
		return nil
	}
	return s.PersonalAccessToken
}

type SourceAsanaUpdateAuthenticateViaAsanaOauth struct {
	ClientID     *string `json:"client_id,omitempty"`
	ClientSecret *string `json:"client_secret,omitempty"`
	// OAuth Credentials
	optionTitle  *string `const:"OAuth Credentials" json:"option_title,omitempty"`
	RefreshToken *string `json:"refresh_token,omitempty"`
}

func (s SourceAsanaUpdateAuthenticateViaAsanaOauth) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceAsanaUpdateAuthenticateViaAsanaOauth) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceAsanaUpdateAuthenticateViaAsanaOauth) GetClientID() *string {
	if s == nil {
		return nil
	}
	return s.ClientID
}

func (s *SourceAsanaUpdateAuthenticateViaAsanaOauth) GetClientSecret() *string {
	if s == nil {
		return nil
	}
	return s.ClientSecret
}

func (s *SourceAsanaUpdateAuthenticateViaAsanaOauth) GetOptionTitle() *string {
	return types.Pointer("OAuth Credentials")
}

func (s *SourceAsanaUpdateAuthenticateViaAsanaOauth) GetRefreshToken() *string {
	if s == nil {
		return nil
	}
	return s.RefreshToken
}

type SourceAsanaUpdateAuthenticationMechanismType string

const (
	SourceAsanaUpdateAuthenticationMechanismTypeSourceAsanaUpdateAuthenticateViaAsanaOauth           SourceAsanaUpdateAuthenticationMechanismType = "source-asana-update_Authenticate via Asana (Oauth)"
	SourceAsanaUpdateAuthenticationMechanismTypeSourceAsanaUpdateAuthenticateWithPersonalAccessToken SourceAsanaUpdateAuthenticationMechanismType = "source-asana-update_Authenticate with Personal Access Token"
)

// SourceAsanaUpdateAuthenticationMechanism - Choose how to authenticate to Github
type SourceAsanaUpdateAuthenticationMechanism struct {
	SourceAsanaUpdateAuthenticateViaAsanaOauth           *SourceAsanaUpdateAuthenticateViaAsanaOauth           `queryParam:"inline" union:"member"`
	SourceAsanaUpdateAuthenticateWithPersonalAccessToken *SourceAsanaUpdateAuthenticateWithPersonalAccessToken `queryParam:"inline" union:"member"`

	Type SourceAsanaUpdateAuthenticationMechanismType
}

func CreateSourceAsanaUpdateAuthenticationMechanismSourceAsanaUpdateAuthenticateViaAsanaOauth(sourceAsanaUpdateAuthenticateViaAsanaOauth SourceAsanaUpdateAuthenticateViaAsanaOauth) SourceAsanaUpdateAuthenticationMechanism {
	typ := SourceAsanaUpdateAuthenticationMechanismTypeSourceAsanaUpdateAuthenticateViaAsanaOauth

	return SourceAsanaUpdateAuthenticationMechanism{
		SourceAsanaUpdateAuthenticateViaAsanaOauth: &sourceAsanaUpdateAuthenticateViaAsanaOauth,
		Type: typ,
	}
}

func CreateSourceAsanaUpdateAuthenticationMechanismSourceAsanaUpdateAuthenticateWithPersonalAccessToken(sourceAsanaUpdateAuthenticateWithPersonalAccessToken SourceAsanaUpdateAuthenticateWithPersonalAccessToken) SourceAsanaUpdateAuthenticationMechanism {
	typ := SourceAsanaUpdateAuthenticationMechanismTypeSourceAsanaUpdateAuthenticateWithPersonalAccessToken

	return SourceAsanaUpdateAuthenticationMechanism{
		SourceAsanaUpdateAuthenticateWithPersonalAccessToken: &sourceAsanaUpdateAuthenticateWithPersonalAccessToken,
		Type: typ,
	}
}

func (u *SourceAsanaUpdateAuthenticationMechanism) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var sourceAsanaUpdateAuthenticateViaAsanaOauth SourceAsanaUpdateAuthenticateViaAsanaOauth = SourceAsanaUpdateAuthenticateViaAsanaOauth{}
	if err := utils.UnmarshalJSON(data, &sourceAsanaUpdateAuthenticateViaAsanaOauth, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceAsanaUpdateAuthenticationMechanismTypeSourceAsanaUpdateAuthenticateViaAsanaOauth,
			Value: &sourceAsanaUpdateAuthenticateViaAsanaOauth,
		})
	}

	var sourceAsanaUpdateAuthenticateWithPersonalAccessToken SourceAsanaUpdateAuthenticateWithPersonalAccessToken = SourceAsanaUpdateAuthenticateWithPersonalAccessToken{}
	if err := utils.UnmarshalJSON(data, &sourceAsanaUpdateAuthenticateWithPersonalAccessToken, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceAsanaUpdateAuthenticationMechanismTypeSourceAsanaUpdateAuthenticateWithPersonalAccessToken,
			Value: &sourceAsanaUpdateAuthenticateWithPersonalAccessToken,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceAsanaUpdateAuthenticationMechanism", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceAsanaUpdateAuthenticationMechanism", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(SourceAsanaUpdateAuthenticationMechanismType)
	switch best.Type {
	case SourceAsanaUpdateAuthenticationMechanismTypeSourceAsanaUpdateAuthenticateViaAsanaOauth:
		u.SourceAsanaUpdateAuthenticateViaAsanaOauth = best.Value.(*SourceAsanaUpdateAuthenticateViaAsanaOauth)
		return nil
	case SourceAsanaUpdateAuthenticationMechanismTypeSourceAsanaUpdateAuthenticateWithPersonalAccessToken:
		u.SourceAsanaUpdateAuthenticateWithPersonalAccessToken = best.Value.(*SourceAsanaUpdateAuthenticateWithPersonalAccessToken)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceAsanaUpdateAuthenticationMechanism", string(data))
}

func (u SourceAsanaUpdateAuthenticationMechanism) MarshalJSON() ([]byte, error) {
	if u.SourceAsanaUpdateAuthenticateViaAsanaOauth != nil {
		return utils.MarshalJSON(u.SourceAsanaUpdateAuthenticateViaAsanaOauth, "", true)
	}

	if u.SourceAsanaUpdateAuthenticateWithPersonalAccessToken != nil {
		return utils.MarshalJSON(u.SourceAsanaUpdateAuthenticateWithPersonalAccessToken, "", true)
	}

	return nil, errors.New("could not marshal union type SourceAsanaUpdateAuthenticationMechanism: all fields are null")
}

type SourceAsanaUpdateSourceType string

const (
	SourceAsanaUpdateSourceTypeAsana SourceAsanaUpdateSourceType = "asana"
)

func (e SourceAsanaUpdateSourceType) ToPointer() *SourceAsanaUpdateSourceType {
	return &e
}
func (e *SourceAsanaUpdateSourceType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "asana":
		*e = SourceAsanaUpdateSourceType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for SourceAsanaUpdateSourceType: %v", v)
	}
}

type SourceAsanaUpdate struct {
	// Choose how to authenticate to Github
	Credentials *SourceAsanaUpdateAuthenticationMechanism `json:"credentials,omitempty"`
	// The number of worker threads to use for the sync. The performance upper boundary is based on the limit of your Asana pricing plan. More info about the rate limit tiers can be found on Asana's API <a href="https://developers.asana.com/docs/rate-limits">docs</a>.
	NumWorkers *int64 `default:"10" json:"num_workers"`
	// Globally unique identifiers for the organization exports
	OrganizationExportIds []string `json:"organization_export_ids,omitempty"`
	// This flag is used for testing purposes for certain streams that return a lot of data. This flag is not meant to be enabled for prod.
	TestMode             *bool                        `json:"test_mode,omitempty"`
	sourceType           *SourceAsanaUpdateSourceType `const:"asana" json:"sourceType"`
	AdditionalProperties any                          `additionalProperties:"true" json:"-"`
}

func (s SourceAsanaUpdate) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceAsanaUpdate) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceAsanaUpdate) GetCredentials() *SourceAsanaUpdateAuthenticationMechanism {
	if s == nil {
		return nil
	}
	return s.Credentials
}

func (s *SourceAsanaUpdate) GetNumWorkers() *int64 {
	if s == nil {
		return nil
	}
	return s.NumWorkers
}

func (s *SourceAsanaUpdate) GetOrganizationExportIds() []string {
	if s == nil {
		return nil
	}
	return s.OrganizationExportIds
}

func (s *SourceAsanaUpdate) GetTestMode() *bool {
	if s == nil {
		return nil
	}
	return s.TestMode
}

func (s *SourceAsanaUpdate) GetSourceType() *SourceAsanaUpdateSourceType {
	return SourceAsanaUpdateSourceTypeAsana.ToPointer()
}

func (s *SourceAsanaUpdate) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}
