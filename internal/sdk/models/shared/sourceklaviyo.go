// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"time"
)

type SourceKlaviyoSourceType string

const (
	SourceKlaviyoSourceTypeKlaviyo SourceKlaviyoSourceType = "klaviyo"
)

func (e SourceKlaviyoSourceType) ToPointer() *SourceKlaviyoSourceType {
	return &e
}
func (e *SourceKlaviyoSourceType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "klaviyo":
		*e = SourceKlaviyoSourceType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for SourceKlaviyoSourceType: %v", v)
	}
}

type SourceKlaviyo struct {
	// Klaviyo API Key. See our <a href="https://docs.airbyte.com/integrations/sources/klaviyo">docs</a> if you need help finding this key.
	APIKey string `json:"api_key"`
	// Certain streams like the profiles stream can retrieve predictive analytics data from Klaviyo's API. However, at high volume, this can lead to service availability issues on the API which can be improved by not fetching this field. WARNING: Enabling this setting will stop the  "predictive_analytics" column from being populated in your downstream destination.
	DisableFetchingPredictiveAnalytics *bool `json:"disable_fetching_predictive_analytics,omitempty"`
	// The number of days to look back when syncing data in incremental mode. This helps capture any late-arriving data. Only applies to the events_detailed stream.
	LookbackWindow *int64 `default:"0" json:"lookback_window"`
	// OPTIONAL: Comma-separated list of specific metric IDs to use for flow_series_reports and campaign_values_reports streams. If left empty, the connector will automatically fetch reports for ALL available metrics in your account. Due to Klaviyo's strict API rate limits - see [Klaviyo's API docs](https://developers.klaviyo.com/en/reference/query_campaign_values), syncing all metrics can be extremely slow and may take hours to complete. RECOMMENDED: Specify only the conversion metrics you need (e.g., "RESQ6t" for Placed Order) to avoid slow syncs. Find metric IDs in your Klaviyo account under Analytics > Metrics, or use the metrics stream to list all available metrics and their IDs.
	MetricIds *string `json:"metric_ids,omitempty"`
	// The number of worker threads to use for the sync. The performance upper boundary is based on the limit of your Klaviyo plan. More info about the rate limit plan tiers can be found on Klaviyo's API <a href="https://developers.klaviyo.com/en/docs/rate_limits_and_error_handling">docs</a>.
	NumWorkers *int64 `default:"10" json:"num_workers"`
	// UTC date and time in the format 2017-01-25T00:00:00Z. Any data before this date will not be replicated. This field is optional - if not provided, all data will be replicated.
	StartDate            *time.Time               `json:"start_date,omitempty"`
	sourceType           *SourceKlaviyoSourceType `const:"klaviyo" json:"sourceType"`
	AdditionalProperties any                      `additionalProperties:"true" json:"-"`
}

func (s SourceKlaviyo) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceKlaviyo) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceKlaviyo) GetAPIKey() string {
	if s == nil {
		return ""
	}
	return s.APIKey
}

func (s *SourceKlaviyo) GetDisableFetchingPredictiveAnalytics() *bool {
	if s == nil {
		return nil
	}
	return s.DisableFetchingPredictiveAnalytics
}

func (s *SourceKlaviyo) GetLookbackWindow() *int64 {
	if s == nil {
		return nil
	}
	return s.LookbackWindow
}

func (s *SourceKlaviyo) GetMetricIds() *string {
	if s == nil {
		return nil
	}
	return s.MetricIds
}

func (s *SourceKlaviyo) GetNumWorkers() *int64 {
	if s == nil {
		return nil
	}
	return s.NumWorkers
}

func (s *SourceKlaviyo) GetStartDate() *time.Time {
	if s == nil {
		return nil
	}
	return s.StartDate
}

func (s *SourceKlaviyo) GetSourceType() *SourceKlaviyoSourceType {
	return SourceKlaviyoSourceTypeKlaviyo.ToPointer()
}

func (s *SourceKlaviyo) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}
