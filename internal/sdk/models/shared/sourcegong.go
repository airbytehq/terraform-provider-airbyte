// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"time"
)

type AuthenticateWithAPIKey struct {
	// Gong Access Key
	AccessKey string `json:"access_key"`
	// Gong Access Key Secret
	AccessKeySecret      string `json:"access_key_secret"`
	authType             string `const:"APIKey" json:"auth_type"`
	AdditionalProperties any    `additionalProperties:"true" json:"-"`
}

func (a AuthenticateWithAPIKey) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(a, "", false)
}

func (a *AuthenticateWithAPIKey) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &a, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (a *AuthenticateWithAPIKey) GetAccessKey() string {
	if a == nil {
		return ""
	}
	return a.AccessKey
}

func (a *AuthenticateWithAPIKey) GetAccessKeySecret() string {
	if a == nil {
		return ""
	}
	return a.AccessKeySecret
}

func (a *AuthenticateWithAPIKey) GetAuthType() string {
	return "APIKey"
}

func (a *AuthenticateWithAPIKey) GetAdditionalProperties() any {
	if a == nil {
		return nil
	}
	return a.AdditionalProperties
}

type AuthenticateViaGongOAuth struct {
	// Access Token for making authenticated requests.
	AccessToken *string `json:"access_token,omitempty"`
	authType    string  `const:"OAuth2.0" json:"auth_type"`
	// The Client ID of your Gong OAuth application.
	ClientID string `json:"client_id"`
	// The Client Secret of your Gong OAuth application.
	ClientSecret string `json:"client_secret"`
	// Refresh Token to renew the expired Access Token.
	RefreshToken string `json:"refresh_token"`
	// The date-time when the access token expires.
	TokenExpiryDate      *time.Time `json:"token_expiry_date,omitempty"`
	AdditionalProperties any        `additionalProperties:"true" json:"-"`
}

func (a AuthenticateViaGongOAuth) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(a, "", false)
}

func (a *AuthenticateViaGongOAuth) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &a, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (a *AuthenticateViaGongOAuth) GetAccessToken() *string {
	if a == nil {
		return nil
	}
	return a.AccessToken
}

func (a *AuthenticateViaGongOAuth) GetAuthType() string {
	return "OAuth2.0"
}

func (a *AuthenticateViaGongOAuth) GetClientID() string {
	if a == nil {
		return ""
	}
	return a.ClientID
}

func (a *AuthenticateViaGongOAuth) GetClientSecret() string {
	if a == nil {
		return ""
	}
	return a.ClientSecret
}

func (a *AuthenticateViaGongOAuth) GetRefreshToken() string {
	if a == nil {
		return ""
	}
	return a.RefreshToken
}

func (a *AuthenticateViaGongOAuth) GetTokenExpiryDate() *time.Time {
	if a == nil {
		return nil
	}
	return a.TokenExpiryDate
}

func (a *AuthenticateViaGongOAuth) GetAdditionalProperties() any {
	if a == nil {
		return nil
	}
	return a.AdditionalProperties
}

type SourceGongAuthenticationType string

const (
	SourceGongAuthenticationTypeAuthenticateViaGongOAuth SourceGongAuthenticationType = "Authenticate via Gong (OAuth)"
	SourceGongAuthenticationTypeAuthenticateWithAPIKey   SourceGongAuthenticationType = "Authenticate with API Key"
)

// SourceGongAuthentication - Choose how to authenticate to Gong.
type SourceGongAuthentication struct {
	AuthenticateViaGongOAuth *AuthenticateViaGongOAuth `queryParam:"inline" union:"member"`
	AuthenticateWithAPIKey   *AuthenticateWithAPIKey   `queryParam:"inline" union:"member"`

	Type SourceGongAuthenticationType
}

func CreateSourceGongAuthenticationAuthenticateViaGongOAuth(authenticateViaGongOAuth AuthenticateViaGongOAuth) SourceGongAuthentication {
	typ := SourceGongAuthenticationTypeAuthenticateViaGongOAuth

	return SourceGongAuthentication{
		AuthenticateViaGongOAuth: &authenticateViaGongOAuth,
		Type:                     typ,
	}
}

func CreateSourceGongAuthenticationAuthenticateWithAPIKey(authenticateWithAPIKey AuthenticateWithAPIKey) SourceGongAuthentication {
	typ := SourceGongAuthenticationTypeAuthenticateWithAPIKey

	return SourceGongAuthentication{
		AuthenticateWithAPIKey: &authenticateWithAPIKey,
		Type:                   typ,
	}
}

func (u *SourceGongAuthentication) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var authenticateViaGongOAuth AuthenticateViaGongOAuth = AuthenticateViaGongOAuth{}
	if err := utils.UnmarshalJSON(data, &authenticateViaGongOAuth, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceGongAuthenticationTypeAuthenticateViaGongOAuth,
			Value: &authenticateViaGongOAuth,
		})
	}

	var authenticateWithAPIKey AuthenticateWithAPIKey = AuthenticateWithAPIKey{}
	if err := utils.UnmarshalJSON(data, &authenticateWithAPIKey, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceGongAuthenticationTypeAuthenticateWithAPIKey,
			Value: &authenticateWithAPIKey,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceGongAuthentication", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceGongAuthentication", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(SourceGongAuthenticationType)
	switch best.Type {
	case SourceGongAuthenticationTypeAuthenticateViaGongOAuth:
		u.AuthenticateViaGongOAuth = best.Value.(*AuthenticateViaGongOAuth)
		return nil
	case SourceGongAuthenticationTypeAuthenticateWithAPIKey:
		u.AuthenticateWithAPIKey = best.Value.(*AuthenticateWithAPIKey)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceGongAuthentication", string(data))
}

func (u SourceGongAuthentication) MarshalJSON() ([]byte, error) {
	if u.AuthenticateViaGongOAuth != nil {
		return utils.MarshalJSON(u.AuthenticateViaGongOAuth, "", true)
	}

	if u.AuthenticateWithAPIKey != nil {
		return utils.MarshalJSON(u.AuthenticateWithAPIKey, "", true)
	}

	return nil, errors.New("could not marshal union type SourceGongAuthentication: all fields are null")
}

type SourceGongSourceType string

const (
	SourceGongSourceTypeGong SourceGongSourceType = "gong"
)

func (e SourceGongSourceType) ToPointer() *SourceGongSourceType {
	return &e
}
func (e *SourceGongSourceType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "gong":
		*e = SourceGongSourceType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for SourceGongSourceType: %v", v)
	}
}

type SourceGong struct {
	// Choose how to authenticate to Gong.
	Credentials SourceGongAuthentication `json:"credentials"`
	// The date from which to list calls, in the ISO-8601 format; if not specified, the calls start with the earliest recorded call. For web-conference calls recorded by Gong, the date denotes its scheduled time, otherwise, it denotes its actual start time.
	StartDate            *string               `json:"start_date,omitempty"`
	sourceType           *SourceGongSourceType `const:"gong" json:"sourceType"`
	AdditionalProperties any                   `additionalProperties:"true" json:"-"`
}

func (s SourceGong) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceGong) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceGong) GetCredentials() SourceGongAuthentication {
	if s == nil {
		return SourceGongAuthentication{}
	}
	return s.Credentials
}

func (s *SourceGong) GetStartDate() *string {
	if s == nil {
		return nil
	}
	return s.StartDate
}

func (s *SourceGong) GetSourceType() *SourceGongSourceType {
	return SourceGongSourceTypeGong.ToPointer()
}

func (s *SourceGong) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}
