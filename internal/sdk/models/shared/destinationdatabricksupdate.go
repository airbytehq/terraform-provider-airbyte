// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/types"
)

type DestinationDatabricksUpdatePersonalAccessToken struct {
	authType            *string `const:"BASIC" json:"auth_type,omitempty"`
	PersonalAccessToken *string `json:"personal_access_token,omitempty"`
}

func (d DestinationDatabricksUpdatePersonalAccessToken) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(d, "", false)
}

func (d *DestinationDatabricksUpdatePersonalAccessToken) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &d, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (d *DestinationDatabricksUpdatePersonalAccessToken) GetAuthType() *string {
	return types.Pointer("BASIC")
}

func (d *DestinationDatabricksUpdatePersonalAccessToken) GetPersonalAccessToken() *string {
	if d == nil {
		return nil
	}
	return d.PersonalAccessToken
}

type DestinationDatabricksUpdateOAuth2Recommended struct {
	authType *string `const:"OAUTH" json:"auth_type,omitempty"`
	ClientID *string `json:"client_id,omitempty"`
	Secret   *string `json:"secret,omitempty"`
}

func (d DestinationDatabricksUpdateOAuth2Recommended) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(d, "", false)
}

func (d *DestinationDatabricksUpdateOAuth2Recommended) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &d, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (d *DestinationDatabricksUpdateOAuth2Recommended) GetAuthType() *string {
	return types.Pointer("OAUTH")
}

func (d *DestinationDatabricksUpdateOAuth2Recommended) GetClientID() *string {
	if d == nil {
		return nil
	}
	return d.ClientID
}

func (d *DestinationDatabricksUpdateOAuth2Recommended) GetSecret() *string {
	if d == nil {
		return nil
	}
	return d.Secret
}

type DestinationDatabricksUpdateAuthenticationType string

const (
	DestinationDatabricksUpdateAuthenticationTypeDestinationDatabricksUpdateOAuth2Recommended   DestinationDatabricksUpdateAuthenticationType = "destination-databricks-update_OAuth2 (Recommended)"
	DestinationDatabricksUpdateAuthenticationTypeDestinationDatabricksUpdatePersonalAccessToken DestinationDatabricksUpdateAuthenticationType = "destination-databricks-update_Personal Access Token"
)

// DestinationDatabricksUpdateAuthentication - Authentication mechanism for Staging files and running queries
type DestinationDatabricksUpdateAuthentication struct {
	DestinationDatabricksUpdateOAuth2Recommended   *DestinationDatabricksUpdateOAuth2Recommended   `queryParam:"inline" union:"member"`
	DestinationDatabricksUpdatePersonalAccessToken *DestinationDatabricksUpdatePersonalAccessToken `queryParam:"inline" union:"member"`

	Type DestinationDatabricksUpdateAuthenticationType
}

func CreateDestinationDatabricksUpdateAuthenticationDestinationDatabricksUpdateOAuth2Recommended(destinationDatabricksUpdateOAuth2Recommended DestinationDatabricksUpdateOAuth2Recommended) DestinationDatabricksUpdateAuthentication {
	typ := DestinationDatabricksUpdateAuthenticationTypeDestinationDatabricksUpdateOAuth2Recommended

	return DestinationDatabricksUpdateAuthentication{
		DestinationDatabricksUpdateOAuth2Recommended: &destinationDatabricksUpdateOAuth2Recommended,
		Type: typ,
	}
}

func CreateDestinationDatabricksUpdateAuthenticationDestinationDatabricksUpdatePersonalAccessToken(destinationDatabricksUpdatePersonalAccessToken DestinationDatabricksUpdatePersonalAccessToken) DestinationDatabricksUpdateAuthentication {
	typ := DestinationDatabricksUpdateAuthenticationTypeDestinationDatabricksUpdatePersonalAccessToken

	return DestinationDatabricksUpdateAuthentication{
		DestinationDatabricksUpdatePersonalAccessToken: &destinationDatabricksUpdatePersonalAccessToken,
		Type: typ,
	}
}

func (u *DestinationDatabricksUpdateAuthentication) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var destinationDatabricksUpdateOAuth2Recommended DestinationDatabricksUpdateOAuth2Recommended = DestinationDatabricksUpdateOAuth2Recommended{}
	if err := utils.UnmarshalJSON(data, &destinationDatabricksUpdateOAuth2Recommended, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  DestinationDatabricksUpdateAuthenticationTypeDestinationDatabricksUpdateOAuth2Recommended,
			Value: &destinationDatabricksUpdateOAuth2Recommended,
		})
	}

	var destinationDatabricksUpdatePersonalAccessToken DestinationDatabricksUpdatePersonalAccessToken = DestinationDatabricksUpdatePersonalAccessToken{}
	if err := utils.UnmarshalJSON(data, &destinationDatabricksUpdatePersonalAccessToken, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  DestinationDatabricksUpdateAuthenticationTypeDestinationDatabricksUpdatePersonalAccessToken,
			Value: &destinationDatabricksUpdatePersonalAccessToken,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for DestinationDatabricksUpdateAuthentication", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for DestinationDatabricksUpdateAuthentication", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(DestinationDatabricksUpdateAuthenticationType)
	switch best.Type {
	case DestinationDatabricksUpdateAuthenticationTypeDestinationDatabricksUpdateOAuth2Recommended:
		u.DestinationDatabricksUpdateOAuth2Recommended = best.Value.(*DestinationDatabricksUpdateOAuth2Recommended)
		return nil
	case DestinationDatabricksUpdateAuthenticationTypeDestinationDatabricksUpdatePersonalAccessToken:
		u.DestinationDatabricksUpdatePersonalAccessToken = best.Value.(*DestinationDatabricksUpdatePersonalAccessToken)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for DestinationDatabricksUpdateAuthentication", string(data))
}

func (u DestinationDatabricksUpdateAuthentication) MarshalJSON() ([]byte, error) {
	if u.DestinationDatabricksUpdateOAuth2Recommended != nil {
		return utils.MarshalJSON(u.DestinationDatabricksUpdateOAuth2Recommended, "", true)
	}

	if u.DestinationDatabricksUpdatePersonalAccessToken != nil {
		return utils.MarshalJSON(u.DestinationDatabricksUpdatePersonalAccessToken, "", true)
	}

	return nil, errors.New("could not marshal union type DestinationDatabricksUpdateAuthentication: all fields are null")
}

type DestinationDatabricksUpdateDestinationType string

const (
	DestinationDatabricksUpdateDestinationTypeDatabricks DestinationDatabricksUpdateDestinationType = "databricks"
)

func (e DestinationDatabricksUpdateDestinationType) ToPointer() *DestinationDatabricksUpdateDestinationType {
	return &e
}
func (e *DestinationDatabricksUpdateDestinationType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "databricks":
		*e = DestinationDatabricksUpdateDestinationType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for DestinationDatabricksUpdateDestinationType: %v", v)
	}
}

type DestinationDatabricksUpdate struct {
	// You must agree to the Databricks JDBC Driver <a href="https://databricks.com/jdbc-odbc-driver-license">Terms & Conditions</a> to use this connector.
	AcceptTerms *bool `default:"false" json:"accept_terms"`
	// Authentication mechanism for Staging files and running queries
	Authentication *DestinationDatabricksUpdateAuthentication `json:"authentication,omitempty"`
	// The name of the unity catalog for the database
	Database *string `json:"database,omitempty"`
	// Databricks Cluster Server Hostname.
	Hostname *string `json:"hostname,omitempty"`
	// Databricks Cluster HTTP Path.
	HTTPPath *string `json:"http_path,omitempty"`
	// Databricks Cluster Port.
	Port *string `default:"443" json:"port"`
	// Default to 'true'. Switch it to 'false' for debugging purpose.
	PurgeStagingData *bool `default:"true" json:"purge_staging_data"`
	// The schema to write raw tables into (default: airbyte_internal)
	RawSchemaOverride *string `default:"airbyte_internal" json:"raw_schema_override"`
	// The default schema tables are written. If not specified otherwise, the "default" will be used.
	Schema          *string                                     `default:"default" json:"schema"`
	destinationType *DestinationDatabricksUpdateDestinationType `const:"databricks" json:"destinationType"`
}

func (d DestinationDatabricksUpdate) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(d, "", false)
}

func (d *DestinationDatabricksUpdate) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &d, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (d *DestinationDatabricksUpdate) GetAcceptTerms() *bool {
	if d == nil {
		return nil
	}
	return d.AcceptTerms
}

func (d *DestinationDatabricksUpdate) GetAuthentication() *DestinationDatabricksUpdateAuthentication {
	if d == nil {
		return nil
	}
	return d.Authentication
}

func (d *DestinationDatabricksUpdate) GetDatabase() *string {
	if d == nil {
		return nil
	}
	return d.Database
}

func (d *DestinationDatabricksUpdate) GetHostname() *string {
	if d == nil {
		return nil
	}
	return d.Hostname
}

func (d *DestinationDatabricksUpdate) GetHTTPPath() *string {
	if d == nil {
		return nil
	}
	return d.HTTPPath
}

func (d *DestinationDatabricksUpdate) GetPort() *string {
	if d == nil {
		return nil
	}
	return d.Port
}

func (d *DestinationDatabricksUpdate) GetPurgeStagingData() *bool {
	if d == nil {
		return nil
	}
	return d.PurgeStagingData
}

func (d *DestinationDatabricksUpdate) GetRawSchemaOverride() *string {
	if d == nil {
		return nil
	}
	return d.RawSchemaOverride
}

func (d *DestinationDatabricksUpdate) GetSchema() *string {
	if d == nil {
		return nil
	}
	return d.Schema
}

func (d *DestinationDatabricksUpdate) GetDestinationType() *DestinationDatabricksUpdateDestinationType {
	return DestinationDatabricksUpdateDestinationTypeDatabricks.ToPointer()
}
