// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/types"
	"time"
)

type SourceZendeskSupportUpdateOAuth20Legacy struct {
	// The OAuth access token. See the <a href="https://developer.zendesk.com/documentation/ticketing/working-with-oauth/creating-and-using-oauth-tokens-with-the-api/">Zendesk docs</a> for more information on generating this token.
	AccessToken *string `json:"access_token,omitempty"`
	// The OAuth client's ID. See <a href="https://docs.searchunify.com/Content/Content-Sources/Zendesk-Authentication-OAuth-Client-ID-Secret.htm#:~:text=Get%20Client%20ID%20and%20Client%20Secret&text=Go%20to%20OAuth%20Clients%20and,will%20be%20displayed%20only%20once.">this guide</a> for more information.
	ClientID *string `json:"client_id,omitempty"`
	// The OAuth client secret. See <a href="https://docs.searchunify.com/Content/Content-Sources/Zendesk-Authentication-OAuth-Client-ID-Secret.htm#:~:text=Get%20Client%20ID%20and%20Client%20Secret&text=Go%20to%20OAuth%20Clients%20and,will%20be%20displayed%20only%20once.">this guide</a> for more information.
	ClientSecret         *string `json:"client_secret,omitempty"`
	credentials          *string `const:"oauth2.0" json:"credentials,omitempty"`
	AdditionalProperties any     `additionalProperties:"true" json:"-"`
}

func (s SourceZendeskSupportUpdateOAuth20Legacy) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceZendeskSupportUpdateOAuth20Legacy) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceZendeskSupportUpdateOAuth20Legacy) GetAccessToken() *string {
	if s == nil {
		return nil
	}
	return s.AccessToken
}

func (s *SourceZendeskSupportUpdateOAuth20Legacy) GetClientID() *string {
	if s == nil {
		return nil
	}
	return s.ClientID
}

func (s *SourceZendeskSupportUpdateOAuth20Legacy) GetClientSecret() *string {
	if s == nil {
		return nil
	}
	return s.ClientSecret
}

func (s *SourceZendeskSupportUpdateOAuth20Legacy) GetCredentials() *string {
	return types.Pointer("oauth2.0")
}

func (s *SourceZendeskSupportUpdateOAuth20Legacy) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}

type SourceZendeskSupportUpdateAPIToken struct {
	// The value of the API token generated. See our <a href="https://docs.airbyte.com/integrations/sources/zendesk-support#setup-guide">full documentation</a> for more information on generating this token.
	APIToken    *string `json:"api_token,omitempty"`
	credentials *string `const:"api_token" json:"credentials,omitempty"`
	// The user email for your Zendesk account.
	Email                *string `json:"email,omitempty"`
	AdditionalProperties any     `additionalProperties:"true" json:"-"`
}

func (s SourceZendeskSupportUpdateAPIToken) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceZendeskSupportUpdateAPIToken) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceZendeskSupportUpdateAPIToken) GetAPIToken() *string {
	if s == nil {
		return nil
	}
	return s.APIToken
}

func (s *SourceZendeskSupportUpdateAPIToken) GetCredentials() *string {
	return types.Pointer("api_token")
}

func (s *SourceZendeskSupportUpdateAPIToken) GetEmail() *string {
	if s == nil {
		return nil
	}
	return s.Email
}

func (s *SourceZendeskSupportUpdateAPIToken) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}

type SourceZendeskSupportUpdateOAuth20WithRefreshToken struct {
	// Access Token for making authenticated requests.
	AccessToken *string `json:"access_token,omitempty"`
	// The OAuth client's ID. See <a href="https://developer.zendesk.com/api-reference/ticketing/oauth/grant_type_tokens/">Zendesk OAuth grant-type tokens documentation</a> for more information.
	ClientID *string `json:"client_id,omitempty"`
	// The OAuth client secret. See <a href="https://developer.zendesk.com/api-reference/ticketing/oauth/grant_type_tokens/">Zendesk OAuth grant-type tokens documentation</a> for more information.
	ClientSecret *string `json:"client_secret,omitempty"`
	credentials  *string `const:"oauth2_refresh" json:"credentials,omitempty"`
	// The refresh token used to obtain new access tokens. Note that Zendesk uses rotating refresh tokens - each refresh will return a new refresh token and invalidate the previous one.
	RefreshToken *string `json:"refresh_token,omitempty"`
	// The date-time when the access token should be refreshed.
	TokenExpiryDate      *time.Time `json:"token_expiry_date,omitempty"`
	AdditionalProperties any        `additionalProperties:"true" json:"-"`
}

func (s SourceZendeskSupportUpdateOAuth20WithRefreshToken) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceZendeskSupportUpdateOAuth20WithRefreshToken) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceZendeskSupportUpdateOAuth20WithRefreshToken) GetAccessToken() *string {
	if s == nil {
		return nil
	}
	return s.AccessToken
}

func (s *SourceZendeskSupportUpdateOAuth20WithRefreshToken) GetClientID() *string {
	if s == nil {
		return nil
	}
	return s.ClientID
}

func (s *SourceZendeskSupportUpdateOAuth20WithRefreshToken) GetClientSecret() *string {
	if s == nil {
		return nil
	}
	return s.ClientSecret
}

func (s *SourceZendeskSupportUpdateOAuth20WithRefreshToken) GetCredentials() *string {
	return types.Pointer("oauth2_refresh")
}

func (s *SourceZendeskSupportUpdateOAuth20WithRefreshToken) GetRefreshToken() *string {
	if s == nil {
		return nil
	}
	return s.RefreshToken
}

func (s *SourceZendeskSupportUpdateOAuth20WithRefreshToken) GetTokenExpiryDate() *time.Time {
	if s == nil {
		return nil
	}
	return s.TokenExpiryDate
}

func (s *SourceZendeskSupportUpdateOAuth20WithRefreshToken) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}

type SourceZendeskSupportUpdateAuthenticationType string

const (
	SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateOAuth20WithRefreshToken SourceZendeskSupportUpdateAuthenticationType = "source-zendesk-support-update_OAuth2.0 with Refresh Token"
	SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateAPIToken                SourceZendeskSupportUpdateAuthenticationType = "source-zendesk-support-update_API Token"
	SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateOAuth20Legacy           SourceZendeskSupportUpdateAuthenticationType = "source-zendesk-support-update_OAuth2.0 (Legacy)"
)

// SourceZendeskSupportUpdateAuthentication - Zendesk allows three authentication methods. We recommend using `OAuth2.0 with Refresh Token` for Airbyte Cloud users (recommended), `OAuth2.0 (Legacy)` for existing OAuth connections, and `API token` for Airbyte Open Source users.
type SourceZendeskSupportUpdateAuthentication struct {
	SourceZendeskSupportUpdateOAuth20WithRefreshToken *SourceZendeskSupportUpdateOAuth20WithRefreshToken `queryParam:"inline" union:"member"`
	SourceZendeskSupportUpdateAPIToken                *SourceZendeskSupportUpdateAPIToken                `queryParam:"inline" union:"member"`
	SourceZendeskSupportUpdateOAuth20Legacy           *SourceZendeskSupportUpdateOAuth20Legacy           `queryParam:"inline" union:"member"`

	Type SourceZendeskSupportUpdateAuthenticationType
}

func CreateSourceZendeskSupportUpdateAuthenticationSourceZendeskSupportUpdateOAuth20WithRefreshToken(sourceZendeskSupportUpdateOAuth20WithRefreshToken SourceZendeskSupportUpdateOAuth20WithRefreshToken) SourceZendeskSupportUpdateAuthentication {
	typ := SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateOAuth20WithRefreshToken

	return SourceZendeskSupportUpdateAuthentication{
		SourceZendeskSupportUpdateOAuth20WithRefreshToken: &sourceZendeskSupportUpdateOAuth20WithRefreshToken,
		Type: typ,
	}
}

func CreateSourceZendeskSupportUpdateAuthenticationSourceZendeskSupportUpdateAPIToken(sourceZendeskSupportUpdateAPIToken SourceZendeskSupportUpdateAPIToken) SourceZendeskSupportUpdateAuthentication {
	typ := SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateAPIToken

	return SourceZendeskSupportUpdateAuthentication{
		SourceZendeskSupportUpdateAPIToken: &sourceZendeskSupportUpdateAPIToken,
		Type:                               typ,
	}
}

func CreateSourceZendeskSupportUpdateAuthenticationSourceZendeskSupportUpdateOAuth20Legacy(sourceZendeskSupportUpdateOAuth20Legacy SourceZendeskSupportUpdateOAuth20Legacy) SourceZendeskSupportUpdateAuthentication {
	typ := SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateOAuth20Legacy

	return SourceZendeskSupportUpdateAuthentication{
		SourceZendeskSupportUpdateOAuth20Legacy: &sourceZendeskSupportUpdateOAuth20Legacy,
		Type:                                    typ,
	}
}

func (u *SourceZendeskSupportUpdateAuthentication) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var sourceZendeskSupportUpdateOAuth20WithRefreshToken SourceZendeskSupportUpdateOAuth20WithRefreshToken = SourceZendeskSupportUpdateOAuth20WithRefreshToken{}
	if err := utils.UnmarshalJSON(data, &sourceZendeskSupportUpdateOAuth20WithRefreshToken, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateOAuth20WithRefreshToken,
			Value: &sourceZendeskSupportUpdateOAuth20WithRefreshToken,
		})
	}

	var sourceZendeskSupportUpdateAPIToken SourceZendeskSupportUpdateAPIToken = SourceZendeskSupportUpdateAPIToken{}
	if err := utils.UnmarshalJSON(data, &sourceZendeskSupportUpdateAPIToken, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateAPIToken,
			Value: &sourceZendeskSupportUpdateAPIToken,
		})
	}

	var sourceZendeskSupportUpdateOAuth20Legacy SourceZendeskSupportUpdateOAuth20Legacy = SourceZendeskSupportUpdateOAuth20Legacy{}
	if err := utils.UnmarshalJSON(data, &sourceZendeskSupportUpdateOAuth20Legacy, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateOAuth20Legacy,
			Value: &sourceZendeskSupportUpdateOAuth20Legacy,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceZendeskSupportUpdateAuthentication", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceZendeskSupportUpdateAuthentication", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(SourceZendeskSupportUpdateAuthenticationType)
	switch best.Type {
	case SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateOAuth20WithRefreshToken:
		u.SourceZendeskSupportUpdateOAuth20WithRefreshToken = best.Value.(*SourceZendeskSupportUpdateOAuth20WithRefreshToken)
		return nil
	case SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateAPIToken:
		u.SourceZendeskSupportUpdateAPIToken = best.Value.(*SourceZendeskSupportUpdateAPIToken)
		return nil
	case SourceZendeskSupportUpdateAuthenticationTypeSourceZendeskSupportUpdateOAuth20Legacy:
		u.SourceZendeskSupportUpdateOAuth20Legacy = best.Value.(*SourceZendeskSupportUpdateOAuth20Legacy)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceZendeskSupportUpdateAuthentication", string(data))
}

func (u SourceZendeskSupportUpdateAuthentication) MarshalJSON() ([]byte, error) {
	if u.SourceZendeskSupportUpdateOAuth20WithRefreshToken != nil {
		return utils.MarshalJSON(u.SourceZendeskSupportUpdateOAuth20WithRefreshToken, "", true)
	}

	if u.SourceZendeskSupportUpdateAPIToken != nil {
		return utils.MarshalJSON(u.SourceZendeskSupportUpdateAPIToken, "", true)
	}

	if u.SourceZendeskSupportUpdateOAuth20Legacy != nil {
		return utils.MarshalJSON(u.SourceZendeskSupportUpdateOAuth20Legacy, "", true)
	}

	return nil, errors.New("could not marshal union type SourceZendeskSupportUpdateAuthentication: all fields are null")
}

type SourceZendeskSupportUpdateSourceType string

const (
	SourceZendeskSupportUpdateSourceTypeZendeskSupport SourceZendeskSupportUpdateSourceType = "zendesk-support"
)

func (e SourceZendeskSupportUpdateSourceType) ToPointer() *SourceZendeskSupportUpdateSourceType {
	return &e
}
func (e *SourceZendeskSupportUpdateSourceType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "zendesk-support":
		*e = SourceZendeskSupportUpdateSourceType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for SourceZendeskSupportUpdateSourceType: %v", v)
	}
}

type SourceZendeskSupportUpdate struct {
	// Zendesk allows three authentication methods. We recommend using `OAuth2.0 with Refresh Token` for Airbyte Cloud users (recommended), `OAuth2.0 (Legacy)` for existing OAuth connections, and `API token` for Airbyte Open Source users.
	Credentials *SourceZendeskSupportUpdateAuthentication `json:"credentials,omitempty"`
	// [Deprecated] Makes each stream read a single page of data.
	IgnorePagination *bool `json:"ignore_pagination,omitempty"`
	// The number of worker threads to use for the sync. The performance upper boundary is based on the limit of your Zendesk Support plan. More info about the rate limit plan tiers can be found on Zendesk's API <a href="https://developer.zendesk.com/api-reference/introduction/rate-limits/#zendesk-support-plan-limits">docs</a>.
	NumWorkers *int64 `default:"3" json:"num_workers"`
	// The number of records per page for the ticket_comments stream API requests. Lower values may help prevent timeouts on large datasets. The maximum value is 1000.
	PageSize *int64 `default:"100" json:"page_size"`
	// The UTC date and time from which you'd like to replicate data, in the format YYYY-MM-DDT00:00:00Z. All data generated after this date will be replicated.
	StartDate *time.Time `json:"start_date,omitempty"`
	// This is your unique Zendesk subdomain that can be found in your account URL. For example, in https://MY_SUBDOMAIN.zendesk.com/, MY_SUBDOMAIN is the value of your subdomain.
	Subdomain            *string                               `json:"subdomain,omitempty"`
	sourceType           *SourceZendeskSupportUpdateSourceType `const:"zendesk-support" json:"sourceType"`
	AdditionalProperties any                                   `additionalProperties:"true" json:"-"`
}

func (s SourceZendeskSupportUpdate) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceZendeskSupportUpdate) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceZendeskSupportUpdate) GetCredentials() *SourceZendeskSupportUpdateAuthentication {
	if s == nil {
		return nil
	}
	return s.Credentials
}

func (s *SourceZendeskSupportUpdate) GetIgnorePagination() *bool {
	if s == nil {
		return nil
	}
	return s.IgnorePagination
}

func (s *SourceZendeskSupportUpdate) GetNumWorkers() *int64 {
	if s == nil {
		return nil
	}
	return s.NumWorkers
}

func (s *SourceZendeskSupportUpdate) GetPageSize() *int64 {
	if s == nil {
		return nil
	}
	return s.PageSize
}

func (s *SourceZendeskSupportUpdate) GetStartDate() *time.Time {
	if s == nil {
		return nil
	}
	return s.StartDate
}

func (s *SourceZendeskSupportUpdate) GetSubdomain() *string {
	if s == nil {
		return nil
	}
	return s.Subdomain
}

func (s *SourceZendeskSupportUpdate) GetSourceType() *SourceZendeskSupportUpdateSourceType {
	return SourceZendeskSupportUpdateSourceTypeZendeskSupport.ToPointer()
}

func (s *SourceZendeskSupportUpdate) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}
