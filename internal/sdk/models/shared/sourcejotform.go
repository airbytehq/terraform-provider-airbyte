// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/types"
	"time"
)

type Enterprise struct {
	apiEndpoint *string `const:"enterprise" json:"api_endpoint,omitempty"`
	// Upgrade to Enterprise to make your API url your-domain.com/API or subdomain.jotform.com/API instead of api.jotform.com
	EnterpriseURL string `json:"enterprise_url"`
}

func (e Enterprise) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(e, "", false)
}

func (e *Enterprise) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &e, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (e *Enterprise) GetAPIEndpoint() *string {
	return types.Pointer("enterprise")
}

func (e *Enterprise) GetEnterpriseURL() string {
	if e == nil {
		return ""
	}
	return e.EnterpriseURL
}

// BaseURLPrefix - You can access our API through the following URLs - Standard API Usage (Use the default API URL - https://api.jotform.com), For EU (Use the EU API URL - https://eu-api.jotform.com), For HIPAA (Use the HIPAA API URL - https://hipaa-api.jotform.com)
type BaseURLPrefix string

const (
	BaseURLPrefixStandard BaseURLPrefix = "Standard"
	BaseURLPrefixEu       BaseURLPrefix = "EU"
	BaseURLPrefixHipaa    BaseURLPrefix = "HIPAA"
)

func (e BaseURLPrefix) ToPointer() *BaseURLPrefix {
	return &e
}
func (e *BaseURLPrefix) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "Standard":
		fallthrough
	case "EU":
		fallthrough
	case "HIPAA":
		*e = BaseURLPrefix(v)
		return nil
	default:
		return fmt.Errorf("invalid value for BaseURLPrefix: %v", v)
	}
}

type Basic struct {
	apiEndpoint *string `const:"basic" json:"api_endpoint,omitempty"`
	// You can access our API through the following URLs - Standard API Usage (Use the default API URL - https://api.jotform.com), For EU (Use the EU API URL - https://eu-api.jotform.com), For HIPAA (Use the HIPAA API URL - https://hipaa-api.jotform.com)
	URLPrefix *BaseURLPrefix `default:"Standard" json:"url_prefix"`
}

func (b Basic) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(b, "", false)
}

func (b *Basic) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &b, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (b *Basic) GetAPIEndpoint() *string {
	return types.Pointer("basic")
}

func (b *Basic) GetURLPrefix() *BaseURLPrefix {
	if b == nil {
		return nil
	}
	return b.URLPrefix
}

type APIEndpointType string

const (
	APIEndpointTypeBasic      APIEndpointType = "Basic"
	APIEndpointTypeEnterprise APIEndpointType = "Enterprise"
)

type APIEndpoint struct {
	Basic      *Basic      `queryParam:"inline" union:"member"`
	Enterprise *Enterprise `queryParam:"inline" union:"member"`

	Type APIEndpointType
}

func CreateAPIEndpointBasic(basic Basic) APIEndpoint {
	typ := APIEndpointTypeBasic

	return APIEndpoint{
		Basic: &basic,
		Type:  typ,
	}
}

func CreateAPIEndpointEnterprise(enterprise Enterprise) APIEndpoint {
	typ := APIEndpointTypeEnterprise

	return APIEndpoint{
		Enterprise: &enterprise,
		Type:       typ,
	}
}

func (u *APIEndpoint) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var basic Basic = Basic{}
	if err := utils.UnmarshalJSON(data, &basic, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  APIEndpointTypeBasic,
			Value: &basic,
		})
	}

	var enterprise Enterprise = Enterprise{}
	if err := utils.UnmarshalJSON(data, &enterprise, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  APIEndpointTypeEnterprise,
			Value: &enterprise,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for APIEndpoint", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for APIEndpoint", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(APIEndpointType)
	switch best.Type {
	case APIEndpointTypeBasic:
		u.Basic = best.Value.(*Basic)
		return nil
	case APIEndpointTypeEnterprise:
		u.Enterprise = best.Value.(*Enterprise)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for APIEndpoint", string(data))
}

func (u APIEndpoint) MarshalJSON() ([]byte, error) {
	if u.Basic != nil {
		return utils.MarshalJSON(u.Basic, "", true)
	}

	if u.Enterprise != nil {
		return utils.MarshalJSON(u.Enterprise, "", true)
	}

	return nil, errors.New("could not marshal union type APIEndpoint: all fields are null")
}

type SourceJotformSourceType string

const (
	SourceJotformSourceTypeJotform SourceJotformSourceType = "jotform"
)

func (e SourceJotformSourceType) ToPointer() *SourceJotformSourceType {
	return &e
}
func (e *SourceJotformSourceType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "jotform":
		*e = SourceJotformSourceType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for SourceJotformSourceType: %v", v)
	}
}

type SourceJotform struct {
	APIEndpoint          APIEndpoint              `json:"api_endpoint"`
	APIKey               string                   `json:"api_key"`
	EndDate              time.Time                `json:"end_date"`
	StartDate            time.Time                `json:"start_date"`
	sourceType           *SourceJotformSourceType `const:"jotform" json:"sourceType"`
	AdditionalProperties any                      `additionalProperties:"true" json:"-"`
}

func (s SourceJotform) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceJotform) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceJotform) GetAPIEndpoint() APIEndpoint {
	if s == nil {
		return APIEndpoint{}
	}
	return s.APIEndpoint
}

func (s *SourceJotform) GetAPIKey() string {
	if s == nil {
		return ""
	}
	return s.APIKey
}

func (s *SourceJotform) GetEndDate() time.Time {
	if s == nil {
		return time.Time{}
	}
	return s.EndDate
}

func (s *SourceJotform) GetStartDate() time.Time {
	if s == nil {
		return time.Time{}
	}
	return s.StartDate
}

func (s *SourceJotform) GetSourceType() *SourceJotformSourceType {
	return SourceJotformSourceTypeJotform.ToPointer()
}

func (s *SourceJotform) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}
