// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
)

type ObjectStoreType string

const (
	ObjectStoreTypeS3 ObjectStoreType = "S3"
)

func (e ObjectStoreType) ToPointer() *ObjectStoreType {
	return &e
}
func (e *ObjectStoreType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "S3":
		*e = ObjectStoreType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for ObjectStoreType: %v", v)
	}
}

// DestinationStarburstGalaxyS3BucketRegion - The region of the S3 bucket.
type DestinationStarburstGalaxyS3BucketRegion string

const (
	DestinationStarburstGalaxyS3BucketRegionApNortheast1 DestinationStarburstGalaxyS3BucketRegion = "ap-northeast-1"
	DestinationStarburstGalaxyS3BucketRegionApSoutheast1 DestinationStarburstGalaxyS3BucketRegion = "ap-southeast-1"
	DestinationStarburstGalaxyS3BucketRegionApSoutheast2 DestinationStarburstGalaxyS3BucketRegion = "ap-southeast-2"
	DestinationStarburstGalaxyS3BucketRegionCaCentral1   DestinationStarburstGalaxyS3BucketRegion = "ca-central-1"
	DestinationStarburstGalaxyS3BucketRegionEuCentral1   DestinationStarburstGalaxyS3BucketRegion = "eu-central-1"
	DestinationStarburstGalaxyS3BucketRegionEuWest1      DestinationStarburstGalaxyS3BucketRegion = "eu-west-1"
	DestinationStarburstGalaxyS3BucketRegionEuWest2      DestinationStarburstGalaxyS3BucketRegion = "eu-west-2"
	DestinationStarburstGalaxyS3BucketRegionEuWest3      DestinationStarburstGalaxyS3BucketRegion = "eu-west-3"
	DestinationStarburstGalaxyS3BucketRegionUsEast1      DestinationStarburstGalaxyS3BucketRegion = "us-east-1"
	DestinationStarburstGalaxyS3BucketRegionUsEast2      DestinationStarburstGalaxyS3BucketRegion = "us-east-2"
	DestinationStarburstGalaxyS3BucketRegionUsWest1      DestinationStarburstGalaxyS3BucketRegion = "us-west-1"
	DestinationStarburstGalaxyS3BucketRegionUsWest2      DestinationStarburstGalaxyS3BucketRegion = "us-west-2"
)

func (e DestinationStarburstGalaxyS3BucketRegion) ToPointer() *DestinationStarburstGalaxyS3BucketRegion {
	return &e
}
func (e *DestinationStarburstGalaxyS3BucketRegion) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "ap-northeast-1":
		fallthrough
	case "ap-southeast-1":
		fallthrough
	case "ap-southeast-2":
		fallthrough
	case "ca-central-1":
		fallthrough
	case "eu-central-1":
		fallthrough
	case "eu-west-1":
		fallthrough
	case "eu-west-2":
		fallthrough
	case "eu-west-3":
		fallthrough
	case "us-east-1":
		fallthrough
	case "us-east-2":
		fallthrough
	case "us-west-1":
		fallthrough
	case "us-west-2":
		*e = DestinationStarburstGalaxyS3BucketRegion(v)
		return nil
	default:
		return fmt.Errorf("invalid value for DestinationStarburstGalaxyS3BucketRegion: %v", v)
	}
}

type AmazonS3 struct {
	ObjectStoreType *ObjectStoreType `default:"S3" json:"object_store_type"`
	// Access key with access to the bucket. Airbyte requires read and write permissions to a given bucket.
	S3AccessKeyID string `json:"s3_access_key_id"`
	// Name of the S3 bucket
	S3BucketName string `json:"s3_bucket_name"`
	// Directory in the S3 bucket where staging data is stored.
	S3BucketPath string `json:"s3_bucket_path"`
	// The region of the S3 bucket.
	S3BucketRegion *DestinationStarburstGalaxyS3BucketRegion `default:"us-east-1" json:"s3_bucket_region"`
	// Secret key used with the specified access key.
	S3SecretAccessKey string `json:"s3_secret_access_key"`
}

func (a AmazonS3) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(a, "", false)
}

func (a *AmazonS3) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &a, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (a *AmazonS3) GetObjectStoreType() *ObjectStoreType {
	if a == nil {
		return nil
	}
	return a.ObjectStoreType
}

func (a *AmazonS3) GetS3AccessKeyID() string {
	if a == nil {
		return ""
	}
	return a.S3AccessKeyID
}

func (a *AmazonS3) GetS3BucketName() string {
	if a == nil {
		return ""
	}
	return a.S3BucketName
}

func (a *AmazonS3) GetS3BucketPath() string {
	if a == nil {
		return ""
	}
	return a.S3BucketPath
}

func (a *AmazonS3) GetS3BucketRegion() *DestinationStarburstGalaxyS3BucketRegion {
	if a == nil {
		return nil
	}
	return a.S3BucketRegion
}

func (a *AmazonS3) GetS3SecretAccessKey() string {
	if a == nil {
		return ""
	}
	return a.S3SecretAccessKey
}

type StagingObjectStoreType string

const (
	StagingObjectStoreTypeAmazonS3 StagingObjectStoreType = "Amazon S3"
)

// StagingObjectStore - Temporary storage on which temporary Iceberg table is created.
type StagingObjectStore struct {
	AmazonS3 *AmazonS3 `queryParam:"inline" union:"member"`

	Type StagingObjectStoreType
}

func CreateStagingObjectStoreAmazonS3(amazonS3 AmazonS3) StagingObjectStore {
	typ := StagingObjectStoreTypeAmazonS3

	return StagingObjectStore{
		AmazonS3: &amazonS3,
		Type:     typ,
	}
}

func (u *StagingObjectStore) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var amazonS3 AmazonS3 = AmazonS3{}
	if err := utils.UnmarshalJSON(data, &amazonS3, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  StagingObjectStoreTypeAmazonS3,
			Value: &amazonS3,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for StagingObjectStore", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for StagingObjectStore", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(StagingObjectStoreType)
	switch best.Type {
	case StagingObjectStoreTypeAmazonS3:
		u.AmazonS3 = best.Value.(*AmazonS3)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for StagingObjectStore", string(data))
}

func (u StagingObjectStore) MarshalJSON() ([]byte, error) {
	if u.AmazonS3 != nil {
		return utils.MarshalJSON(u.AmazonS3, "", true)
	}

	return nil, errors.New("could not marshal union type StagingObjectStore: all fields are null")
}

type DestinationStarburstGalaxyDestinationType string

const (
	DestinationStarburstGalaxyDestinationTypeStarburstGalaxy DestinationStarburstGalaxyDestinationType = "starburst-galaxy"
)

func (e DestinationStarburstGalaxyDestinationType) ToPointer() *DestinationStarburstGalaxyDestinationType {
	return &e
}
func (e *DestinationStarburstGalaxyDestinationType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "starburst-galaxy":
		*e = DestinationStarburstGalaxyDestinationType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for DestinationStarburstGalaxyDestinationType: %v", v)
	}
}

type DestinationStarburstGalaxy struct {
	// You must agree to the Starburst Galaxy <a href="https://www.starburst.io/terms/">terms & conditions</a> to use this connector.
	AcceptTerms *bool `default:"false" json:"accept_terms"`
	// Name of the Starburst Galaxy Amazon S3 catalog.
	Catalog string `json:"catalog"`
	// The default Starburst Galaxy Amazon S3 catalog schema where tables are written to if the source does not specify a namespace. Defaults to "public".
	CatalogSchema *string `default:"public" json:"catalog_schema"`
	// Starburst Galaxy password for the specified user.
	Password string `json:"password"`
	// Starburst Galaxy cluster port.
	Port *string `default:"443" json:"port"`
	// Defaults to 'true'. Switch to 'false' for debugging purposes.
	PurgeStagingTable *bool `default:"true" json:"purge_staging_table"`
	// Starburst Galaxy cluster hostname.
	ServerHostname string `json:"server_hostname"`
	// Temporary storage on which temporary Iceberg table is created.
	StagingObjectStore StagingObjectStore `json:"staging_object_store"`
	// Starburst Galaxy user.
	Username        string                                     `json:"username"`
	destinationType *DestinationStarburstGalaxyDestinationType `const:"starburst-galaxy" json:"destinationType"`
}

func (d DestinationStarburstGalaxy) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(d, "", false)
}

func (d *DestinationStarburstGalaxy) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &d, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (d *DestinationStarburstGalaxy) GetAcceptTerms() *bool {
	if d == nil {
		return nil
	}
	return d.AcceptTerms
}

func (d *DestinationStarburstGalaxy) GetCatalog() string {
	if d == nil {
		return ""
	}
	return d.Catalog
}

func (d *DestinationStarburstGalaxy) GetCatalogSchema() *string {
	if d == nil {
		return nil
	}
	return d.CatalogSchema
}

func (d *DestinationStarburstGalaxy) GetPassword() string {
	if d == nil {
		return ""
	}
	return d.Password
}

func (d *DestinationStarburstGalaxy) GetPort() *string {
	if d == nil {
		return nil
	}
	return d.Port
}

func (d *DestinationStarburstGalaxy) GetPurgeStagingTable() *bool {
	if d == nil {
		return nil
	}
	return d.PurgeStagingTable
}

func (d *DestinationStarburstGalaxy) GetServerHostname() string {
	if d == nil {
		return ""
	}
	return d.ServerHostname
}

func (d *DestinationStarburstGalaxy) GetStagingObjectStore() StagingObjectStore {
	if d == nil {
		return StagingObjectStore{}
	}
	return d.StagingObjectStore
}

func (d *DestinationStarburstGalaxy) GetUsername() string {
	if d == nil {
		return ""
	}
	return d.Username
}

func (d *DestinationStarburstGalaxy) GetDestinationType() *DestinationStarburstGalaxyDestinationType {
	return DestinationStarburstGalaxyDestinationTypeStarburstGalaxy.ToPointer()
}
