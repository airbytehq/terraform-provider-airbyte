// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/types"
	"time"
)

type SourceTypeformUpdatePrivateToken struct {
	// Log into your Typeform account and then generate a personal Access Token.
	AccessToken *string `json:"access_token,omitempty"`
	authType    *string `const:"access_token" json:"auth_type,omitempty"`
}

func (s SourceTypeformUpdatePrivateToken) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceTypeformUpdatePrivateToken) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceTypeformUpdatePrivateToken) GetAccessToken() *string {
	if s == nil {
		return nil
	}
	return s.AccessToken
}

func (s *SourceTypeformUpdatePrivateToken) GetAuthType() *string {
	return types.Pointer("access_token")
}

type SourceTypeformUpdateOAuth20 struct {
	// Access Token for making authenticated requests.
	AccessToken *string `json:"access_token,omitempty"`
	authType    *string `const:"oauth2.0" json:"auth_type,omitempty"`
	// The Client ID of the Typeform developer application.
	ClientID *string `json:"client_id,omitempty"`
	// The Client Secret the Typeform developer application.
	ClientSecret *string `json:"client_secret,omitempty"`
	// The key to refresh the expired access_token.
	RefreshToken *string `json:"refresh_token,omitempty"`
	// The date-time when the access token should be refreshed.
	TokenExpiryDate *time.Time `json:"token_expiry_date,omitempty"`
}

func (s SourceTypeformUpdateOAuth20) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceTypeformUpdateOAuth20) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceTypeformUpdateOAuth20) GetAccessToken() *string {
	if s == nil {
		return nil
	}
	return s.AccessToken
}

func (s *SourceTypeformUpdateOAuth20) GetAuthType() *string {
	return types.Pointer("oauth2.0")
}

func (s *SourceTypeformUpdateOAuth20) GetClientID() *string {
	if s == nil {
		return nil
	}
	return s.ClientID
}

func (s *SourceTypeformUpdateOAuth20) GetClientSecret() *string {
	if s == nil {
		return nil
	}
	return s.ClientSecret
}

func (s *SourceTypeformUpdateOAuth20) GetRefreshToken() *string {
	if s == nil {
		return nil
	}
	return s.RefreshToken
}

func (s *SourceTypeformUpdateOAuth20) GetTokenExpiryDate() *time.Time {
	if s == nil {
		return nil
	}
	return s.TokenExpiryDate
}

type SourceTypeformUpdateAuthorizationMethodType string

const (
	SourceTypeformUpdateAuthorizationMethodTypeSourceTypeformUpdateOAuth20      SourceTypeformUpdateAuthorizationMethodType = "source-typeform-update_OAuth2.0"
	SourceTypeformUpdateAuthorizationMethodTypeSourceTypeformUpdatePrivateToken SourceTypeformUpdateAuthorizationMethodType = "source-typeform-update_Private Token"
)

type SourceTypeformUpdateAuthorizationMethod struct {
	SourceTypeformUpdateOAuth20      *SourceTypeformUpdateOAuth20      `queryParam:"inline" union:"member"`
	SourceTypeformUpdatePrivateToken *SourceTypeformUpdatePrivateToken `queryParam:"inline" union:"member"`

	Type SourceTypeformUpdateAuthorizationMethodType
}

func CreateSourceTypeformUpdateAuthorizationMethodSourceTypeformUpdateOAuth20(sourceTypeformUpdateOAuth20 SourceTypeformUpdateOAuth20) SourceTypeformUpdateAuthorizationMethod {
	typ := SourceTypeformUpdateAuthorizationMethodTypeSourceTypeformUpdateOAuth20

	return SourceTypeformUpdateAuthorizationMethod{
		SourceTypeformUpdateOAuth20: &sourceTypeformUpdateOAuth20,
		Type:                        typ,
	}
}

func CreateSourceTypeformUpdateAuthorizationMethodSourceTypeformUpdatePrivateToken(sourceTypeformUpdatePrivateToken SourceTypeformUpdatePrivateToken) SourceTypeformUpdateAuthorizationMethod {
	typ := SourceTypeformUpdateAuthorizationMethodTypeSourceTypeformUpdatePrivateToken

	return SourceTypeformUpdateAuthorizationMethod{
		SourceTypeformUpdatePrivateToken: &sourceTypeformUpdatePrivateToken,
		Type:                             typ,
	}
}

func (u *SourceTypeformUpdateAuthorizationMethod) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var sourceTypeformUpdateOAuth20 SourceTypeformUpdateOAuth20 = SourceTypeformUpdateOAuth20{}
	if err := utils.UnmarshalJSON(data, &sourceTypeformUpdateOAuth20, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceTypeformUpdateAuthorizationMethodTypeSourceTypeformUpdateOAuth20,
			Value: &sourceTypeformUpdateOAuth20,
		})
	}

	var sourceTypeformUpdatePrivateToken SourceTypeformUpdatePrivateToken = SourceTypeformUpdatePrivateToken{}
	if err := utils.UnmarshalJSON(data, &sourceTypeformUpdatePrivateToken, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceTypeformUpdateAuthorizationMethodTypeSourceTypeformUpdatePrivateToken,
			Value: &sourceTypeformUpdatePrivateToken,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceTypeformUpdateAuthorizationMethod", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceTypeformUpdateAuthorizationMethod", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(SourceTypeformUpdateAuthorizationMethodType)
	switch best.Type {
	case SourceTypeformUpdateAuthorizationMethodTypeSourceTypeformUpdateOAuth20:
		u.SourceTypeformUpdateOAuth20 = best.Value.(*SourceTypeformUpdateOAuth20)
		return nil
	case SourceTypeformUpdateAuthorizationMethodTypeSourceTypeformUpdatePrivateToken:
		u.SourceTypeformUpdatePrivateToken = best.Value.(*SourceTypeformUpdatePrivateToken)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceTypeformUpdateAuthorizationMethod", string(data))
}

func (u SourceTypeformUpdateAuthorizationMethod) MarshalJSON() ([]byte, error) {
	if u.SourceTypeformUpdateOAuth20 != nil {
		return utils.MarshalJSON(u.SourceTypeformUpdateOAuth20, "", true)
	}

	if u.SourceTypeformUpdatePrivateToken != nil {
		return utils.MarshalJSON(u.SourceTypeformUpdatePrivateToken, "", true)
	}

	return nil, errors.New("could not marshal union type SourceTypeformUpdateAuthorizationMethod: all fields are null")
}

type SourceTypeformUpdateSourceType string

const (
	SourceTypeformUpdateSourceTypeTypeform SourceTypeformUpdateSourceType = "typeform"
)

func (e SourceTypeformUpdateSourceType) ToPointer() *SourceTypeformUpdateSourceType {
	return &e
}
func (e *SourceTypeformUpdateSourceType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "typeform":
		*e = SourceTypeformUpdateSourceType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for SourceTypeformUpdateSourceType: %v", v)
	}
}

type SourceTypeformUpdate struct {
	Credentials *SourceTypeformUpdateAuthorizationMethod `json:"credentials,omitempty"`
	// When this parameter is set, the connector will replicate data only from the input forms. Otherwise, all forms in your Typeform account will be replicated. You can find form IDs in your form URLs. For example, in the URL "https://mysite.typeform.com/to/u6nXL7" the form_id is u6nXL7. You can find form URLs on Share panel
	FormIds []string `json:"form_ids,omitempty"`
	// The date from which you'd like to replicate data for Typeform API, in the format YYYY-MM-DDT00:00:00Z. All data generated after this date will be replicated.
	StartDate            *time.Time                      `json:"start_date,omitempty"`
	sourceType           *SourceTypeformUpdateSourceType `const:"typeform" json:"sourceType"`
	AdditionalProperties any                             `additionalProperties:"true" json:"-"`
}

func (s SourceTypeformUpdate) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceTypeformUpdate) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceTypeformUpdate) GetCredentials() *SourceTypeformUpdateAuthorizationMethod {
	if s == nil {
		return nil
	}
	return s.Credentials
}

func (s *SourceTypeformUpdate) GetFormIds() []string {
	if s == nil {
		return nil
	}
	return s.FormIds
}

func (s *SourceTypeformUpdate) GetStartDate() *time.Time {
	if s == nil {
		return nil
	}
	return s.StartDate
}

func (s *SourceTypeformUpdate) GetSourceType() *SourceTypeformUpdateSourceType {
	return SourceTypeformUpdateSourceTypeTypeform.ToPointer()
}

func (s *SourceTypeformUpdate) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}
