// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/types"
)

type SourceTicktickUpdateBearerTokenFromOauth2 struct {
	authType *string `const:"Token" json:"auth_type,omitempty"`
	// Access token for making authenticated requests; filled after complete oauth2 flow.
	BearerToken *string `json:"bearer_token,omitempty"`
}

func (s SourceTicktickUpdateBearerTokenFromOauth2) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceTicktickUpdateBearerTokenFromOauth2) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceTicktickUpdateBearerTokenFromOauth2) GetAuthType() *string {
	return types.Pointer("Token")
}

func (s *SourceTicktickUpdateBearerTokenFromOauth2) GetBearerToken() *string {
	if s == nil {
		return nil
	}
	return s.BearerToken
}

type SourceTicktickUpdateOAuth2 struct {
	authType *string `const:"Oauth" json:"auth_type,omitempty"`
	// Access token for making authenticated requests; filled after complete oauth2 flow.
	ClientAccessToken *string `json:"client_access_token,omitempty"`
	// The client ID of your Ticktick application. Read more <a href="https://developer.ticktick.com/api#/openapi?id=getting-started">here</a>.
	ClientID *string `json:"client_id,omitempty"`
	// The client secret of of your Ticktick application. application. Read more <a href="https://developer.ticktick.com/api#/openapi?id=getting-started">here</a>.
	ClientSecret *string `json:"client_secret,omitempty"`
}

func (s SourceTicktickUpdateOAuth2) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceTicktickUpdateOAuth2) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceTicktickUpdateOAuth2) GetAuthType() *string {
	return types.Pointer("Oauth")
}

func (s *SourceTicktickUpdateOAuth2) GetClientAccessToken() *string {
	if s == nil {
		return nil
	}
	return s.ClientAccessToken
}

func (s *SourceTicktickUpdateOAuth2) GetClientID() *string {
	if s == nil {
		return nil
	}
	return s.ClientID
}

func (s *SourceTicktickUpdateOAuth2) GetClientSecret() *string {
	if s == nil {
		return nil
	}
	return s.ClientSecret
}

type SourceTicktickUpdateAuthenticationTypeType string

const (
	SourceTicktickUpdateAuthenticationTypeTypeSourceTicktickUpdateOAuth2                SourceTicktickUpdateAuthenticationTypeType = "source-ticktick-update_OAuth2"
	SourceTicktickUpdateAuthenticationTypeTypeSourceTicktickUpdateBearerTokenFromOauth2 SourceTicktickUpdateAuthenticationTypeType = "source-ticktick-update_Bearer Token (from Oauth2)"
)

type SourceTicktickUpdateAuthenticationType struct {
	SourceTicktickUpdateOAuth2                *SourceTicktickUpdateOAuth2                `queryParam:"inline" union:"member"`
	SourceTicktickUpdateBearerTokenFromOauth2 *SourceTicktickUpdateBearerTokenFromOauth2 `queryParam:"inline" union:"member"`

	Type SourceTicktickUpdateAuthenticationTypeType
}

func CreateSourceTicktickUpdateAuthenticationTypeSourceTicktickUpdateOAuth2(sourceTicktickUpdateOAuth2 SourceTicktickUpdateOAuth2) SourceTicktickUpdateAuthenticationType {
	typ := SourceTicktickUpdateAuthenticationTypeTypeSourceTicktickUpdateOAuth2

	return SourceTicktickUpdateAuthenticationType{
		SourceTicktickUpdateOAuth2: &sourceTicktickUpdateOAuth2,
		Type:                       typ,
	}
}

func CreateSourceTicktickUpdateAuthenticationTypeSourceTicktickUpdateBearerTokenFromOauth2(sourceTicktickUpdateBearerTokenFromOauth2 SourceTicktickUpdateBearerTokenFromOauth2) SourceTicktickUpdateAuthenticationType {
	typ := SourceTicktickUpdateAuthenticationTypeTypeSourceTicktickUpdateBearerTokenFromOauth2

	return SourceTicktickUpdateAuthenticationType{
		SourceTicktickUpdateBearerTokenFromOauth2: &sourceTicktickUpdateBearerTokenFromOauth2,
		Type: typ,
	}
}

func (u *SourceTicktickUpdateAuthenticationType) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var sourceTicktickUpdateOAuth2 SourceTicktickUpdateOAuth2 = SourceTicktickUpdateOAuth2{}
	if err := utils.UnmarshalJSON(data, &sourceTicktickUpdateOAuth2, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceTicktickUpdateAuthenticationTypeTypeSourceTicktickUpdateOAuth2,
			Value: &sourceTicktickUpdateOAuth2,
		})
	}

	var sourceTicktickUpdateBearerTokenFromOauth2 SourceTicktickUpdateBearerTokenFromOauth2 = SourceTicktickUpdateBearerTokenFromOauth2{}
	if err := utils.UnmarshalJSON(data, &sourceTicktickUpdateBearerTokenFromOauth2, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceTicktickUpdateAuthenticationTypeTypeSourceTicktickUpdateBearerTokenFromOauth2,
			Value: &sourceTicktickUpdateBearerTokenFromOauth2,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceTicktickUpdateAuthenticationType", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceTicktickUpdateAuthenticationType", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(SourceTicktickUpdateAuthenticationTypeType)
	switch best.Type {
	case SourceTicktickUpdateAuthenticationTypeTypeSourceTicktickUpdateOAuth2:
		u.SourceTicktickUpdateOAuth2 = best.Value.(*SourceTicktickUpdateOAuth2)
		return nil
	case SourceTicktickUpdateAuthenticationTypeTypeSourceTicktickUpdateBearerTokenFromOauth2:
		u.SourceTicktickUpdateBearerTokenFromOauth2 = best.Value.(*SourceTicktickUpdateBearerTokenFromOauth2)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceTicktickUpdateAuthenticationType", string(data))
}

func (u SourceTicktickUpdateAuthenticationType) MarshalJSON() ([]byte, error) {
	if u.SourceTicktickUpdateOAuth2 != nil {
		return utils.MarshalJSON(u.SourceTicktickUpdateOAuth2, "", true)
	}

	if u.SourceTicktickUpdateBearerTokenFromOauth2 != nil {
		return utils.MarshalJSON(u.SourceTicktickUpdateBearerTokenFromOauth2, "", true)
	}

	return nil, errors.New("could not marshal union type SourceTicktickUpdateAuthenticationType: all fields are null")
}

type SourceTicktickUpdateSourceType string

const (
	SourceTicktickUpdateSourceTypeTicktick SourceTicktickUpdateSourceType = "ticktick"
)

func (e SourceTicktickUpdateSourceType) ToPointer() *SourceTicktickUpdateSourceType {
	return &e
}
func (e *SourceTicktickUpdateSourceType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "ticktick":
		*e = SourceTicktickUpdateSourceType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for SourceTicktickUpdateSourceType: %v", v)
	}
}

type SourceTicktickUpdate struct {
	Authorization        *SourceTicktickUpdateAuthenticationType `json:"authorization,omitempty"`
	sourceType           *SourceTicktickUpdateSourceType         `const:"ticktick" json:"sourceType"`
	AdditionalProperties any                                     `additionalProperties:"true" json:"-"`
}

func (s SourceTicktickUpdate) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceTicktickUpdate) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceTicktickUpdate) GetAuthorization() *SourceTicktickUpdateAuthenticationType {
	if s == nil {
		return nil
	}
	return s.Authorization
}

func (s *SourceTicktickUpdate) GetSourceType() *SourceTicktickUpdateSourceType {
	return SourceTicktickUpdateSourceTypeTicktick.ToPointer()
}

func (s *SourceTicktickUpdate) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}
