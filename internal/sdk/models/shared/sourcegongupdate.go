// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/internal/utils"
	"github.com/airbytehq/terraform-provider-airbyte/internal/sdk/types"
	"time"
)

type SourceGongUpdateAuthenticateWithAPIKey struct {
	// Gong Access Key
	AccessKey *string `json:"access_key,omitempty"`
	// Gong Access Key Secret
	AccessKeySecret      *string `json:"access_key_secret,omitempty"`
	authType             *string `const:"APIKey" json:"auth_type,omitempty"`
	AdditionalProperties any     `additionalProperties:"true" json:"-"`
}

func (s SourceGongUpdateAuthenticateWithAPIKey) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceGongUpdateAuthenticateWithAPIKey) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceGongUpdateAuthenticateWithAPIKey) GetAccessKey() *string {
	if s == nil {
		return nil
	}
	return s.AccessKey
}

func (s *SourceGongUpdateAuthenticateWithAPIKey) GetAccessKeySecret() *string {
	if s == nil {
		return nil
	}
	return s.AccessKeySecret
}

func (s *SourceGongUpdateAuthenticateWithAPIKey) GetAuthType() *string {
	return types.Pointer("APIKey")
}

func (s *SourceGongUpdateAuthenticateWithAPIKey) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}

type SourceGongUpdateAuthenticateViaGongOAuth struct {
	// Access Token for making authenticated requests.
	AccessToken *string `json:"access_token,omitempty"`
	authType    *string `const:"OAuth2.0" json:"auth_type,omitempty"`
	// The Client ID of your Gong OAuth application.
	ClientID *string `json:"client_id,omitempty"`
	// The Client Secret of your Gong OAuth application.
	ClientSecret *string `json:"client_secret,omitempty"`
	// Refresh Token to renew the expired Access Token.
	RefreshToken *string `json:"refresh_token,omitempty"`
	// The date-time when the access token expires.
	TokenExpiryDate      *time.Time `json:"token_expiry_date,omitempty"`
	AdditionalProperties any        `additionalProperties:"true" json:"-"`
}

func (s SourceGongUpdateAuthenticateViaGongOAuth) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceGongUpdateAuthenticateViaGongOAuth) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceGongUpdateAuthenticateViaGongOAuth) GetAccessToken() *string {
	if s == nil {
		return nil
	}
	return s.AccessToken
}

func (s *SourceGongUpdateAuthenticateViaGongOAuth) GetAuthType() *string {
	return types.Pointer("OAuth2.0")
}

func (s *SourceGongUpdateAuthenticateViaGongOAuth) GetClientID() *string {
	if s == nil {
		return nil
	}
	return s.ClientID
}

func (s *SourceGongUpdateAuthenticateViaGongOAuth) GetClientSecret() *string {
	if s == nil {
		return nil
	}
	return s.ClientSecret
}

func (s *SourceGongUpdateAuthenticateViaGongOAuth) GetRefreshToken() *string {
	if s == nil {
		return nil
	}
	return s.RefreshToken
}

func (s *SourceGongUpdateAuthenticateViaGongOAuth) GetTokenExpiryDate() *time.Time {
	if s == nil {
		return nil
	}
	return s.TokenExpiryDate
}

func (s *SourceGongUpdateAuthenticateViaGongOAuth) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}

type SourceGongUpdateAuthenticationType string

const (
	SourceGongUpdateAuthenticationTypeSourceGongUpdateAuthenticateViaGongOAuth SourceGongUpdateAuthenticationType = "source-gong-update_Authenticate via Gong (OAuth)"
	SourceGongUpdateAuthenticationTypeSourceGongUpdateAuthenticateWithAPIKey   SourceGongUpdateAuthenticationType = "source-gong-update_Authenticate with API Key"
)

// SourceGongUpdateAuthentication - Choose how to authenticate to Gong.
type SourceGongUpdateAuthentication struct {
	SourceGongUpdateAuthenticateViaGongOAuth *SourceGongUpdateAuthenticateViaGongOAuth `queryParam:"inline" union:"member"`
	SourceGongUpdateAuthenticateWithAPIKey   *SourceGongUpdateAuthenticateWithAPIKey   `queryParam:"inline" union:"member"`

	Type SourceGongUpdateAuthenticationType
}

func CreateSourceGongUpdateAuthenticationSourceGongUpdateAuthenticateViaGongOAuth(sourceGongUpdateAuthenticateViaGongOAuth SourceGongUpdateAuthenticateViaGongOAuth) SourceGongUpdateAuthentication {
	typ := SourceGongUpdateAuthenticationTypeSourceGongUpdateAuthenticateViaGongOAuth

	return SourceGongUpdateAuthentication{
		SourceGongUpdateAuthenticateViaGongOAuth: &sourceGongUpdateAuthenticateViaGongOAuth,
		Type:                                     typ,
	}
}

func CreateSourceGongUpdateAuthenticationSourceGongUpdateAuthenticateWithAPIKey(sourceGongUpdateAuthenticateWithAPIKey SourceGongUpdateAuthenticateWithAPIKey) SourceGongUpdateAuthentication {
	typ := SourceGongUpdateAuthenticationTypeSourceGongUpdateAuthenticateWithAPIKey

	return SourceGongUpdateAuthentication{
		SourceGongUpdateAuthenticateWithAPIKey: &sourceGongUpdateAuthenticateWithAPIKey,
		Type:                                   typ,
	}
}

func (u *SourceGongUpdateAuthentication) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var sourceGongUpdateAuthenticateViaGongOAuth SourceGongUpdateAuthenticateViaGongOAuth = SourceGongUpdateAuthenticateViaGongOAuth{}
	if err := utils.UnmarshalJSON(data, &sourceGongUpdateAuthenticateViaGongOAuth, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceGongUpdateAuthenticationTypeSourceGongUpdateAuthenticateViaGongOAuth,
			Value: &sourceGongUpdateAuthenticateViaGongOAuth,
		})
	}

	var sourceGongUpdateAuthenticateWithAPIKey SourceGongUpdateAuthenticateWithAPIKey = SourceGongUpdateAuthenticateWithAPIKey{}
	if err := utils.UnmarshalJSON(data, &sourceGongUpdateAuthenticateWithAPIKey, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  SourceGongUpdateAuthenticationTypeSourceGongUpdateAuthenticateWithAPIKey,
			Value: &sourceGongUpdateAuthenticateWithAPIKey,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceGongUpdateAuthentication", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceGongUpdateAuthentication", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(SourceGongUpdateAuthenticationType)
	switch best.Type {
	case SourceGongUpdateAuthenticationTypeSourceGongUpdateAuthenticateViaGongOAuth:
		u.SourceGongUpdateAuthenticateViaGongOAuth = best.Value.(*SourceGongUpdateAuthenticateViaGongOAuth)
		return nil
	case SourceGongUpdateAuthenticationTypeSourceGongUpdateAuthenticateWithAPIKey:
		u.SourceGongUpdateAuthenticateWithAPIKey = best.Value.(*SourceGongUpdateAuthenticateWithAPIKey)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for SourceGongUpdateAuthentication", string(data))
}

func (u SourceGongUpdateAuthentication) MarshalJSON() ([]byte, error) {
	if u.SourceGongUpdateAuthenticateViaGongOAuth != nil {
		return utils.MarshalJSON(u.SourceGongUpdateAuthenticateViaGongOAuth, "", true)
	}

	if u.SourceGongUpdateAuthenticateWithAPIKey != nil {
		return utils.MarshalJSON(u.SourceGongUpdateAuthenticateWithAPIKey, "", true)
	}

	return nil, errors.New("could not marshal union type SourceGongUpdateAuthentication: all fields are null")
}

type SourceGongUpdateSourceType string

const (
	SourceGongUpdateSourceTypeGong SourceGongUpdateSourceType = "gong"
)

func (e SourceGongUpdateSourceType) ToPointer() *SourceGongUpdateSourceType {
	return &e
}
func (e *SourceGongUpdateSourceType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "gong":
		*e = SourceGongUpdateSourceType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for SourceGongUpdateSourceType: %v", v)
	}
}

type SourceGongUpdate struct {
	// Choose how to authenticate to Gong.
	Credentials *SourceGongUpdateAuthentication `json:"credentials,omitempty"`
	// The date from which to list calls, in the ISO-8601 format; if not specified, the calls start with the earliest recorded call. For web-conference calls recorded by Gong, the date denotes its scheduled time, otherwise, it denotes its actual start time.
	StartDate            *string                     `json:"start_date,omitempty"`
	sourceType           *SourceGongUpdateSourceType `const:"gong" json:"sourceType"`
	AdditionalProperties any                         `additionalProperties:"true" json:"-"`
}

func (s SourceGongUpdate) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *SourceGongUpdate) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (s *SourceGongUpdate) GetCredentials() *SourceGongUpdateAuthentication {
	if s == nil {
		return nil
	}
	return s.Credentials
}

func (s *SourceGongUpdate) GetStartDate() *string {
	if s == nil {
		return nil
	}
	return s.StartDate
}

func (s *SourceGongUpdate) GetSourceType() *SourceGongUpdateSourceType {
	return SourceGongUpdateSourceTypeGong.ToPointer()
}

func (s *SourceGongUpdate) GetAdditionalProperties() any {
	if s == nil {
		return nil
	}
	return s.AdditionalProperties
}
